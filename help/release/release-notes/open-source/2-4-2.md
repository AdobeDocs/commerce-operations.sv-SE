---
title: Versionsinformation om Magento Open Source 2.4.2
description: Läs om nya funktioner, förbättringar, felkorrigeringar och kända fel i version 2.4.2 Magento Open Source.
exl-id: 01e90bcb-d43c-4daa-9669-44e3370102af
source-git-commit: 55e0e688999c47f72593df46648609d9f9f98398
workflow-type: tm+mt
source-wordcount: '13935'
ht-degree: 0%

---

# Versionsinformation om Magento Open Source 2.4.2

Magento Open Source 2.4.2 har förbättrat prestanda och säkerhet samt gjort betydande plattformsförbättringar. Säkerhetsförbättringarna inkluderar utökat stöd för `SameSite` attribut för alla cookies. Stöd finns nu för Elasticsearch 7.9.x och Redis 6.x.

Den här versionen innehåller över 280 nya korrigeringar av kärnkod och 35 säkerhetsförbättringar. Det innehåller en lösning på nästan 290 GitHub-problem som våra communitymedlemmar har. Dessa communitybidrag omfattar allt från mindre rensning av kärnkod till betydande förbättringar i GraphQL.

Alla kända fel som identifierats i 2.4.1 har åtgärdats i den här versionen.

{{bics}}

## Använd `AC-3022.patch` fortsätta erbjuda DHL som fraktfirma

DHL har introducerat schemaversion 6.2 och kommer inom kort att föråldra schemaversion 6.0. Adobe Commerce 2.4.4 och tidigare versioner som stöder DHL-integration stöder endast version 6.0. Handlare som distribuerar dessa versioner bör tillämpa `AC-3022.patch` så snart det går att fortsätta erbjuda DHL som fraktfirma. Se [Använd en patch för att fortsätta erbjuda DHL som fraktfirma](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Kunskapsbasartikeln innehåller information om hur du hämtar och installerar korrigeringen.

## Säkerhetsuppdatering

Merchants kan nu installera tidskänsliga säkerhetskorrigeringar utan att tillämpa de hundratals funktionella korrigeringar och förbättringar som finns i en fullständig kvartalsversion (till exempel 2.4.1-p1). Patch 2.4.0.12 (Composer package 2.4.1-p1) är en säkerhetspatch som innehåller korrigeringar för säkerhetsluckor som har identifierats i vår tidigare kvartalsutgåva, 2.4.1. Alla snabbkorrigeringar som tillämpades på version 2.4.1 ingår i den här säkerhetspatchen. (A *snabbkorrigering* innehåller en korrigering till en släppt version som åtgärdar ett specifikt problem eller fel.)

Allmän information om säkerhetsuppdateringar finns i [Introduktion till den nya säkerhetsuppdateringen](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Instruktioner om hur du hämtar och använder säkerhetspatchar (inklusive patch 2.4.1-p1) finns i [Snabbstart av lokal installation](../../../installation/composer.md). Säkerhetsuppdateringar innehåller endast säkerhetsfelkorrigeringar, inte de ytterligare säkerhetsförbättringar som ingår i den fullständiga korrigeringen.

## Annan versionsinformation

Även om koden för de här funktionerna paketeras med kvartalsvisa releaser kommer flera av dessa projekt (till exempel Progressive Web Application (PWA) Studio) också att släppas oberoende av varandra. Felkorrigeringar för dessa projekt beskrivs i den separata, projektspecifika versionsinformation som finns i dokumentationen för varje projekt.

## Högdagrar

Leta efter följande högdagrar i den här versionen.

### Betydande säkerhetsförbättringar

Den här versionen innehåller över 35 säkerhetskorrigeringar och plattformssäkerhetsförbättringar. Alla säkerhetskorrigeringar har backporterats till 2.4.1-p1 och 2.3.6-p1.

#### Mer än 35 säkerhetsförbättringar som kan åtgärda säkerhetsluckor vid fjärrexekvering av kod (RCE) och cross-site scripting (XSS)

Inga bekräftade attacker relaterade till dessa problem har inträffat hittills. Vissa säkerhetsluckor kan dock utnyttjas för att få tillgång till kundinformation eller ta över administratörssessioner. De flesta av dessa problem kräver att en angripare först får åtkomst till administratören. Därför påminner vi dig om att vidta alla nödvändiga åtgärder för att skydda din administratör, inklusive men inte begränsat till dessa åtgärder: IP-tillåtelselistning, [tvåfaktorsautentisering](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), användning av ett VPN, användning av en unik plats i stället för `/admin`och god lösenordshygien. Se [Adobe säkerhetsbulletin](https://helpx.adobe.com/security/products/magento/apsb21-08.html) om du vill ha en diskussion om dessa åtgärdade problem.

#### Ytterligare säkerhetsförbättringar

Säkerhetsförbättringar för den här versionen är:

* Alla viktiga cookies har nu stöd för `SameSite` -attribut.

* Programmet visar nu meddelanden som identifierar potentiellt skadligt innehåll i beskrivningsfält för produkter och kategorier när användaren försöker spara värden i dessa fält.

* Filsystemåtgärder i olika komponenter har standardiserats och härdats för att förhindra skadliga överföringar.

* CSP-överträdelser (Core Content Security Policy) har åtgärdats.

{{cve-notice}}

### Förbättrade infrastrukturer

Den här versionen innehåller förbättringar av grundkvaliteten, som förbättrar ramverkets kvalitet och dessa funktionsområden: Kundkonto, katalog, CMS, OMS, import/export, kampanjer och målgruppsanpassning samt kundvagn och utcheckning.

### Förbättringar av plattformen

* [**Elasticsearch 7.9.x stöds nu**](../../../installation/system-requirements.md). Även om vi rekommenderar att du kör Elasticsearch 7.9.x är version 2.4.x fortfarande kompatibel med Elasticsearch 7.4.x. <!-- MC-36867-->

* 2.4.2 har testats med [Varnish 6.4](../../../installation/system-requirements.md). Version 2.4.x är fortfarande kompatibel med lack 6.x.

* [**Stöd för Redis 6.x**](../../../installation/system-requirements.md). Version 2.4.x är fortfarande kompatibel med Redis 5.x. <!-- MC-34853-->

* 2.4.2 är nu kompatibelt med **Disposition 2.x**. Vi rekommenderar att handlare migrerar till Composer 2.x. Även om du kan installera den här versionen med Composer 1.x kommer Composer 1.x snart att ha nått slutet av livscykeln. En översikt över funktionerna i Composer 2.x finns i [Composer 2.0 finns nu att köpa!](https://blog.packagist.com/composer-2-0-is-now-available/)

Möjligheten att konfigurera en installation att använda en delad databas har tagits bort i den här versionen. Handlare som för närvarande använder en delad databas bör börja planera att återgå till eller migrera till en enda databas eller använda en alternativ metod. Se [Borttagning av delade databasfunktioner i Magento Open Source](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog-inlägg innehåller en översikt över detta problem.  Se [Återgå från en delad databas till en enda databas](../../../configuration/storage/revert-split-database.md) för migreringsanvisningar.

### Prestandaförbättringar

Den här versionen innehåller kodförbättringar som förbättrar API-prestanda och Admin-svarstid för distributioner med stora kataloger. Flera skalbarhetsförbättringar gör att 2.4.2 kan hantera komplexa kataloger upp till 20 gånger större än i tidigare versioner.

### Adobe Stock Integration

Den här versionen innehåller Adobe Stock Integration v2.1.1.

### GraphQL

Den här versionen innehåller GraphQL-avtal för följande funktioner:

* Stöd för [jämförelselistor](https://devdocs.magento.com/guides/v2.4/graphql/queries/compare-list.html). Shoppare kan [skapa](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-compare-list.html) och [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-compare-list.html) jämförelselistor, och [lägg till](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-compare-list.html) och [ta bort](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-compare-list.html) objekt i jämförelselistorna. Dessutom kan kunder som skapar en jämförelselista som gäst logga in som kund och [behåll](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-compare-list-to-customer.html) jämförelselistor.

* Lagt till [`generateCustomerTokenAsAdmin`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/generate-customer-token-as-admin.html) mutation och uppdaterade `Customer` objekt som stöder hjälp vid fjärrköp.

* Stöd för lokalisering i olika butiker som stöd för t.ex. byte av språk, kundvagn och valutor. <!-- MC-37801-->

* Stöd för fackföreningar i GraphQL har lagts till. [GitHub-29425](https://github.com/magento/magento2/issues/29425) <!-- ENGCOM-8291 -->

* GraphQL-schemat har förbättrats för att optimera hämtning av produktdata för konfigurerbara produkter med många varianter. <!-- MC-36138-->

* Objekt-ID för heltalstyp har ersatts med `uid` attribut av typen ID. <!-- MC-36346-->

* Lagt till `staging` attributet till [`ProductInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/product-interface.html) och [`CategoryInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/category-interface.html) för att avgöra om en produkt har mellanlagrats och för att visa den associerade kampanjinformationen. <!-- MC-33897-->

Se [GraphQL Developer Guide](https://devdocs.magento.com/guides/v2.4/graphql/) om du vill ha mer information om dessa förbättringar.

### PWA Studio

Denna version av PWA Studio innehåller följande:

* Internationalisering och lokalisering. Venia har nu stöd för flera språk och valutor.

* Förbättrat ramverk för utbyggbarhet som stöder kodändringar via tillägg.

* Initiala komponenter för Mitt konto, till exempel Önsklista, Sparade betalningar, Adressbok och Orderhistorik.

* Olika prestandaoptimeringar och felkorrigeringar.

Mer information om förbättringar och felkorrigeringar finns i [PWA Studio](https://github.com/magento/pwa-studio/releases). Se [kompatibilitet](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) för en lista över versioner av PWA Studio och kompatibla versioner av dessa.

### Mediegalleri

**Nya rollresurser för mediegalleriet**. Den här versionen ger säljarna möjlighet att begränsa administratörsåtkomst till endast mediegalleriet och styra vem som kan utföra dessa åtgärder:

* Infoga medieresurser i innehåll

* Överför resurser

* Redigera resursinformation

* Ta bort resurser från mediegalleriet

* Hantera mappstruktur.

**Webboptimerade bilder i innehållet**. Handlare kan nu använda [webboptimerad bildåtergivning](https://docs.magento.com/user-guide/cms/media-gallery-image-optimization.html) i innehåll i stället för högupplösta bilder. Originalbilden ändras inte i Mediegalleriet och bildåtergivningen genereras dynamiskt när bilden infogas i innehållet.

### Functional Testing Framework (MFTF)

MFTF 3.2.1 finns nu att köpa. I den här versionen introduceras feltolerans i både tester och testsvitgenerering. Ytterligare förbättringar och felkorrigeringar beskrivs i [Funktionstestningsramverksändring](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Tillägg som utvecklats av leverantör

I följande artiklar finns information om uppdateringar av funktioner och ändringar för den här versionen:

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Vertex Cloud](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Produktrecensioner för Yotpo](../../../upgrade/modules/upgrade.md)

### Förbättrat stöd för AWS S3

Stöd för Amazon Simple Storage Service (AWS S3) har förbättrats och omfattar stöd för:

* Objektlagring och framtida utbyggbarhet

* [Lagra mediefiler](../../../configuration/remote-storage/remote-storage.md) på AWS S3

## Åtgärdade problem

Vi har åtgärdat hundratals problem i 2.4.2-kärnkoden.

### Installation, uppgradering, driftsättning

<!-- MC-38429-->

* Möjligheten att konfigurera en installation att använda en delad databas har tagits bort i den här versionen. Se [Borttagning av delade databasfunktioner i Magento Open Source](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog-inlägg.

<!-- MC-36472-->

* Merchants kan nu uppgradera en Open Source-distribution som kör MySQL 8.x till en Commerce-distribution. Tidigare utlöstes ett undantag när `AUTO_INCREMENT` värden återställs till startvärden för alla tabeller där `row_id` lades till under uppgraderingen.

<!-- ENGCOM-7280 -->

* Programmet visar nu ett felmeddelande som identifierar sökvägen som användes för att skapa korrigeringen om ett fel inträffar när programmet körs `bin/magento/setup:db:generate-patch`. [GitHub-27523](https://github.com/magento/magento2/issues/27523)

<!-- ENGCOM-8029 -->

* `block_html`, `full_page`och `layout` cacheminnen inaktiveras nu som förväntat efter `bin/magento/setup:upgrade` exekvering.  [GitHub-28186](https://github.com/magento/magento2/issues/28186)

<!-- ENGCOM-8184 -->

* Den lägsta PHP-versionen som krävs i `bootstrap.php` har uppdaterats. [GitHub-30004](https://github.com/magento/magento2/issues/30004)

<!-- MC-38788-->

* Du kan nu köra `bin/magento/setup:upgrade` efter installation av exempeldata. Tidigare när du försökte köra `bin/magento/setup:upgrade`, visade programmet det här felet: `unable to apply data patch magento\catalogrulesampledata\setup\patch\data\installcatalogrulesampledata for module magento_catalogrulesampledata`. Programmet visade även det här felet i systemloggen: `main.ERROR: Sample Data error: Unable to unserialize value. Error: Syntax error`. [GitHub-30685](https://github.com/magento/magento2/issues/30685)

<!-- MC-36785-->

* Nu kan du ange en YouTube API-nyckel från kommandoraden som förväntat. Tidigare returnerade programmet det här felet när du försökte köra `bin/magento config:sensitive:set catalog/product_video/youtube_api_key`: `There are no sensitive configurations to fill`.

<!-- ENGCOM-8163 -->

* Programmet följer nu `maxMessages` värden som definieras i `queue_consumer.xml`. Tidigare använde programmet bara konfigurationsvärdena för distributionen. [GitHub-29522](https://github.com/magento/magento2/issues/29522)

<!-- ENGCOM-8243 -->

* URL-generering för en ny butik fungerar nu som väntat när butiken skapas med `bin/magento setup:config:import`. Tidigare genererades inte URL-omskrivningar i produktionsmiljöer. [GitHub-30025](https://github.com/magento/magento2/issues/30025)

<!-- ENGCOM-8230 -->

* Programmet genererar inte längre något fel när du försöker ändra `backend-frontname` med `ssh` behållare efter installation av Magento Open Source. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-8230 -->

* Frågan visas inte längre i programmet när du kör `bin/magento setup:install` för att ansluta till befintlig databas: `Overwrite the existing configuration for db-ssl-verify?[Y/n]`. [GitHub-29612](https://github.com/magento/magento2/issues/29612)

### Adobe Stock Integration

<!-- ENGCOM-8020-->

* Stöd för läsning har lagts till `exif_image.png` eller `exif-image.jpeg` metadata. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8194 8094 8147-->

* Innehållet som visas när du klickar på bokmärket Standardvy för Mediegalleriet filtreras inte längre. Tidigare innehöll standardvyn ett filter som användes från `url-filter` applier. [GitHub-1813](https://github.com/magento/adobe-stock-integration/issues/1813), [GitHub-1789](https://github.com/magento/adobe-stock-integration/issues/1789), [GitHub-1780](https://github.com/magento/adobe-stock-integration/issues/1780)

<!-- ENGCOM-8070 -->

* Logiken har tagits bort från WYSIWYG OnInsert-styrenheten (`Magento\Cms\Controller\Adminhtml\Wysiwyg\Images\OnInsert::execute()`) och läggs till i `Model\Wysiwyg\Images\PrepareImage::execute()` modell. [GitHub-1504](https://github.com/magento/adobe-stock-integration/issues/1504)

<!-- ENGCOM-8081 -->

* Områdesemulering har tagits bort från `media-content:sync` kommando (`\Magento\MediaContentSynchronization\Console\Command\Synchronize::execute`). [GitHub-1784](https://github.com/magento/adobe-stock-integration/issues/1784)

### Analyser

<!-- MC-37137-->

* Avancerad rapportering fungerar nu som väntat i flera miljöer i samma domän. Tidigare misslyckades CSV-filer som genererades av Advanced Reporting eftersom dubbla citattecken escape-konverterades med omvända snedstreck i stället för med ett annat dubbelt citattecken enligt CSV-standard RFC4180.

<!-- MC-35996-->

* The `analytics_collect_data` jobbet körs nu korrekt när standardporten eller icke-standardporten används för att ansluta till MySQL i `env.php`. Tidigare `analytics_collect_data` ett fel uppstod när du använde icke-standardporten.

<!-- MC-35407-->

* CSV-filer som genereras av `analytics_collect_data` nu har rymt ordentligt. Tidigare genererades dessa filer inte med korrekt flytning, vilket förhindrade genereringen av inventeringsrapporter.

### Braintree

* Nu kan köpare använda Apple Pay för att beställa virtuella produkter. Tidigare uppstod följande fel i programmet: `There are no shipping methods available for you right now. Please try again or use an alternative payment method`.

* Betalningsmetoden PayPal Express Checkout fungerar nu som väntat med betalningsmetoden Braintree-kreditkort. Tidigare visades inte **PayPal** när betalningsmetoden för kreditkort på Braintree har aktiverats.

### Paketprodukter

<!-- MC-34063-->

* Programmet sätter inte längre priser för underordnade produkter till fasta priser inom citattecken.

<!-- MC-38050-->

* Prissortering fungerar nu som väntat när paketprodukter innehåller färdiga produkter. Tidigare visades inte produkter i sorteringspriset i fallande ordning i ordning efter minskande pris.

<!-- MC-38576-->

* Programmet tillämpar nu automatiskt standardkvantiteten 1 för produktalternativ när det finns många alternativ. Tidigare var handlarna tvungna att manuellt tilldela respektive alternativ en standardkvantitet.

<!-- ENGCOM-8159 -->

* På sidan Skapa på orderfakturan visas nu de underordnade produkterna för paketprodukter som förväntat. [GitHub-27350](https://github.com/magento/magento2/issues/27350)

<!-- MC-38460 -->

* Programmet tilldelar nu rätt produktpriser när du beställer enkla produkter som ingår i en paketprodukt till ett anpassat pris. Tidigare ledde fastställandet av ett anpassat pris på en paketprodukt till felaktiga priser på bifogade enkla produkter när de beställdes på nytt. [GitHub-30343](https://github.com/magento/magento2/issues/30343)

<!-- MC-30348 -->

* Anropar POST `/V1/order/{orderId}/ship` om du vill leverera en beställning som innehåller en paketprodukt markeras beställningen som slutförd. Tidigare visades följande felmeddelande i programmet: `You can't create a shipment without products`. [GitHub-9762](https://github.com/magento/magento2/issues/9762)

### Kundvagn och kassan

<!-- MC-34264-->

* Leveransmetoduppskattaren fungerar nu som väntat när anpassade adressattribut finns i leveranssteget i arbetsflödet för utcheckning. Tidigare visades följande felmeddelande i programmet: `{"message":"Error occurred during \"custom_attributes\" processing. A custom attribute is specified with a missing attribute code. Verify the code and try again."}` [GitHub-27505](https://github.com/magento/magento2/issues/27505)

<!-- MC-35783-->

* Programmet visar nu `You have no items in your shopping cart` meddelandet i minivagnen som väntat när en kund tar bort den enda artikeln i kundvagnen. Tidigare uppdaterades inte kundvagnsdata för `checkout/cart/removeFailed` när en kund tog bort det enskilda objektet och programmet visade det här meddelandet: `1 product requires your attention`.

<!-- MC-36088-->

* Ansökan visar inte längre fraktkostnaden för en order om en ej tillämplig fraktmetod. Tidigare visade programmet priset 0 för en ej tillämplig leveransmetod i arbetsflödet för utcheckning.

<!-- MC-36598-->

* En kunds standardfaktureringsadress väljs nu när **Fakturerings- och leveransadressen är samma** kryssrutan i arbetsflödet för utcheckning är avmarkerad.

<!-- MC-37351-->

* Kundvagnens innehåll förloras inte längre när en kund byter från en butik till en annan i en annan domän.

<!-- MC-38000-->

* Köpare kan nu slutföra en beställning med hjälp av Checka ut med flera adresser när de använder flera leveransmetoder. Tidigare visades följande fel i programmet: `There has been an error processing your request`. [GitHub-30197](https://github.com/magento/magento2/issues/30197)

<!-- MC-38048-->

* Programmet visar nu rätt standardland på utcheckningsarbetsflödets utcheckningssida när kunden ändrar butiksvyn från kundvagnen.

<!-- MC-38309-->

* Programmet exkluderar nu den aktuella sessionen när kundsessioner rensas efter en lösenordsåterställning efter utloggning när en gästkund är inloggad. Tidigare tömde programmet kundvagnen när kunden återställde sitt lösenord.

<!-- MC-36884-->

* Programmet visar nu rätt standardland för en butiksvy när en kund ändrar butiksvyn i kundvagnen. Tidigare var standardlandet felaktigt när butiksvyn ändrades i kundvagnen.

<!-- MC-38746-->

* Överflödiga samtal till `/rest/V1/guest-carts/cart_id/totals-information` slutpunkten i vagnen har tagits bort, vilket har förbättrat kundvagnens prestanda. När en kund lade till en produkt i kundvagnen och sedan tittade på kundvagnen anropade programmet `collectAddressTotals` metoden flera gånger.

<!-- MC-38833-->

* Programmet visar inte längre **Län** -fält för ett land i utcheckningsarbetsflödet när **Tillåt val av stat om det är valfritt för land** inställningen är inaktiverad. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- MC-38813-->

* Programmet upprepar inte längre en leveransadress i arbetsflödet för utcheckning av butiker när en order beställs på nytt av administratören.

<!-- MC-38814-->

* Korrigerade problem med designen av `AdminMediaGalleryInsertLargeImageFileSizeTest`.

<!-- MC-37321-->

* Alla nya poster i dialogrutan `quote` tabellen för gäster har nu tilldelats värdet 1 i `customer_is_guest field`. Tidigare tilldelades posten 0 i`quote.customer_is_guest` fält.

<!-- ENGCOM-8091 -->

* The **Skicka** i avsnittet Granska och betala i arbetsflödet för utcheckning har flyttats till `<form id="purchaseorder-form"...></form>`, vilket gör det möjligt att skicka implicit formulär utan att ändra något JavaScript. [GitHub-27925](https://github.com/magento/magento2/issues/27925)

<!-- ENGCOM-8428 -->

* Programmet visar inte längre **Län** fält i arbetsflödet för utcheckning när **Tillåt val av stat om det är valfritt för land** inställningen är inaktiverad. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- ENGCOM-8442 -->

* Programmet uppdaterar nu artikelsumman korrekt när en kund klickar på **Uppdatera kundvagn** vid utcheckning med flera adresser. [GitHub-30408](https://github.com/magento/magento2/issues/30408)

<!-- ENGCOM-8283 -->

* Programmet genererar inte längre ett undantag när `config.xml` det finns noder för betalningsmetoder som inte är installerade. Tidigare utlöstes ett undantag under utcheckningen av programmet. [GitHub-29555](https://github.com/magento/magento2/issues/29555)

<!-- ENGCOM-8215 -->

* Programmet återger nu produktnamn som innehåller specialtecken på rätt sätt i minikorgen. [GitHub-29075](https://github.com/magento/magento2/issues/29075)

<!-- ENGCOM-8308 -->

* Programmet ställer nu in rätt rabattpaket för registerpriset. Tidigare tillämpades ingen kundvagnsregel som angav en rabatt på vagnen när den beräknade registerräntan. [GitHub-30169](https://github.com/magento/magento2/issues/30169)

### Kundprisregel

* Kundprisreglerna tillämpas nu som förväntat när delsummor för order beräknas utan att inkludera moms. Den nya `Subtotal (Incl. Tax)` Alternativet har lagts till som ett villkor för kundprisregel.

<!-- MC-37884-->

* Om du tillämpar en prisregel med en kupong som använder GraphQL fungerar nu som väntat när **Fast beloppsrabatt för hela kundvagn** används.

### Katalog

<!-- MC-34100-->

* Programmet visar nu alla återaktiverade produkter i butiken som förväntat. Tidigare, när en produkt inaktiverades och sedan återaktiverades, visades inte produkten i programmet förrän cache-minnet för sidan &quot;Varnish&quot; rensades eller butiken indexerades om eftersom sidcachen inte ogiltigförklarades efter att en produkt återaktiverats.

<!-- MC-37745-->

* Partiell omindexering av stora kataloger fungerar nu som väntat. Tidigare försvann produkter slumpmässigt från kategorisidan för butiken vid omindexering med `catalogsearch_fulltext` partiell indexerare.

<!-- MC-35123-->

* Köpare kan nu beställa en fakturerad order av en produkt på nytt med anpassningsbara alternativ som förväntat. Tidigare uppstod det här felet i programmet när en kund försökte beställa om: `{"0":"The product's required option(s) weren't entered. Make sure the options are entered and try again`.

<!-- MC-35212-->

* Nu kan du ange **Layout** på sidan Kategoridesign till **Inga layoutuppdateringar**. Tidigare återgick programmet till **Kategori - FullWidth** när du tilldelade **Inga layoutuppdateringar** värde.

<!-- MC-35490-->

* Problem med sorteringsordningen i butiken har lösts. Tidigare, när programmet indexerade produktpriser, ställdes en konfigurerbar produkts `min_price` och `max_price` till 0 i `catalog_product_index_price` tabellen, som påverkade prissorteringsordningen i butiken.

<!-- MC-35608-->

* Programmet uppdaterar nu attribut som är märkta `Product Type`. Tidigare, eftersom `product_type` -attributet var reserverat i koden. Programmet visade det här meddelandet när du försökte uppdatera ett `Product Type` attribute: `An attribute with the same code (product_type) already exists.`

<!-- MC-36214-->

* Programmet ändrar inte längre positionen för en överförd video i avsnittet Bilder och videoklipp på sidan med produktinformation när du sparar produkten. Tidigare tilldelades den nya bildpositionen ett indexvärde (position i listan) och om de befintliga bildpositionerna inte justerades mot indexvärdena, placerades den nya bilden inte i listan.

<!-- MC-36548-->

* The **Lägg i kundvagnen** fungerar nu som väntat när **Lägg i kundvagnen** knappen är tillgänglig att klicka på. Om du tidigare klickade på den här knappen flera gånger i väntan på att en produktsida skulle läsas in uppstod följande fel: `Invalid Form Key. Please refresh the page`.

<!-- MC-37006 36835-->

* Programmet tömmer inte längre kategoricachen när en handlare lägger till eller tar bort inaktiverade produkter i eller från en kategori. Tidigare tömde programmet cacheminnet för relaterade kategorier trots produktstatus. Kategorierna tilldelades inte heller när en kategori sparades, vilket ledde till att kategoricachen tömdes.

<!-- MC-37347-->

* Filtrering av katalogprodukter i **Vyn Alla butiker** omfånget fungerar nu korrekt. Tidigare produkter med statusen `Enabled` eller `Disabled` visades i rutnätet när endast aktiverade eller inaktiverade produkter filtrerades.

<!-- MC-38038-->

* Delvis omindexering resulterar inte längre i missade produkter och tomma kategorier.

<!-- MC-38315-->

* Ändra ordning fungerar nu som förväntat när **Använd JavaScript-kalender** är aktiverat (**Lager** > **Konfiguration** > **Katalog** > **Anpassade alternativ för datum och tid**). När den här inställningen var aktiverad tidigare visade programmet det här felet när du försökte ändra ordningen på den tidigare placerade ordern från administratören: `Please specify date required option(s)`.

<!-- MC-38719-->

* Programmet visar nu rätt valuta i distributioner på flera platser när nivåpriser skapas.

<!-- MC-38914-->

* Anpassade attribut för produktbilder har nu escape-konverterats korrekt. The `data-src` attributet har samma värde som `src` som förväntat. Tidigare har URL-specialsymboler undantagits.

<!-- MC-37665-->

* Uppdatering av en kategori via REST API inaktiverar inte längre **Använd standardvärde** på attributen Aktivera kategori, Inkludera i meny och URL-nyckel.

<!-- MC-35363-->

* När du sparar en kategori töms nu bara blockcachen som hör till den här kategorin. Tidigare tömde programmet cacheminnet för alla kategoriblock.

<!-- MC-30626-->

* Priset för ett anpassat alternativ med ett procentpris konverteras nu som förväntat till den aktiva butikens basvaluta i distributioner i flera butiker. Tidigare konverterades priset på ett anpassat alternativ med ett procentpris felaktigt. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- MC-38890-->

* Nu kan bilderna återskapas och de här bilderna visas i administratören som förväntat när en handlare skickar data i mediegalleriet med POST `rest/all/V1/products`. Tidigare återskapade programmet bilderna men tog bort dem när en handlare skickade data i mediegalleriet via POST `rest/all/V1/products` om bilderna togs bort i `pub/media` men det fanns fortfarande poster i media som innehöll poster för dessa bilder. Som en följd av detta såg handlaren bara platshållare i administratören eftersom bilderna skapades och togs bort under uppdateringsprocessen.

<!-- MC-36903-->

* Poster tas nu bort som förväntat när du tar bort tilldelningen av ett objekt från en webbplats. Tidigare duplicerades bilder vid POST `rest/all/V1/products` utfördes.

<!-- MC-38413-->

* The `/V1/categories/{categoryId}/products` anrop returnerar nu en lista över alla produkter som tillhör den överordnade kategorin som förväntat. Tidigare, om en produkt tillhör mer än en underkategori i den överordnade kategorin, genererades den här typen av fel i programmet: `Internal Error. Details are available in the application log file. Report ID: webapi-5f8579e37db54`.  [GitHub-30461](https://github.com/magento/magento2/issues/30461)

<!-- MC-32996-->

* The `/V1/products/attributes/:attributeCode/options` REST-slutpunkten stöder nu uppdatering av ett befintligt attributalternativ.

<!-- MC-30626 ENGCOM-8475-->

* Priset för ett anpassat alternativ med ett procentpris konverteras nu som förväntat till den aktiva butikens basvaluta i distributioner i flera butiker. Tidigare konverterades priset på ett anpassat alternativ med ett procentpris felaktigt. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- ENGCOM-8395 -->

* Handlare kan nu spara ett nytt attribut när produkten skapas. Tidigare sparade inte programmet attributet och omdirigerade handlaren till butiksvyns hemsida när de försökte spara attributet. [GitHub-30362](https://github.com/magento/magento2/issues/30362)

<!-- ENGCOM-7997 -->

* Produktrutnät på **Försäljning** > **Beställningar** och **Katalog** > **Produkter** På sidorna visas nu alla relevanta butiker, inte bara den senast skapade butiken. [GitHub-29267](https://github.com/magento/magento2/issues/29267)

<!-- ENGCOM-6698 -->

* Produktdatabasen använder nu `store_id` om det går att spara attributvärden för en befintlig produkt.  Tidigare åsidosatte produktdatabasklassen produktens butiks-ID och tilldelade alltid standardbutiks-ID:t. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### Katalogregel

<!-- MC-35065-->

* Katalogprisreglerna fungerar nu som förväntat med anpassade alternativ på produktinformationssidor. Tidigare återspeglade inte produktpriserna på den sidan tillämpliga katalogprisregler. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

<!-- MC-34265-->

* Produkt- och katalogcacheminnen upphör nu att gälla enligt schemat. Cacheminnen har gått ut dagligen eftersom `сron` körde `catalogrule_apply_all` en gång om dagen, som indexerade om alla katalogregler och beroende indexerare, och rensade cachen för alla produkter och kategorier.

### Rensa

#### Tecko- och grammatikrensning

<!-- ENGCOM-7967 -->

* Titeln på sidan Orderfel har ändrats för att vara korrekt. Tidigare hette den här sidan: **Vi har tagit emot din beställning!**.  [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-8101 -->

* Onödiga blanksteg har tagits bort i `app/code/Magento/Contact/view/frontend/templates/form.phtml`. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-7716 -->

* Ett skrivfel i hjälpmeddelandet för `bin/magento/setup:config:set` underkommando.  [GitHub-28802](https://github.com/magento/magento2/issues/28802)

<!-- ENGCOM-8058 -->

* Korrigerad grammatik i PHPDoc för `framework/Registry.php` -fil. [GitHub-29661](https://github.com/magento/magento2/issues/29661)

<!-- ENGCOM-8273 -->

* Tar bort överflödigt tomt utrymme från `app/code/Magento/Catalog/Helper/Product/View.php`. [GitHub-30601](https://github.com/magento/magento2/issues/30601)

<!-- ENGCOM-8181 -->

* Ett skrivfel i ett funktionsnamn i har korrigerats `app/code/Magento/Ui/view/base/web/js/form/element/ui-select.js`. [GitHub-29987](https://github.com/magento/magento2/issues/29987)

<!-- ENGCOM-8478 -->

* Korrigerade en parallalisering av&quot;artikel&quot; i ordersammanfattningen för mini-varukorgen och kassan. [GitHub-29920](https://github.com/magento/magento2/issues/29920)

<!-- ENGCOM-8309 -->

* Borttagen tomt utrymme i textbundna element i navigeringsfilter med kod. [GitHub-30448](https://github.com/magento/magento2/issues/30448)

<!-- ENGCOM-8056 -->

* `rl` har korrigerats till `url` in  `\Magento\Framework\Filter\Template\Tokenizer\Parameter`. [GitHub-29185](https://github.com/magento/magento2/issues/29185)

#### Rensning av kod

<!-- MC-37922-->

* En ovidkommande HTML `<br>` -taggen har tagits bort från meddelandeområdet Kontrollera data i  **System**  >  **Importera** sida.

<!-- ENGCOM-8028 -->

* `ChangeQuoteControl` har omarbetats. [GitHub-29673](https://github.com/magento/magento2/issues/29673)

<!-- ENGCOM-8027 -->

* `AccessChangeQuoteControl` och dess enhetstester har omarbetats. [GitHub-29672](https://github.com/magento/magento2/issues/29672)

<!-- ENGCOM-8053 -->

* Kodformatet för deklarationen av returtypen har korrigerats i `app/code/Magento/Captcha/CustomerData/Captcha.php`. [GitHub-29712](https://github.com/magento/magento2/issues/29712)

<!-- ENGCOM-8288 -->

* Placeringen för knapplistan på sidan Nytt attribut har korrigerats.

<!-- ENGCOM-8315 -->

* Tillagt rätt blockklass för frontend `viewModel` referensexempel för `\Magento\Framework\View\Element\Template` klassen. [GitHub-30450](https://github.com/magento/magento2/issues/30450)

<!-- ENGCOM-8090 -->

* En redundant fältuppsättning i försäljningsregelformuläret har tagits bort. [GitHub-29599](https://github.com/magento/magento2/issues/29599)

<!-- ENGCOM-8448 -->

* Onödig kod har tagits bort från `hierarchy/edit.phtml` mall.

<!-- ENGCOM-8446 -->

* PHPdoc-kommentaren i har korrigerats `app/code/Magento/CatalogImportExport/Model/Export/Product.php`. [GitHub-30833](https://github.com/magento/magento2/issues/30833)

<!-- ENGCOM-8277 -->

* Dokumentblockanteckningen för `PublisherInterface` meddelandet har korrigerats. [GitHub-30190](https://github.com/magento/magento2/issues/30190)

<!-- ENGCOM-8264 -->

* Korrigerade argument i `getStatusByState` -metod. [GitHub-30173](https://github.com/magento/magento2/issues/30173)

<!-- ENGCOM-8235 -->

* Korrigerad metodbeskrivning i `app/code/Magento/Quote/Model/Cart/Totals/ItemConverter.php`. [GitHub-30125](https://github.com/magento/magento2/issues/30125)

<!-- ENGCOM-8242 -->

* Borttagen redundanta variabeltilldelningar på samma rad i flera filer. [GitHub-30133](https://github.com/magento/magento2/issues/30133)

<!-- ENGCOM-8263 -->

* Ändrad `@param string $attribute` till `@param AbstractAttribute|string[]|string $attribute` in `EntityAbstract.php`. [GitHub-30191](https://github.com/magento/magento2/issues/30191)

<!-- ENGCOM-8142 -->

* Ogiltiga taggar (till exempel `@package` och `@subpackage`) har tagits bort från dokumentblock i hela kodbasen. [GitHub-30061](https://github.com/magento/magento2/issues/30061)

<!-- ENGCOM-8117 -->

* Oanvända parametrar i konstruktionen av `AdvancedPricing` klassen har tagits bort. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Konfigurerbara produkter

<!-- MC-35016-->

* Om du filtrerar färdiga konfigurerbara produkter efter pris visas nu resultatet inom rätt prisintervall.

<!-- MC-38930-->

* En virtuell produkt ändrar inte längre typ när dess status ändras från aktiverad till inaktiverad (eller vice versa). Tidigare ändrades en produkts typ från virtuell till enkel när dess status ändrades.

<!-- MC-38197-->

* The `getValue()` metoden inte längre utlöser ett allvarligt fel vid uppdatering av kundvagnar.

<!-- MC-34444-->

* Konfigurerbara produkter som är tillgängliga på flera webbplatser visar inte längre enkla underordnade produkter som inte är tilldelade den specifika webbplatsen. [GitHub-28291](https://github.com/magento/magento2/issues/28291)

<!-- ENGCOM-8202 -->

* Produktsidorna för Storefront visar nu nivåpriser utan moms som förväntat. [GitHub-1225](https://github.com/magento/magento2/issues/12225)

<!-- ENGCOM-8134 8174-->

* MSRP-priser för konfigurerbara produkter konverteras nu korrekt till den valda valutan. Tidigare visade programmet priser i fel valuta och följande fel uppstod:  `Call to a member function setAppliedTaxes() on null`. [GitHub-26526](https://github.com/magento/magento2/issues/26526), [GitHub-29603](https://github.com/magento/magento2/issues/29603)

<!-- ENGCOM-8234 -->

* Merchants kan nu spara en butiksspecifik etikett för textruteattribut med värdet 0 (noll). Tidigare ersattes värdet 0 med värdet för alternativet Admin label. [GitHub-30073](https://github.com/magento/magento2/issues/30073)

### cron

<!-- MC-37712-->

* Systemmeddelandelistan återger nu produktuppdateringar korrekt efter `cron` har körts och programmet har uppdaterat produkter enligt schema.

<!-- ENGCOM-8164 -->

* Ett index baserat på `schedule_id` och `status` har lagts till i `cron_schedule` tabell. [GitHub-29601](https://github.com/magento/magento2/issues/29601)

### Anpassade kundattribut

<!-- MC-23545-->

* Programmet visar nu kundattribut av typen `file` på sidan Kontoinformation efter skapande. När du tidigare försökte spara ett nytt attribut av den här typen visades följande fel: `The "newAttribute" attribute value is empty. Set the attribute and try again` och `Validation is failed`.

<!-- MC-23544-->

* Programmet visar nu anpassade kundattributvärden för flera rader korrekt. Tidigare visades inte alla data.

<!-- MC-36978-->

* Programmet meddelar nu kunderna när de anger ett ogiltigt födelsedatum när de skapar ett konto. Tidigare ignorerade valideraren språkinställningarna och kunderna omdirigerades till sidan Skapa nytt kundkonto med ett ogiltigt datumfel.

<!-- MC-38846-->

* Anpassade adressattribut inkluderas nu som förväntat i betalningssteget i arbetsflödet för utcheckning.

<!-- MC-38114-->

* Attributen för att markera flera adresser visas nu korrekt vid utcheckning av gäster och på sidan Admin- och Min kontoorderinformation.

<!-- MC-37101-->

* Nu kan du ta bort en inledande nolla i ett anpassat kundattribut när `Input Type` är inställd på `Text` och `Input Validation` är inställd på `Numeric Only`.

<!-- MC-36721-->

* Programmet exporterar nu kunddata som innehåller ett anpassat könsattributvärde.

### Kund

<!-- MC-35771-->

* Kalenderwidgeten för butikskundkontosidans födelsedatum använder nu det angivna butiksspråket.

<!-- MC-38498-->

* Programmet sparar inte längre dubbletter av en kundadress när en befintlig kund checkas ut från administratören.

<!-- MC-37393-->

* Om du tar bort alla adresser från flera kunder från Admin tas nu alla adresser bort från kundadresslistan och standardadresserna för fakturering och leverans tas bort. Tidigare togs adressen bort från kundadresslistan, men standardadresserna för fakturering och leverans togs inte bort.

<!-- MC-37377-->

* På fliken Admin - kundadress visas nu adressantal korrekt efter att en administratör har utfört en massborttagning av adresser. Tidigare innehöll programmet borttagna adresser i antalet.

<!-- MC-36718-->

* DateTime-formatet för **Födelsedatum** på kundregistreringssidan har korrigerats. Tidigare saknades den inledande nolla som föregått en ensiffrig dag.

<!-- MC-36024-->

* Validering av datumformat för **Födelsedatum** fältet fungerar nu innan kunden klickar på **Skapa ett konto** -knappen. Tidigare kunde en kund ange ett värde i ett ogiltigt format och när de klickade på **Skapa ett konto** har användaren omdirigerats till sidan Skapa nytt kundkonto med ett ogiltigt datumfel.

<!-- MC-33867-->

* Programmet genererar inte längre ett allvarligt fel när en administratör försöker spara ett nytt kundkonto som innehåller ogiltiga data för ett attribut.

<!-- MC-36258-->

* Programmet genererar inte längre ett 400-fel när en kund försöker få åtkomst till sin kundvagn i en distribution där Magento Shipping tidigare var installerat och Luma-standardtemat är distribuerat. Tidigare filtrerades inte avsnittsnamn som skapades av tidigare installerade/aktiverade moduler som inte stöddes av administratören innan begäranden skickades till servern, vilket genererade fel.

<!-- MC-35812-->

* Programmet visar nu ett meddelande som förväntat när en kund skapar ett gästkonto när **Bekräfta att e-post krävs** inställningen är aktiverad och `Magento\Customer\Controller\Account\CreatePost` har åsidosatts. Tidigare tillät programmet inte den här typen av anpassning av användarregistreringsprocessen, och under dessa omständigheter ansågs användarens e-postbekräftelsestatus vara slutförd, den nya användaren loggades in automatiskt och inget felmeddelande visades.

<!-- ENGCOM-8039 -->

* Programmet tilldelar nu en kund till rätt kundgrupp när kunden gör en beställning hos en kundgrupp som inte är standardkund i en butik där **Aktivera automatisk tilldelning till kundgrupp** är aktiverat. [GitHub-26976](https://github.com/magento/magento2/issues/26976)

<!-- MC-39783-->

* Rutnätet för administratörskunder är nu tillgängligt som förväntat när den icke-förvalda webbplatsen tas bort i en multisitedistribution när index anges till **Uppdatera efter schema**. Tidigare visades inte stödrastret och följande fel uppstod:  `[2020-12-09 11:31:54] report.CRITICAL: The website with id 2 that was requested wasn't found. Verify the website and try again. \{"exception":"[object] (Magento\\Framework\\Exception\\NoSuchEntityException(code: 0): The website with id 2 that was requested wasn't found. Verify the website and try again. at /var/www/html/magento24ee/vendor/magento/module-store/Model/WebsiteRepository.php:110)"}`

### dotdigital

* Felhanteringen har förbättrats när listor över program hämtas från Adobe Digital Engagement Cloud.

* Värdet som synkroniseras i kolumnen för butiksnamn under gästsynkronisering är nu lagringsvyns namn som förväntat. Tidigare ingick webbplatsens namn i den här kolumnen.

* En arraykontroll har lagts till före slingor över orderstatusautomatiseringar efter att en order har sparats.

* Löste problem med Composer-uppgraderingar som var resultatet av dotdigital-modulens beroende av `magento/module-authorization`.

### Nedladdningsbar

<!-- ENGCOM-7679 -->

* Programmet visar inte längre en nedladdningsbar produkt på fliken Mina nedladdningsprodukter när den beställning produkten tillhör delvis har återbetalats. [GitHub-28388](https://github.com/magento/magento2/issues/28388)

### EAV

<!-- MC-35934-->

* Anpassade attribut som använder `\Magento\Eav\Model\Entity\Attribute\Backend\ArrayBackend` Använd nu standardvärden om inget värde anges i nyttolasten när en produkt skapas av API-anrop.

### E-post

<!-- ENGCOM-7961 -->

* `\Magento\Config\Model\Config\Source\Email\Template::toOptionArray` genererar inte längre ett fel när `setPath()` anropas inte före `toOptionArray()`. [GitHub-29315](https://github.com/magento/magento2/issues/29315)

<!-- MC-36777-->

* Programmet konverterar nu oformaterad text korrekt till HTML när du klickar på **Returnera HTML-version** när du läser in en e-postmall.

<!-- MC-34803-->

* E-post som skickas till kunder som innehåller partiella fakturor innehåller nu korrekta artikeldelsummor. Tidigare var delsumman i det här e-postmeddelandet den totala beställda kvantiteten, inte den totala summan för den fakturerade kvantiteten.

<!-- MC-38337-->

* Programmet skickar nu e-postpåminnelser till alla relevanta kunder med giltiga e-postadresser. Tidigare slutade programmet skicka påminnelser via e-post till kunderna efter att en ogiltig adress hade påträffats.

<!-- ENGCOM-7517 -->

* Att skicka e-postmeddelanden i asynkront läge fungerar nu som väntat efter att en produkt har tagits bort från en katalog. Tidigare blockerades asynkron e-postsändning och felet visades i programmet:  `main.ERROR: Cron Job sales_send_order_invoice_emails has an error: Call to a member function getData() on null. Statistics: {"sum":0,"count":1,"realmem":0,"emalloc":0,"realmem_start":73400320,"emalloc_start":37177640} [] []main.CRITICAL: Error when running a cron job {"exception":"[object] (RuntimeException(code: 0): Error when running a cron job at /var/www/html/vendor/magento/module-cron/Observer/ProcessCronQueueObserver.php:327, Error(code: 0): Call to a member function getData() on null at /var/www/html/vendor/magento/module-catalog/Helper/Image.php:502)"} []`. [GitHub-26878](https://github.com/magento/magento2/issues/26878)

<!-- ENGCOM-8381 -->

* Programmet kopierar inte längre en kund via e-post med orderbekräftelsen när `sales_email/order_comment/enabled` är inaktiverat och `sales_email/order_comment/copy_method` är inställd på `bcc`. [GitHub-29915](https://github.com/magento/magento2/issues/29915)

### Ramverk

<!-- MC-24195-->

* Anpassade filtergrupper används nu korrekt vid kundsökning. Tidigare `afterSearch` funktionen gjorde inte OR-filter som förväntat. [GitHub-24576](https://github.com/magento/magento2/issues/24576)

<!-- MC-36942-->

* Bilder på en butiks hemsida återges nu korrekt. Tidigare var sidkällan HTML skadad eftersom de tre efterföljande snedstrecken i bildens base64-kod feltolkades som en kommentar.

<!-- MC-37369-->

* DatePicker fungerar nu korrekt vid filtrering av order i listan Admin Orders i butiker med den arabiska språkversionen (`ar_SA - Saudi Arabia`).

<!-- MC-38344-->

* DatePicker visar nu korrekt datum när en handlare har sparat en kundprisregel i en distribution. [GitHub-30382](https://github.com/magento/magento2/issues/30382)

<!-- MC-31085-->

* Programmet representerar nu arabiska tusentals grupperingssymboler och arabiska decimalavgränsare korrekt. Tidigare trimmades arabiska symboler. [GitHub-26676](https://github.com/magento/magento2/issues/26676)

<!-- MC-30631-->

* Programmet tar nu bort utgångna databassessioner från databasen `session` tabellen som förväntat.

### Allmänna korrigeringar

<!-- MC-38105-->

* Du kan nu konfigurera en intern sessionshanterare som skiljer sig från hanteraren som är definierad i `php.ini`. Tidigare `SessionManager` angav inte memcache som `save_handler`, men använde i stället filens `session_handler`. det här felet uppstod i programmet: `main.CRITICAL: Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 {"exception":"[object] (Exception(code: 0): Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in ../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 at ../vendor/magento/framework/App/ErrorHandler.php:61)"}`. [GitHub-24717](https://github.com/magento/magento2/issues/24717)

<!-- ENGCOM-8052 -->

* Följande förbättringar har gjorts i `LoginAsCustomer` moduler:

   * Ersatt `around` plugin med `after`

   * Redundant kod har tagits bort

   * Ersatt `(bool)->getValue()` med `isSetFlag`. [GitHub-29689](https://github.com/magento/magento2/issues/29689)

<!-- ENGCOM-8093 -->

* När alla kunddataavsnitt läses in med jokertecken (*) orsakar detta inte längre förfrågningar till `customer/section/load` att generera ett 400-fel. [GitHub-28154](https://github.com/magento/magento2/issues/28154)

<!-- ENGCOM-7994 -->

* Programmet skickar nu undantag som inträffar när en layout återges i produktionsläge till `var/report`. [GitHub-29606](https://github.com/magento/magento2/issues/29606)

<!-- MC-35058-->

* Merchants kan nu ta bort produkttilldelningar från kategorier som förväntat. Tidigare uppstod ett fel som liknar det här felet: `Could not save product "4" with position 0 to category 3`.

<!-- ENGCOM-7527 -->

* Programmet genererar nu ett undantag när en kund som inte finns begär en lösenordsåterställning. [GitHub-26288](https://github.com/magento/magento2/issues/26288)

<!-- MC-33687 ENGCOM-8497-->

* Programmet visar nu ett informativt felmeddelande när en administratör försöker spara ett kundkonto som innehåller ett ogiltigt värde för ett kundattribut när en fil som det här attributvärdet överförs. Tidigare uppstod ett allvarligt fel i programmet. [GitHub-30295](https://github.com/magento/magento2/issues/30295)

<!-- ENGCOM-8400 -->

* Programmet använder nu **Logotyp för HTML Print View** konfigurationsinställningen till att lagra fakturan PDF som förväntat. [GitHub-24730](https://github.com/magento/magento2/issues/24730)

<!-- ENGCOM-8425 -->

* `static::` har ersatts med `self::` i hela kodbasen för att komma åt privata konstanter. [GitHub-30781](https://github.com/magento/magento2/issues/30781)

<!-- ENGCOM-8395 -->

* Nu öppnas sidan Nytt attribut som förväntat när en handlare klickar på **Skapa nytt attribut** två gånger när produkten skapas. Tidigare visade programmet en tom sida och ett fel uppstod. [GitHub-30361](https://github.com/magento/magento2/issues/30361)

<!-- ENGCOM-8426 -->

* Programmet visar inte längre `The coupon code has been accepted` när en kupong har tagits bort. [GitHub-30255](https://github.com/magento/magento2/issues/30255)

<!-- ENGCOM-8396 -->

* Administratörer kan nu tilldela widgetar till specifika kategorier. [GitHub-30009](https://github.com/magento/magento2/issues/30009)

<!-- ENGCOM-8216 -->

* Attributväljare `input[type=datetime]` har ersatts med en mindre specifik indatatypsväljare. [GitHub-30064](https://github.com/magento/magento2/issues/30064)

<!-- ENGCOM-8282 -->

* Programmet visar nu butiksspecifika värden som är associerade med anpassade kategoriattribut som förväntat. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-8287 -->

* Programmet visar nu en fråga om huruvida kundgruppen ska ändras när du klickar på **Validera momsregistreringsnummer** på orderskapandesidan när butikens adress och leveransadress tillhör olika EU-länder. [GitHub-29652](https://github.com/magento/magento2/issues/29652)

<!-- ENGCOM-8031 -->

* The `\Magento\Catalog\Model\ImageUploader` klassen har omarbetats för att använda den nya `moveFileFromTmp` -metod. [GitHub-29598](https://github.com/magento/magento2/issues/29598)

<!-- ENGCOM-8178 -->

* Programmet visar nu ett mer informativt felmeddelande när en handlare försöker skapa ett produktattribut med `product_type` och `type_id` koder som ska vara mer beskrivande. [GitHub-28479](https://github.com/magento/magento2/issues/28479)

<!-- ENGCOM-8135 -->

* Korrigerad valideringslogik för **Livstid för kundtoken (timmar)**  och **Löptid för Admin Token (timmar)** fält i administratören **Lager**  >  **Konfigurationer** >  **Tjänster**  > **OAuth** sida. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-8132 -->

* Programmet tolkar nu text som innehåller `}}` i widgetinnehållsfältet. [GitHub-12087](https://github.com/magento/magento2/issues/12087)

<!-- ENGCOM-8098 -->

* Du kan nu ta bort ett filter från sidan Produktkategorier. När du tidigare försökte ta bort filtret kunde du inte ta bort filtret och följande fel visades:  `Something went wrong`. [GitHub-8538](https://github.com/magento/magento2/issues/8538)

<!-- ENGCOM-8050 -->

* `Magento\Framework\MessageQueue\ConfigInterface` kan nu instansieras när en valfri modul `Magento_MessageQueue` är inaktiverat. Tidigare uppstod följande fel i programmet: `PHP Fatal error:  Uncaught Error: Cannot instantiate interface Magento\Framework\MessageQueue\ConfigInterface in /var/www/magento2/magento2/lib/internal/Magento/Framework/ObjectManager/Factory/AbstractFactory.php:121`. [GitHub-26080](https://github.com/magento/magento2/issues/26080)

<!-- ENGCOM-7312 -->

* Logiken som avgör när programmet kan hämta e-postvärde från beständig lagring har förbättrats. Tidigare visades ifyllda lösenordsfält på utcheckningssidan när en oregistrerad användare återvände till utcheckningssidan efter att först ha fyllt i e-postfältet. [GitHub-26903](https://github.com/magento/magento2/issues/26903)

<!-- ENGCOM-7777 -->

* Saknas `aclResource` attribut har lagts till i administratörshuvudet `AdminNotification` verktygsfältsblock. Tidigare var posten i verktygsfältet för administratörsmeddelanden synlig även när administratörsanvändaren inte har behörighet att visa rollresurser. [GitHub-29067](https://github.com/magento/magento2/issues/29067)

<!-- ENGCOM-8022 -->

* The `framework/database/select` `where` funktioner nu, hantera `type` korrekt. [GitHub-29590](https://github.com/magento/magento2/issues/29590)

<!-- ENGCOM-8260 -->

* Ineffektiv användning av `array_merge` in-slingor har förbättrats genom hela kodbasen, vilket har förbättrat prestandan på flera ställen, bland annat i processen för statisk innehållsdistribution. [GitHub-30183](https://github.com/magento/magento2/issues/30183)

<!-- ENGCOM-8445 -->

* Administratörssessionens standardlivstid har flyttats från krypteringsmodulen till säkerhetsmodulen. [GitHub-30859](https://github.com/magento/magento2/issues/30859)

<!-- ENGCOM-8425 -->

* Programmet söker nu efter privata konstanter i en klass och visar en varning om det finns några `static::` ringer dem. Tidigare uppstod följande fel i programmet: `Undefined class constant`.

<!-- ENGCOM-8326 -->

* Stöd för länkade symboler har lagts till `root` i felsidor och underhållsläge. Tidigare, om `root` eller `magento/pub` var länkade till en annan katalog, felbearbetaren (`Magento\Framework\Error\Processor`) genererade inte en korrekt URL för visningsfil. [GitHub-30296](https://github.com/magento/magento2/issues/30296)

<!-- ENGCOM-8087 -->

* Tillagd saknas `order_data` matris till `EmailSender` -klasser. Detta gör att dessa klasser anpassas till Magento rekommendation om att använda skalära variabler i stället för objekt i e-postmallarna. [GitHub-29604](https://github.com/magento/magento2/issues/29604)

### GraphQL

<!-- MC-37615-->

* GraphQL URL-lösare hanterar nu frågeparametrar korrekt. Tidigare returnerades NULL vid hantering av SEO-anpassade URL:er med parametrar.

<!-- ENGCOM-8422 -->

* GraphQL URL-lösare hanterar nu CMS-sidhierarkin korrekt. Tidigare returnerades NULL. [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209-->

* Frågor för en produkts `categories.breadcrumbs` data returnerar inte längre synliga data för kategorier vars överordnade kategori är inaktiverad. [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* Sökvägen till en kategoribild returneras nu korrekt när URL-omskrivning är inaktiverat.

<!-- MC-36648-->

* Programmet returnerar nu ett mer informativt meddelande när ett fel inträffar under en GraphQL-lösenordsåterställning. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078-->

* Produktpositionerna uppdateras nu som förväntat i GraphQL-frågeresultat när frågeresultaten cachelagras.

<!-- MC-35355-->

* The `products` frågan returnerar nu det förväntade resultatet när `category_id`  filter anges med `in` nyckelord. [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8219 -->

* Lagt till regler i `editorconfig` som har stöd för indrag av JSON- och YAML-filer på två blanksteg. [GitHub-30066](https://github.com/magento/magento2/issues/30066), [GitHub-30063](https://github.com/magento/magento2/issues/30063)

<!-- ENGCOM-8079 -->

* The `FlushCacheByTags` har uppdaterats för att använda plugin-program i stället för runt plugin-program. [GitHub-29558](https://github.com/magento/magento2/issues/29558)

<!-- ENGCOM-8370 -->

* Kod i `checkout_index_index.xml` filen har förbättrats genom att `sortOrder` från `messages`, `authentication`, `progressBar`, `estimation`och `sidebar checkout` -komponenter. [GitHub-30550](https://github.com/magento/magento2/issues/30550)

<!-- ENGCOM-8379 -->

* Innehåll i `calc` har nu escape-konverterats, vilket ger korrekt resultat `calc` värden i CSS-utdatafilen. Tidigare returnerade programmet ett felaktigt `calc` värde. [GitHub-30542](https://github.com/magento/magento2/issues/30542)

<!-- ENGCOM-8030 -->

* Generatorn för URL-omskrivning anger nu kategoriobjektet `url_key`, `url_path`och  `store_id` till standardvärden för lagring när kategori-URL sparas för det globala omfånget. Tidigare sparades den `url_key`, `url_path`och `store_id` med värdena för det senast bearbetade lagrings-ID:t. [GitHub-29585](https://github.com/magento/magento2/issues/29585)### Grupperade produkter

<!-- MC-35361-->

* Produktfrågan returnerar nu alla förväntade data för grupperade produkter. Tidigare `product_links` var en tom array.

<!-- MC-37718-->

* En grupperad produkt visas nu som ej lagrad på produktredigeringssidan när alla underordnade enkla produkter inte är lagrade.

<!-- MC-37249-->

* Statusen för en grupperad produkt uppdateras nu korrekt på produktredigeringssidan när statusen för dess underordnade enkla produkter ändras till Ej lagrade. Tidigare uppdaterades inte lagerlagerartikeln för den överordnade produkten för den grupperade produkten efter att dess underordnade lagerstatus ändrades.

<!-- ENGCOM-8250 -->

* `\Magento\Widget\Controller\Adminhtml\Widget\Instance\Validate` tolkar nu ett frasresultatvärde som ett felmeddelande och skickar det till användaren under widgetvalideringen. [GitHub-27397](https://github.com/magento/magento2/issues/27397)

<!-- ENGCOM-8311 -->

* Den hårdkodade listan med kategoriattribut i  `Magento\Catalog\Model\Category\DataProvider::getFieldsMap()` har ersatts med en lista över attribut som genereras från cache. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-7759 -->

* Överflödig hash med `req.http.host/client.ip` har tagits bort och hashning hanteras av den inbyggda VCL:en för lack. [GitHub-29988](https://github.com/magento/magento2/issues/29988)

<!-- ENGCOM-8302 -->

* Ett felanrop har lagts till i `Magento_Ui` filöverföring. [GitHub-29557](https://github.com/magento/magento2/issues/29557)

<!-- ENGCOM-8405 -->

* An `acl.xml` inkonsekvens som inträffade när `Magento_LoginAsCustomerAssistance` aktiverades men `Magento_LoginAsCustomerAdminUi` eller `Magento_LoginAsCustomerLog` har inaktiverats. Tidigare när en administratör med dessa autentiseringsuppgifter försökte logga in på Admin visade programmet en tom sida och detta fel uppstod när:  `Exception #0 (LogicException): Could not create an acl object: Invalid Document Element 'resource': The attribute 'title' is required but missing. Line: 13`. [GitHub-30680](https://github.com/magento/magento2/issues/30680)

<!-- ENGCOM-8157 -->

* Programmet genererar inte längre en `Undefined class constant` fel när `Interceptor` genereras när plugin-program skapas. [GitHub-28981](https://github.com/magento/magento2/issues/28981), [GitHub-29879](https://github.com/magento/magento2/issues/29879)

<!-- ENGCOM-8108 -->

* Programmet hanterar nu meddelanden och loggning korrekt för asynkrona gruppåtgärder. Tidigare uppdaterades produkterna `magento_operation` och `queue_message_status` tabeller uppdaterades inte korrekt och systemmeddelanden var felaktiga. [GitHub-29718](https://github.com/magento/magento2/issues/29718)

<!-- ENGCOM-8388 -->

* En kund omdirigeras nu till sidan Ange ett nytt lösenord när han/hon klickar **Ange ett nytt lösenord** i e-postmeddelandet Återställ lösenord när **Bekräfta att e-post krävs** har aktiverats för butiken. Tidigare omdirigerades shopparen tillbaka till **Har glömt lösenordet** på inloggningssidan. [GitHub-27954](https://github.com/magento/magento2/issues/27954)

<!-- ENGCOM-8337 -->

* Matrisen har korrigerats till strängkonverteringsfel när radsystemskonfigurationen sparades med standardvärden. [GitHub-30314](https://github.com/magento/magento2/issues/30314)

<!-- ENGCOM-8440 -->

* Du kan nu ange argument för meddelandeköer. [GitHub-30216](https://github.com/magento/magento2/issues/30216)

<!-- ENGCOM-8384 -->

* Basfilsinsamlaren respekterar nu `AppState->emulateAreaCode()`. [GitHub-39656](https://github.com/magento/magento2/issues/29656)

<!-- ENGCOM-8441 -->

* Den nya `BlockByIdentifier` -klassen stöder hämtning av ett layoutblock baserat på CMS-blockidentifierare. När ett CMS-block tas bort från cachen rensas därför även layoutblockcachen. [GitHub-28309](https://github.com/magento/magento2/issues/28309)

<!-- ENGCOM-8385 -->

* Korrigerade problem med konvertering av numeriska argument i köer. Tidigare när du deklarerade en kö med numeriskt `type` argument i `queue_topology.xml`, konverterades argumentvärdet till en sträng. [GitHub-29615](https://github.com/magento/magento2/issues/29615)

### GraphQL

<!-- MC-37615-->

* The `urlResolver` frågan hanterar nu frågeparametrar korrekt.

<!-- ENGCOM-8422 -->

* The `urlResolver` frågan returnerar inte längre NULL när en anpassad CMS-nod och -sida anges som indata. [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209 ENGCOM-8386-->

* The `category` frågan returnerar inte längre underordnade kategorier för en överordnad kategori som har inaktiverats. [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* The `category` frågan returnerar nu rätt sökväg för en kategoribild när URL-omskrivning är inaktiverat.

<!-- MC-36648 8321-->

* The `resetPassword` mutation returnerar nu ett mer informativt meddelande när ett fel inträffar. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078 ENGCOM-8504-->

* Cachelagrade resultat för `products` frågan ogiltigförklaras som förväntat när produktpositionerna ändras. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- MC-35355 ENGCOM-8404-->

* The `products` frågan returnerar nu det förväntade resultatet när `category_id` filter anges med `in` nyckelord. [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8373 -->

* The `categories` och `categoryList` Frågor tar nu hänsyn till kategoritillgänglighet baserat på kategoribehörighetskonfiguration och överordnat kategori-ID. [GitHub-29880](https://github.com/magento/magento2/issues/29880), [GitHub-30624](https://github.com/magento/magento2/issues/30624)

<!-- MC-37603-->

* The `updateProductsInWishList` mutation validerar nu önskelisteobjekt korrekt. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- ENGCOM-8430 PWA-1107-->

* Borttagna flera attribut i `ProductInterface` och `CategoryInterface` för att förhindra att de används i butiken. [GitHub-30625](https://github.com/magento/magento2/issues/30625)

* Priserna är nu dolda för produktfrågeresultat när kategoribehörigheterna är inställda på att dölja dem. [GitHub-29926](https://github.com/magento/magento2/issues/29926)

<!-- MC-36898 PWA-1299-->

* Nu kan du använda `addProductsToWishList` mutation för att lägga till en paketprodukt med en användardefinierad kvantitet i en önskelista.

<!-- MC-36946 -->

* GraphQL svarstid för kundvagnstillägg har förbättrats.

<!-- ENGCOM-8099 -->

* The `products` frågan returnerar nu nivåprisvärden som förväntat. [GitHub-29168](https://github.com/magento/magento2/issues/29168)

<!-- ENGCOM-7528 -->

* En redundant har tagits bort `getMappedNums` från en slinga in `lib/internal/Magento/Framework/GraphQl/Query/EnumLookup.php`. [GitHub-30031](https://github.com/magento/magento2/issues/30031)

<!-- ENGCOM-8172 -->

* The `products` frågan returnerar inte längre ett fel när den frågade produkten har en inaktiverad relaterad produkt. [GitHub-28892](https://github.com/magento/magento2/issues/28892)

<!-- MC-37395 -->

* The `cart` frågan returnerar nu priser som har konverterats till rätt valuta (standardvisningsvalutan). Tidigare returnerade frågan artikelprisvärdet i basvalutan och valutakoden returnerades som standardvisningsvaluta.

<!-- MC-37388-->

* GraphQL respekterar nu katalogbehörigheter. Programmet begränsar vilka objekt som returneras för en `products` fråga baserat på kundens kundgrupp.

<!-- MC-39690-->

* Lagt till `customizable_option` attribut till flera datatyper som implementerar `CartItemInterface`.

<!-- MC-39744-->

* Lagt till attribut för `storeConfig` fråga för att returnera information om butik, butiksgrupp och webbplats.

<!-- MC-37414-->

* Återställt `SelectedCustomizableOption.type` -attribut. Dessutom är `customizable_options` i olika implementeringar av `CartItemInterface` är nu inte null.

<!-- MC-23860-->

* Sökfunktionerna i `products` frågan returnerar inte längre objekt där kategoribehörigheter har aktiverats.

<!-- MC-37726-->

* The `products` frågan returnerar rätt valuta för butiksvyer som har flera valutor.

<!-- MC-37727-->

* Etiketter för `products` frågefilter returnerar nu översatta värden, om sådana används för icke-standardbutiksvyer.

<!-- MC-37728-->

* Valutabelopp för fast butik på presentkort i kundvagnen.

<!-- MC-38443-->

* Lagt till `ConfigurableProductOptionsSelection` datatyp, som innehåller metadata som motsvarar de konfigureringsbara alternativen som kan väljas för en produkt. Använd objektet i en `products` -fråga för att minimera antalet mediegalleriobjekt som visas när kunden väljer konfigurerbara produktalternativ.

### Bilder

<!-- MC-36942-->

* Bilder på en butiks hemsida återges nu korrekt. Tidigare var sidkällan HTML skadad eftersom de tre efterföljande snedstrecken i bildens base64-kod feltolkades som en kommentar.

<!-- ENGCOM-8116 -->

* Beroendet av `fileinfo` tillägget har tagits bort från CMS-modulen. Tidigare inträffade ett fel i programmet när du försökte överföra en bild med hjälp av bildöverföringen, som startas när du klickar på **Infoga bild** när du lägger till innehåll. [GitHub-24332](https://github.com/magento/magento2/issues/24332), [GitHub-16531](https://github.com/magento/magento2/issues/16531), [GitHub-29852](https://github.com/magento/magento2/issues/29852)

<!-- ENGCOM-8020 -->

* Stöd för läsning har lagts till `exif_image.png` eller `exif-image.jpeg` metadata. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8296 -->

* Färgerna i CMYK-bilder återges nu korrekt. När bildskärmskortet nu upptäcker att en öppnad bild har en CMYK-färgrymd, konverteras färgrymden till SRGB. Tidigare återgavs bilderna med inverterade färger. [GitHub-22375](https://github.com/magento/magento2/issues/22375)

<!-- ENGCOM-8251 -->

* Booleska värden är inte längre inställda för `image_with_border.phtml`. Redundant `max-width` och `height` inställningarna har tagits bort från `.product-image-photo`. (Dessa värden anges redan globalt i bilden med hjälp av de återställda stilarna.) [GitHub-30186](https://github.com/magento/magento2/issues/30186)

### Importera/exportera

<!-- MC-35081-->

* Kundadress `region_id` är inte längre tilldelad en `NULL` när du importerar kundadresser med hjälp av en CSV-fil (`entity type = "customer address"` och `import behavior = "add/update"`) som vissa fältvärden har tagits bort från.

<!-- MC-35295-->

* Du kan nu dölja produktbilder i butiken under importen.

<!-- MC-35836-->

* När en importerad produkt har `qty` anges till 0 men `is_in_stock set` till 1 i CSV-filen, produkten finns inte med på kategorisidan och produktinformationssidan identifierar den som ej lagrad. Tidigare var produkter med dessa värden synliga på butiken efter importen.

<!-- MC-38433-->

* CSV-import ignorerar inte längre `dropdown` och `textarea` värden för ytterligare attribut. Tidigare uppdaterades inte dessa attributvärden under importen.

<!-- MC-37933-->

* Produktexportens CSV-fil visas nu i administratörslistan för att exportera CSV-filer som förväntat. Tidigare uppstod ett fel i programmet när det här kommandot kördes: `bin/magento queue:consumers:start exportProcessor --single-thread --max-messages=10000`.

<!-- MC-37672-->

* Programmet genererar inte längre något fel vid import av CSV-data som innehåller bengaliska (bangla) alfabet.

<!-- MC-36410-->

* Programmet visar nu ett informativt felmeddelande när en administratör klickar på **Kontrollera data** vid import av en fil som har ändrats sedan exporten när du arbetade i Chrome. Tidigare visade programmet ett konsolfel men berättade inte för användaren hur man skulle gå vidare.

<!-- ENGCOM-8252 -->

* Programmet duplicerar inte längre produktbilder när du importerar samma produkt-CSV-data mer än en gång. [GitHub-21885](https://github.com/magento/magento2/issues/21885)

<!-- ENGCOM-8262 -->

* Gränsen på 90 tecken för bildfilnamn i `vendor/magento/framework/File/Uploader.php` har tagits bort.  Tidigare kunde inte katalog- och filnamnslängden överstiga 255 tecken. Programmet importerade produkter med bilder vars filnamn överskred den här gränsen, men inte bildfilen. [GitHub-29377](https://github.com/magento/magento2/issues/29377)

<!-- ENGCOM-8153 -->

* Kupongkoder kan nu exporteras till CSV eller XML. Tidigare visade programmet ett 404-fel när du klickade **Exportera CSV** eller **Exportera XML** när du försökte exportera kuponger. [GitHub-29277](https://github.com/magento/magento2/issues/29277)

<!-- ENGCOM-8252 -->

* Duplicerade produktbilder tas nu bort efter import av en CSV-fil som innehåller bilder. [GitHub-14398](https://github.com/magento/magento2/issues/14398), [GitHub-21885](https://github.com/magento/magento2/issues/21885)

### Index

<!-- MC-38003-->

* Vi har förbättrat prestandan för partiell indexerare. Programmet rensar nu cache-ID:n som ändrats för varje batchiteration på 1000 ID. Cachekontext ackumulerar inte längre ID:n. Tidigare samlade cachekontext in-ID:n för varje batchiteration på 1 000 ID och rensade samma uppsättning ID:n för varje iteration.

<!-- ENGCOM-7929 -->

* Inkonsekvenser mellan det partiella omindexeringssystemet och det fullständiga omindexeringssystemet har korrigerats. Båda indexeringssystemen använder nu samma kod, vilket fungerar korrekt. Tidigare använde båda indexeringssystemen olika logik för de delade indexerarna, vilket eventuellt gjorde att indexerare ogiltigförklarades efter varje körning av det partiella indexeringssystemet. [GitHub-29478](https://github.com/magento/magento2/issues/29478), [GitHub-29297](https://github.com/magento/magento2/issues/29297)

<!-- MC-38168-->

* Vi har löst problem med den manuella indexeraren som antingen resulterat i tomma kategorisidor eller minskat produktantal på kategorisidor. Problem med ofullständiga kategorisidor eller produktantal uppstod när:

   * den `catalogsearch_fulltext` och `catalog_product_price` partiella indexerare utfördes på en stor katalog tills dessa indexerare slutförde körningen.

   * den partiella indexeraren kördes på antingen `catalog_category_product` eller `catalog_product_category` index, och samtidigt utfördes ett fullständigt omindexvärde på ett av dessa index. Dessa två indexeringsprocesser kan skapa konflikter, vilket kan leda till att produkter saknas på kategorisidor.

   * `bin/magento indexer:reindex inventory` kördes på en stor katalog. Produkterna saknades på kategorisidorna fram till `catalogsearch_fulltext` partiell indexerare har slutförts.

<!-- MC-39700-->

* En indexerare har lagts till i `Magento_Bulk` MySQL-tabell, som har förbättrat prestanda för gruppåtgärder.

<!-- MC-38806-->

* Kommentarer i databastabeller återspeglar nu korrekt tabellstatus efter omindexering (`bin/magento indexer:reindex`). Tidigare innehöll tabellkommentarer efter omindexering samma värden som kommentarerna efter en ny installation.

<!-- ENGCOM-7542 -->

* The `SELECT entity_id IN` programsatsen har förbättrats i distributioner som implementerar MariaDB v.10.3.18, vilket har förbättrat prestanda för katalogkategoriindexering. [GitHub-25199](https://github.com/magento/magento2/issues/25199)

<!-- ENGCOM-8237 -->

* Magento Open Source har förbättrat cacheprestanda genom att eliminera tömning av taggar flera gånger per indexerarinstans. [GitHub-29890](https://github.com/magento/magento2/issues/29890)

### Infrastruktur

<!-- MC-34353-->

* Nu kan du använda `app/etc/env.php` om du vill ändra meddelandehanteraren från MYSQL till AMQP.

<!-- MC-38242-->

* Problem med beräkningen av resterande decimalvärden för produktkvantiteter har korrigerats i det relevanta JavaScript-biblioteket. Programmet har tidigare beräknat decimalbråktal med fler än två siffror felaktigt och visade därefter ett felaktigt meddelande.

<!-- MC-38993 ENGCOM-8473-->

* The `\Magento\Authorization\Model\Rules::update` -metoden har tagits bort.  [GitHub-29128](https://github.com/magento/magento2/issues/29128)

<!-- ENGCOM-8000 -->

* Programmet genererar inte längre ett allvarligt fel när ett datumobjekt konverteras från UTC. Under vissa omständigheter har `convertConfigTimeToUtc` metoden genererade ett undantag. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7987 -->

* `DataObject` har ersatts med produktmodellen i `\Magento\MediaGalleryCatalogUi\Ui\Component\Listing\Columns\Thumbnail::prepareDataSource`.[GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- ENGCOM-7914 -->

* The `RequireJS` lösaren kan inte längre identifiera blockerade resurser. Tidigare kunde matcharen inte identifiera om alla resurser på en sida lästes in eller hanterades korrekt och sidan fortsatte att läsas in. [GitHub-28116](https://github.com/magento/magento2/issues/28116)

<!-- ENGCOM-8229 -->

* Validering av attributdatabaskod respekterar nu `Magento\Eav\Model\Entity\Attribute::ATTRIBUTE_CODE_MAX_LENGTH` i stället för ett hårdkodat värde. [GitHub-29017](https://github.com/magento/magento2/issues/29017)

<!-- MC-35699-->

* Minification i HTML tar inte längre bort trippelsnedstreck (//) från HTML-strängar i PHTML-filer. Tidigare tolkades trippelsnedstreck som kommentarer under miniatyrbildningen och resten av raden togs bort helt i den genererade PHTML-filen vid distributionen.

<!-- MC-38201-->

* Merchants kan nu konfigurera indexerarprenumerationer på tabellkolumnnivå i stället för på tabellnivå. Ett nytt argument har lagts till i `\Magento\Framework\Mview\View\Subscription` om du vill tillåta att kolumner ignoreras för en viss vy eller tabellkombination. [GitHub-30243](https://github.com/magento/magento2/issues/30243)

<!-- MC-30171-->

* Klicka på **Lägg i kundvagnen** innan produktsidan JavaScript har initierats fullständigt resulterar inte längre i dubbletter `form_key` värden. Tidigare kunde en produkt läggas till i varukorgen med en cachelagrad `form_key` värde som utlöste ett undantag. När **Lägg i kundvagnen** klickades innan JavaScript hade initierats fullständigt och sedan `form_key` värdet som skickades i formulärdata matchade inte användarsessionen och produkten lades inte till i kundvagnen. [GitHub-13746](https://github.com/magento/magento2/issues/13746)

<!-- ENGCOM-8107 -->

* Den aktuella cURL-klienten respekterar nu skiftlägesokänsliga rubriknamn. Tidigare `Set-Cookie` jämförelsen var skiftlägeskänslig, vilket kan orsaka problem med vissa HTTP-servrar. [GitHub-29524](https://github.com/magento/magento2/issues/29524)

<!-- ENGCOM-8360 -->

* Uppdaterat XSD URN-format i `api-functional` och testa fallets XML-filer. [GitHub-30552](https://github.com/magento/magento2/issues/30552)

<!-- ENGCOM-8295 -->

* Ett händelseprefix och händelseobjekt har lagts till i värdesmängden för katalogproduktsalternativ för att förbättra anpassningen av insamlingsinläsningen av `\Magento\Catalog\Model\ResourceModel\Product\Option\Value\Collection`. [GitHub-29621](https://github.com/magento/magento2/issues/29621)

<!-- ENGCOM-8261 -->

* Alla förekomster av `array_merge` har omarbetats för att använda det format som rekommenderas i kodningsstandarden. [GitHub-30005](https://github.com/magento/magento2/issues/30005)

<!-- ENGCOM-7718 -->

* A `head.additional` block av typ `\Magento\Framework\View\Element\Text\ListText` har lagts till i `adminhtml` `default` layout (efter `magento2/module-base`). [GitHub-29165](https://github.com/magento/magento2/issues/29165)

<!-- ENGCOM-8312 -->

* En URL-metod som saknas har lagts till i layoutmallens widget. [GitHub-30036](https://github.com/magento/magento2/issues/30036)

<!-- ENGCOM-8127 -->

* The `\Magento\Framework\Filesystem\Io\File::read()` metoden är nu kompatibel med `\Magento\Framework\Filesystem\Io\IoInterface::read()`. [GitHub-27866](https://github.com/magento/magento2/issues/27866)

### Klarna

* Tog bort beroendet av PayPal-modulen. [GitHub-29421](https://github.com/magento/magento2/issues/29421)

### Loggning

<!-- ENGCOM-8443 -->

* The `Magento_Logging` nya värden samt tidigare värden registreras nu korrekt i modulen. Tidigare visade värdena i kolumnen Värde före ändring värden för Ej tillämpligt oavsett om det var den första ändringen eller nästa, eller när standardvärdet returnerades. [GitHub-26943](https://github.com/magento/magento2/issues/26943)

### Mediegalleri

<!-- ENGCOM-8014 -->

* Administratören **Lager**  >  **Konfiguration**  >  **Avancerat**  >  **System** sidan har uppdaterats för att visa rätt produktnamn (Media Gallery). Mindre omformningar av användargränssnittet har inkluderats. [GitHub-1738](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-8019 -->

* Länkarna i avsnittet Används i bildbeskrivningarna i Mediegalleriet visar nu ett rutnät som har filtrerats efter den valda bilden som förväntat. Tidigare hade det visade rutnätet inte rätt namn och listposterna var inte korrekta. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019 -->

* Nu kan du redigera flera bilder i Mediegalleriet. Tidigare kunde du inte lägga till taggar i en andra bild efter att du lagt till taggar i en bild. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015 -->

* Listrutan Taggar är nu tom som väntat när du har tagit bort taggar från en bild i Mediegalleriet.  [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

<!-- ENGCOM-8146 -->

* Batchbearbetning för kömeddelanden i synkroniseringskön för mediegalleriet stöds nu. [GitHub-1724](https://github.com/magento/adobe-stock-integration/issues/1724)

<!-- ENGCOM-8064 -->

* Programmet visar nu en 404-sida som förväntat när du försöker öppna mediegalleriet när **Förbättrat mediegalleri** är inaktiverat. [GitHub-1760](https://github.com/magento/adobe-stock-integration/issues/1760)

<!-- ENGCOM-8072 -->

* `MediaGalleryMetadata` hoppar över segmentläsaren om ett undantag inträffar och tolkar istället bildens metadata som förväntat. Tidigare var bildens metadata tomma på grund av ett undantag från `exif_read_data` segmentläsare. [GitHub-1782](https://github.com/magento/adobe-stock-integration/issues/1782)

<!-- ENGCOM-8069 -->

* Längden på mappnamnet förhindrar inte längre att en bild överförs till mediegalleriet. I Mediegalleriet anges nu sökvägskolumnen som typ `text`. [GitHub-1778](https://github.com/magento/adobe-stock-integration/issues/1778)

<!-- ENGCOM-8217 -->

* Bilduppladdaren visar nu rätt bildstorlek när en återgivning infogas från Mediegalleriet. [GitHub-1806](https://github.com/magento/adobe-stock-integration/issues/1806)

<!-- ENGCOM-8467 -->

* Verifiering av sökväg har lagts till i `Mediagallery` uploader plug-in. Tidigare misslyckades valideringen och programmet importerade inte produkter när **Aktivera gammalt mediegalleri** har inaktiverats. [GitHub-30649](https://github.com/magento/magento2/issues/30649)

<!-- ENGCOM-8057 -->

* `Magento_Cms::media_gallery` ACL-underresurser har lagts till och verkställts för det nya mediegalleriet för att ge stöd åt konfigurerade behörigheter för följande diskreta åtgärder:

   * Överför resurser
   * Infoga resurser i innehåll
   * Ta bort resurser
   * Skapa mappar
   * Ta bort mappar. [GitHub-1487](https://github.com/magento/adobe-stock-integration/issues/1487)

<!-- ENGCOM-8047 -->

* Textsträngar och mappnamn för långa mediegallerier beskärs inte längre. Tidigare visade programmet beskuren text och bilder och det här meddelandet:  `We couldn't find any records`. [GitHub-1763](https://github.com/magento/adobe-stock-integration/issues/1763), [GitHub-1758](https://github.com/magento/adobe-stock-integration/issues/1758)

<!-- ENGCOM-8042 -->

* Programmet visar inte längre **Lägg till markerade** när inga bilder är markerade när du redigerar innehåll för en ny sida. [GitHub-1769](https://github.com/magento/adobe-stock-integration/issues/1769)

<!-- ENGCOM-8047 -->

* Filter används nu som förväntat på **Innehåll**  >  **Mediegalleri** Kategorirutnät. [GitHub-1763](https://github.com/magento/adobe-stock-integration/issues/1763)

<!-- ENGCOM-8183 -->

* Konfigurationen av alternativ för gallerimultipliceringsbrytpunkter fungerar nu som förväntat. Konfiguration av brytpunktsalternativ fungerade inte korrekt eftersom `mediaCheck` aktiverade funktionen för att avsluta mediefråga vid sidinläsning. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### MFTF

<!-- ENGCOM-8359 -->

* Ersatte repetitiva åtgärder med åtgärdsgrupper i `CheckStaticBlocksTest`. [GitHub-30561](https://github.com/magento/magento2/issues/30561)

<!-- ENGCOM-8267 -->

* `AdminUpdateCategoryAndMakeInactiveTest` och `VerifyChildCategoriesShouldNotIncludeInMenuTest` har omarbetats för att följa bästa praxis för MFTF. [GitHub-30058](https://github.com/magento/magento2/issues/30058)

<!-- ENGCOM-8458 -->

* Borttagen dubblett `AdminOpenCMSBlocksGridActionGroup`. [GitHub-30896](https://github.com/magento/magento2/issues/30896)

<!-- ENGCOM-8156 -->

* Ersatt `AdminOpentCmsBlockActionGroup` med AdminOpenCmsBlockActionGroup. [GitHub-29839](https://github.com/magento/magento2/issues/29839)

<!-- ENGCOM-8226 -->

* Föråldrat `GoToAttributeGridPageActionGroup`. [GitHub-30103](https://github.com/magento/magento2/issues/30103)

<!-- ENGCOM-8061 -->

* Lagt till åtgärdsgrupper i `Analytics` -modul. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-7334 -->

* Uppdaterat `CheckCheckoutSuccessPageAsRegisterCustomerTest` och `CheckCheckoutSuccessPageAsGuestTest` om du vill avbryta skapade order efter att testerna har körts. [GitHub-28324](https://github.com/magento/magento2/issues/28324)

<!-- ENGCOM-8214 -->

* Borttagen `AdminNavigateToPageGridActionGroup` på grund av redundans. [GitHub-29838](https://github.com/magento/magento2/issues/29838)

<!-- ENGCOM-8122 -->

* Implementerat `ActionGroup` för att navigera till utcheckningssidan. [GitHub-29843](https://github.com/magento/magento2/issues/29843)

<!-- ENGCOM-8124 -->

* Implementerat `AdminOpenCreateNewCMSPageActionGroup` för att navigera till den nya CMS-sidan. [GitHub-29824](https://github.com/magento/magento2/issues/29824)

<!-- ENGCOM-8268 -->

* Korrigerade problem med hoppet i MFTF-tester för CMS-sidan för Media Gallery. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

#### Nya tester

<!-- ENGCOM-7804 -->

* Ett test för att aktivera e-post för en vän i administratören har lagts till. [GitHub-29145](https://github.com/magento/magento2/issues/29145)

<!-- ENGCOM-8316 -->

* Ett test för att ta bort ett CMS-block från ett rutnät har lagts till av en administratör. [GitHub-30372](https://github.com/magento/magento2/issues/30372)

<!-- ENGCOM-7933 -->

* Ett test för att tillämpa en kundvagnsregel på en enskild paketartikel har lagts till. [GitHub-28921](https://github.com/magento/magento2/issues/28921)

<!-- ENGCOM-8075 -->

* Tillagda tester för att kontrollera om **Används i** information om en bild i Mediegalleriet visas när enheten har tagits bort. [GitHub-1774](https://github.com/magento/adobe-stock-integration/issues/1774)

#### Nya åtgärdsgrupper

* `AssertStorefrontCustomerLogoutSuccessPageActionGroup`. [GitHub-29841](https://github.com/magento/magento2/issues/29841) <!-- ENGCOM-8121 -->

* `AdminOpenConfigurationStoresPageActionGroup`. [GitHub-29848](https://github.com/magento/magento2/issues/29848) <!-- ENGCOM-8259 -->

* `ReloadPageActionGroup`. [GitHub-30683](https://github.com/magento/magento2/issues/30683) <!-- ENGCOM-8394 -->

* `StorefrontClickRefundTabCustomerOrderViewActionGroup`. [GitHub-30032](https://github.com/magento/magento2/issues/30032) <!-- ENGCOM-8203 -->

* `AdminOpenAdminThreeDSecurePageActionGroup`. [GitHub-29845](https://github.com/magento/magento2/issues/29845) <!-- ENGCOM-8115 -->

* `AdminCustomerClickFirstRowEditLinkActionGroup`.  [GitHub-29501](https://github.com/magento/magento2/issues/29501) <!-- ENGCOM-8043 -->

* `StorefrontClickAddToCartButtonActionGroup`. [GitHub-29823](https://github.com/magento/magento2/issues/29823) <!-- ENGCOM-8113 -->

* `AdminDeleteTaxRateActionGroup`. [GitHub-29940](https://github.com/magento/magento2/issues/29940) <!-- ENGCOM-8192 -->

* `AdminOpenWebConfigurationPageActionGroup`. [GitHub-29846](https://github.com/magento/magento2/issues/29846) <!-- ENGCOM-8126 -->

* `AdminOpenGeneralConfigurationPageActionGroup`. [GitHub-29847](https://github.com/magento/magento2/issues/29847) <!-- ENGCOM-8114 -->

* `AdminOrderClickSubmitOrderActionGroup`. [GitHub-29649](https://github.com/magento/magento2/issues/29649) <!-- ENGCOM-8023 -->

* `AdminOpenCatalogProductPageActionGroup`. [GitHub-29941](https://github.com/magento/magento2/issues/29941) <!-- ENGCOM-8209 -->

* `AdminClickInvoiceButtonIntoOrderActionGroup`. [GitHub-25399](https://github.com/magento/magento2/issues/25399) <!-- ENGCOM-8210 -->

* `AdminGridBulkActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminGridColumnShowActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminOpenIndexManagementPageActionGroup`. [GitHub-29825](https://github.com/magento/magento2/issues/29825) <!-- ENGCOM-8123 -->

* `AdminOpenCatalogSearchTermIndexPageActionGroup`. [GitHub-29844](https://github.com/magento/magento2/issues/29844) <!-- ENGCOM-8128 -->

* `AdminClickAddProductToggleAndSelectProductTypeActionGroup`. [GitHub-30917](https://github.com/magento/magento2/issues/30917) <!-- ENGCOM-8439 -->

* `StorefrontCheckoutClickSaveAddressButtonActionGroup`. [GitHub-30916](https://github.com/magento/magento2/issues/30916) <!-- ENGCOM-8454 -->

* `AdminOpenCurrencyRatesPageActionGroup`. [GitHub-30783](https://github.com/magento/magento2/issues/30783) <!-- ENGCOM-8432 -->

* `AdminClickGetShippingMethodsAndRatesActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `AdminSelectFixedShippingMethodActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `StorefrontClickProceedToCheckoutActionGroup`. [GitHub-30926](https://github.com/magento/magento2/issues/30926) <!-- ENGCOM-8438 -->

* `StorefrontOpenMyAccountPageActionGroup`. [GitHub-29842](https://github.com/magento/magento2/issues/29842) <!-- ENGCOM-8143 -->

### Nyhetsbrev

<!-- MC-38789-->

* Administratörsanvändare kan nu redigera ett kundkonto som förväntat när kunden prenumererar på ett nyhetsbrev i kö. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8034 -->

* Programmet skickar nu en ny bekräftelse på prenumerationen på nyhetsbrevet om kunden inte bekräftar sin prenumeration på nyhetsbrevet. [GitHub-28422](https://github.com/magento/magento2/issues/28422)

<!-- ENGCOM-8429 -->

* Du kan nu redigera ett kundkonto som förväntat när kunden prenumererar på ett nyhetsbrev som är placerat i kö. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

### Betalningsmetoder

<!-- MC-35161-->

* Betalningsmetoder läses nu in i Admin för alla webbplatser som förväntat i en distribution av flera butiker.

<!-- MC-35152-->

* Programmet slutför nu Payflow Pro-betalningar när kundens namn innehåller bokstäver med accenttecken. Tidigare slutfördes inte betalningen och programmet loggade detta fel: `report.CRITICAL: String to be escaped was not valid UTF-8 or could not be converted`.

#### PayPal

<!-- MC-35692-->

* Handlare kan nu göra en beställning från administratören efter att ha bytt från en betalningsmetod som använder ett kreditkort till en betalningsmetod som inte är kreditkortsbetalning. Tidigare när en handlare klickade på **Skicka beställning** startades inläsningsprocessen men slutfördes inte och ordningen placerades inte.

<!-- MC-37649-->

* Programmet skapar inte längre dubblettorder när en beställning placeras med PayPal Express. Tidigare när en kund försökte betala för en beställning med PayPal Express men PayPal returnerade ett fel, skapades beställningen ändå. Detta resulterade i dubblettorder på handlarens webbplats. [GitHub-13952](https://github.com/magento/magento2/issues/13952)

<!-- MC-38829-->

* Rapporter om PayPal-kvittning är nu tillgängliga på **Rapporter** > **Försäljning** > **PayPal-kvittning** som förväntat. Tidigare listade inte programmet de här rapporterna i rutnätet för kvittningsrapport för PayPal och det här meddelandet visades: `We couldn't find any records`.

<!-- MC-39442-->

* Klicka på **PayPal** knappen under utcheckning aktiverar inte längre en redundant `web-api` ring. Tidigare utlöstes två förfrågningar, vilket fördubblade kostnaden för produkten.

<!-- ENGCOM-8173 -->

* Gästkunder kan nu göra PayPal-beställningar när **Automatisk tilldelning till kundgrupp** är aktiverat. Betalningen behandlas på PayPal-gatewayen, ordern skapas i Magento och kunden ser din tacksida. Tidigare bearbetades beställningen på PayPal-gatewayen, men beställningen skapades inte i Magento Open Source. Köparen omdirigerades istället till sidan för ordergranskning där följande fel visades i programmet: `Failed address validation: %1" error`. [GitHub-25399](https://github.com/magento/magento2/issues/25399)

### Prestanda

<!-- MC-37705-->

* Prestandaproblem i `module-catalog-import-export/Model/Import/Product/Option.php` har åtgärdats. Den tid som krävs för att exportera eller importera mer än 100 000 poster har minskats. Se [Import/export tar längre tid än förväntat med ett stort antal produktalternativ](https://support.magento.com/hc/en-us/articles/360050695772) Kunskapsbasartikeln.

<!-- MC-37799-->

* `Magento_Csp/Model/BlockCache` har omarbetats för att minska både minnesanvändningen och genereringen av onödigt stora cachelagrade strängar. Tidigare har sidor som innehöll dynamiskt vitlistade skript och format ofta upplevts av prestandaproblem. [GitHub-29964](https://github.com/magento/magento2/issues/29964)

<!-- MC-37816 -->

* Vi har förbättrat arbetet med schemalagd export av kataloger som innehåller över 100 000 produkter som använder konsumenterna.

<!-- MC-38306 -->

* Programmet tömmer inte längre kategoricachen när du lägger till eller sparar en inaktiverad produkt i en kategori. Tidigare tömde programmet cacheminnet för relaterade kategorier trots produktstatus, vilket påverkade serverprestanda.

<!-- MC-38518 -->

* Sidinläsningstiden för uppdatering av produktkvantiteten i kundvagnen har förbättrats. Tidigare körde programmet flera separata frågor för varje produkt i kundvagnen, vilket ökade sidans laddningstid.

<!-- MC-39700 -->

* En indexerare har lagts till i `Magento_Bulk`  MySQL-tabell, som har förbättrat prestanda för gruppåtgärder.

<!-- MC-38593 -->

* Programmet cachelagrar nu underordnade ID:n för konfigurerbara produkter. Detta har förbättrat sidinläsningsprestanda genom att minska antalet databasförfrågningar. [GitHub-30585](https://github.com/magento/magento2/issues/30585)

<!-- MC-37594 -->

* Inläsningen av Admin Dashboard har förbättrats. Tidigare visades tabbnamnen som en lista innan sidan lästes in.

<!-- MC-37417 -->

* Hanteringen av Redis-cachen har förbättrats genom tillägg av utgångsgränser för layoutcacher. Tidigare uppnådde Redis caches allokerat maximalt minne snabbt i stora distributioner och programmet utlöste fel vid skrivåtgärder.

<!-- ENGCOM-8016 -->

* Utcheckningsprestanda har förbättrats genom att en redundant databasfråga har tagits bort i `app/code/Magento/Catalog/Model/CategoryLink.php`. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- ENGCOM-8290 -->

* `Magento\Framework\DB\Adapter\Pdo\Mysql->isTableExists` har omarbetats för att förbättra prestandan. Överflödiga samtal till `SHOW TABLE STATUS` för att kontrollera om en tabell finns har reducerats. [GitHub-29662](https://github.com/magento/magento2/issues/29662)

<!-- ENGCOM-8258 -->

* `getPageLayoutsConfig` sparas nu i cacheminnet, vilket har förbättrat prestanda för konfigurationsbyggaren. [GitHub-29546](https://github.com/magento/magento2/issues/29546)

### Beständig

<!-- MC-36647 -->

* Köpare kan inte längre göra en beställning efter att sessionscookien har upphört att gälla när beständig kundvagn är aktiverad. I stället visas inloggningssidan så att användaren kan logga in. Tidigare gjordes beställningen. Programmet validerade inte den beständiga kunden korrekt när `PHPSESSID` har gått ut, och `customerSession` har återskapats från den beständiga informationen.

<!-- MC-39127-->

* Programmet visar nu välkomstmeddelandet som väntat efter att en kund har loggat in i en butik där en beständig kundvagn är aktiverad. Tidigare visades **Inte du?** efter inloggning.

<!-- MC-38269-->

* Programmet visar inte längre **Inte du?** text när en kund väljer **Kom ihåg mig** när du loggar in på en distribution där kundvagn är aktiverad.

<!-- MC-37109-->

* Programmet visar inte längre innehållet i kundvagnen när kundsessionen har upphört. Tidigare visade programmet det här felet när en gästkund försökte checka ut när en beständig kundvagn var aktiverad: `No such entity with cartid = 0`.

### Priser

<!-- MC-34394-->

* Efterföljande asynkrona prisuppdateringar påverkar inte längre varandra, och rätt status tilldelas varje åtgärd. Tidigare, om en asynkron prisuppdatering misslyckades, skulle alla följande asynkrona prisuppdateringar misslyckas tills motsvarande kökonsument startades om. [GitHub-27865](https://github.com/magento/magento2/issues/27865)

### Rapporter

<!-- MC-36652 38925-->

* **Rapporter** > **Marknadsföring** > **Produkter i kartor** visar nu bara posten i det tillåtna omfånget för den användare som genererar rapporten. Tidigare fanns alla data tillgängliga för alla omfattningar.

<!-- MC-38074-->

* Programmet använder nu valutan som anges i rollomfånget för säljaren som genererar rapporten när produktvalutan visas i rapporten Produkter i kundvagn.

<!-- MC-37934-->

* Produktfunktionerna Senast visade och Senast jämförda visar nu statistik för olika butiker och webbplatser i Admin som förväntat i en distribution i flera butiker. Tidigare har dessa funktioner inte tagit hänsyn till alla butiker eller webbplatser.

<!-- MC-37217-->

* Priserna i orderrapporter använder nu rätt valutasymbol.

<!-- ENGCOM-8314 -->

* Programmet verifierar nu om det finns en token när en användare klickar på Admin Dashboard **Gå till avancerad rapport** -knappen.  Om variabeln finns visas sidan Avancerad rapportering. Om variabeln inte är konfigurerad visas en informativ sida i användarhandboken. [GitHub-25411](https://github.com/magento/magento2/issues/25411)

### Recensioner

<!-- MC-37117-->

* Sidan Ny granskning läses nu in som förväntat när du klickar på **Ny granskning** knapp på Admin **Marknadsföring** > **Alla granskningar**. Om du klickar på en produkt på den här sidan öppnas det förväntade nya granskningsformuläret för den produkten.

<!-- ENGCOM-8383 -->

* Programmet genererar inte längre det här felet när du försöker redigera en beställning från administratören **Marknadsföring**  >  **Alla granskningar**: `Uncaught TypeError: Event.observe is not a function`.  [GitHub-30388](https://github.com/magento/magento2/issues/30388)

### Försäljning

<!-- MC-36219-->

* The `order_created_at` kolumn i `sales_shipment_grid` uppdateras nu som väntat efter varje uppdatering.

<!-- MC-36405-->

* Du kan nu beställa om en produkt med ett datum för anpassade alternativ från en butik som **Använd JavaScript-kalender** är aktiverat. Tidigare, när du försökte beställa om, lade programmet inte till artikeln i kundvagnen och visade följande fel: `Could not add the product with SKU "simp1" to the shopping cart: Please specify date required option(s).`

<!-- MC-36533-->

* Programmet stänger inte längre omedelbart en order när en kund checkar ut en order som består av en virtuell produkt med en total kostnad på $0 i distributioner där utcheckningsmetoden noll som delsumma är aktiverad.

<!-- MC-36755-->

* Programmet arkiverar inte längre en order innan det bearbetas. Tidigare påverkades omarkerade order av flervalsåtgärder i orderrutnätet i Admin.

<!-- MC-37371-->

* Rutnätet för kreditnotor visar nu rätt valutasymbol när Saudiarabien (SAR) har angetts som basvaluta.

<!-- MC-37880-->

* Programmet visar nu konsekvent leveransadressuppgifter som förväntat på ordersidan vid utcheckningen.

<!-- MC-38666-->

* Värdet för `total_qty` matchar nu värdet för `total_qty_ordered` i försäljningsfakturor.

<!-- MC-38717-->

* Asynkron sändning av e-postmeddelanden skickar nu e-post för endast de order som skapades efter datumet för den senaste uppdateringen. Tidigare filtrerade inte programmet e-post efter datum när asynkron sändning aktiverades.

<!-- MC-39135-->

* Programmet skickar nu fakturameddelanden som förväntat när en order läggs från administratören.

<!-- MC-38917-->

* Programmet rensar nu befintliga orderdata under en session när en handlare skapar en ny order för en kund från administratören.

<!-- MC-38915-->

* Du kan nu ändra kundgruppen för nya kunder som skapas via en administratörsorder när **Aktivera automatisk tilldelning till kundgrupp** är aktiverat. Du kan också tilldela kundgrupp baserat på momsvalidering. Tidigare kontrollerades inte den tilldelade begäran när momsregistreringsnumret validerades `group_id`. Som standard används standardinställningen `group_id`.

<!-- MC-37539-->

* Programmet ändrar inte längre status för en anpassad order med `Suspected Fraud` status till `Processing` efter att en handlare har skapat en delleverans med REST API.

### Försäljningsregel

<!-- MC-34793-->

* Kupongkoder som har tillämpats baserat på leveransmetoden tillämpas inte längre när en kund byter leveransmetod. Tidigare rensades inte kupongkoderna när kunderna bytte leveranssätt.

<!-- MC-34649-->

* Köpare kan inte använda en kupongkod oftare än **Användning per kund** att ställa in tillstånd. Om en kund hade flera webbläsarfönster öppna och beställt samtidigt fick varje order rabatt, trots att **Användning per kund** inställningen hade värdet **1**.

### Sök {#search-heading}

<!-- MC-35095-->

* Elasticsearch ger inte längre upphov till ett okänt modifieringsfel när en kund söker på en söksynonym. Tidigare saknade escape-symbolen i reguljära uttryck, vilket resulterade i ett allvarligt fel.

<!-- MC-37577-->

* Avancerad sökning returnerar inte längre underordnade produkter som individuella sökresultat när de underordnade produkterna konfigurerades med synlighet inställd på **Inte synlig enskilt**.

<!-- MC-37954-->

* Produktnamnen för Elasticsearch i sökresultaten är inte längre skiftlägeskänsliga.

<!-- ENGCOM-8329 -->

* Sökresultatsidan cachelagras nu som förväntat när **ange antalet översta sökresultat som ska cachelagras till 0** inställningen är aktiverad i Admin **Lager**  >  **Konfiguration**  >  **Katalog**  >  **Katalog**  > **Katalogsökning**.

<!-- MC-36807-->

* Katalogsökindexeraren körs nu utan att något fel genereras på grund av fältgränsen i Elasticsearch. Tidigare uppstod följande fel i programmet: `Limit of total fields [xxx] in index [m24dev_product_1_v10] has been exceeded`.

<!-- MC-35491-->

* Prestandan för katalogsökning har förbättrats. Inaktiverar **Aktivera sökförslag** (**Lager** > **Konfiguration** > **Katalog** > **Katalogsökning** ) fungerar som förväntat. Tidigare frågade programmet MySQL `search_query` tabellen i stället för Elasticsearch för sökförslag som fylls i automatiskt. [GitHub-25534](https://github.com/magento/magento2/issues/25534)

<!-- MC-35256-->

* Elasticsearch filtrerar nu produktpriserna på samma sätt som MySQL. Fälttypen `price_*`  ändrades från `float` till `double` i indexet Elasticsearch för att förbättra precisionen och korrigera ett flyttalsfel.

<!-- ENGCOM-8393 -->

* En händelseavlyssnare för tangentnedtryckning har lagts till i administratören för att aktivera det globala sökformuläret när ett snedstreck anges. [GitHub-29551](https://github.com/magento/magento2/issues/29551)

<!-- MC-24217-->

* Elasticsearch genererar inte längre något fel utan visar i stället inga produkter som förväntat när en `string` värdet används för att filtrera produkter efter attribut med ett `integer` eller `decimal` serverdelstyp. Tidigare visades det här felet i programmet i `exception.log`: `number format exception`.

<!-- ENGCOM-8303 -->

* Elasticsearch genererar inte längre ett undantag när en sökterm innehåller en  `/`.  [GitHub-25886](https://github.com/magento/magento2/issues/25886), [GitHub-25110](https://github.com/magento/magento2/issues/25110)

* Sökningen är nu inaktiverad som förväntat för en vald kundgrupp från produktfrågan när **Tillåt inte katalogsökning efter** konfigurationsinställningen i de allmänna kategoribehörigheterna är aktiverad. [GitHub-29927](https://github.com/magento/magento2/issues/29927)

<!-- ENGCOM-8466 -->

* Sökresultaten innehåller inte längre flera citattecken av samma ord. [GitHub-30104](https://github.com/magento/magento2/issues/30104)

### Leverans

<!-- MC-38247 -->

* Utcheckningsprocessen misslyckas inte längre när ett nätverksavbrott avbryter anslutningen till leveransmetoden för DHL. I stället visas andra tillgängliga leveransmetoder. Tidigare avbröts utcheckningsprocessen när anslutningen till DHL avbröts och följande fel visades i programmet: `Sorry, no quotes are available for this order at this time`. [GitHub-29902](https://github.com/magento/magento2/issues/29902)

<!-- MC-35194-->

* Fälten som beskriver UPS-leveransmetoden i Admin **Lager** > **Konfiguration** > **Försäljning** > **Leveransmetoder** är nu aktiverade som förväntat.

<!-- MC-35633-->

* Leveranser som har skapats via POSTEN `/rest/V1/shipment` slutpunkten uppdaterar nu order korrekt. Tidigare skapade programmet en leverans, men leveransstatusen var fortfarande i bearbetningstillståndet.

<!-- MC-37120-->

* Programmet tar inte längre bort enkla produkter från varukorgen när en annan produkt tas bort från varukorgen före utcheckning med Leverans till flera adresser. [GitHub-30259](https://github.com/magento/magento2/issues/30259)

<!-- MC-38031-->

* På sidan Ordergranskning visas nu momsbeloppet före leveransbeloppet som förväntat för order som skickas till flera adresser.

<!-- ENGCOM-8257 -->

* UPS-leveransspårning visar nu status för `Delivered On` endast när ett paket har levererats. [GitHub-30032](https://github.com/magento/magento2/issues/30032)

<!-- MC-38825-->

* Nu visas rätt vagnsdelsumma för order som innehåller en virtuell produkt när kunden går tillbaka till kundvagnen från utcheckning med flera adresser.

<!-- MC-38682-->

* Merchants kan nu skapa en leveransetikett från leveranssidan för en befintlig order som använder FedEx-leverans när JavaScript-paketering är aktiverat. Tidigare uppstod ett fel när handlaren klickade på **Skapa leveransetikett** -knappen.

<!-- MC-36953-->

* Leveransspårningslänken i e-postmeddelandet med leveransbekräftelsen som skickas till kunder fungerar nu som förväntat. Tidigare returnerade länken ett 404-fel.

<!-- ENGCOM-8025 -->

* Programmet visar nu ett informativt felmeddelande när en kund checkar ut med hjälp av flera adresser och sedan tar bort alla produkter utom en virtuell produkt. [GitHub-25595](https://github.com/magento/magento2/issues/25595)

<!-- ENGCOM-8253 -->

* Nu kan du skapa en leveransetikett som förväntat för en delorder. Tidigare, när du försökte skapa en leveransetikett för endast en artikel från en beställning, lade programmet till alla produkter i paketet och valideringen misslyckades. [GitHub-29552](https://github.com/magento/magento2/issues/29552)

<!-- ENGCOM-8154 -->

* Validering av leveransmetoden ignoreras inte längre vid anrop `/V1/guest-carts/:cartId/totals-information`. [GitHub-25147](https://github.com/magento/magento2/issues/25147)

### Webbplatskarta

<!-- MC-37306-->

* Webbplatskartor som genereras av `cron` inkluderar nu korrekta bild-URL:er. Tidigare var den genererade cachelagrade bildsökvägen felaktig i distributioner av flera lager.

### Butik

<!-- ENGCOM-7543 -->

* Admin- och huvudbutiksväljaren återspeglar nu ändringar som gjorts i butikssorteringsordningen i Admin. [GitHub-13401](https://github.com/magento/magento2/issues/13401)

<!-- ENGCOM-8274 -->

* Programmet skapar nu korrekta URL:er för kategorier och produkter efter att en butiksvys URL-nyckel på den översta nivån har ändrats. Tidigare när en butiksvys kategoriträd innehöll ändringar  `url_keys`Om en kategorinyckel inte ändrades men det var kategorins överordnade nyckel, användes kategorins standardbutiksvy i den ursprungliga koden när URL:er skapades. [GitHub-28633](https://github.com/magento/magento2/issues/28633)

### Målregler

<!-- MC-34998-->

* Inläsningen av produktinformationssidor har optimerats. Vi har lagt till index för databastabeller som optimerar villkorsfrågor för målregel i många fall.

### Moms

<!-- MC-37666-->

* Momsvalidering på en gästorder resulterar inte längre i att programmet sparar offerten med en felaktig kundmomsklass. [GitHub-30018](https://github.com/magento/magento2/issues/30018)

<!-- MC-37761-->

* Beställningar som skickas till flera adresser kan nu sparas vid utcheckning när FPT har konfigurerats. Tidigare visade programmet en tom sida i stället för orderframgångssida efter att ha slutfört en beställning för flera adresser.

<!-- ENGCOM-8158 -->

* Detaljsidor för butiksprodukter visar nu gamla och nya priser med och utan moms som förväntat. [GitHub-27500](https://github.com/magento/magento2/issues/27500), [GitHub-11998](https://github.com/magento/magento2/issues/11998)

### Testa

<!-- MC-37364-->

* `bin/magento dev:tests:run` startar nu följande test som förväntat: all, unit, integration, integration-all, static, static-all, integrity, legacy och default.

<!-- MC-38488-->

* `AdminMediaGalleryInsertLargeImageFileSizeTest` har omarbetats.

<!-- ENGCOM-8158 -->

* Enhetstester är nu kompatibla med PHPUnit 8. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-8009 -->

* `\Magento\TestFramework\TestCase\WebapiAbstract` innehåller nu en funktion som stöder jämförelse av stora kapslade arrayer med förväntade och faktiska resultat i tester. Irrelevanta nycklar i resultatet kan nu ignoreras. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-8024 -->

* `AdminMediaGalleryCatalogUiEditCategoryGridPageTest` inte längre misslyckas slumpmässigt. [GitHub-1764](https://github.com/magento/adobe-stock-integration/issues/1764)

<!-- ENGCOM-8041 -->

* `dev/tests/integration/testsuite/Magento/Customer/Controller/AccountTest` har förbättrats. (`assert` baseras nu på `XPath` väljare i stället för `assertStringContainsString`.) [GitHub-29700](https://github.com/magento/magento2/issues/29700)

<!-- ENGCOM-8017 -->

* Tillagd testtäckning för `AdminAnalytics` -modul. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-8266 -->

* Integrations- och API-funktionstester är nu kompatibla med PHPUnit 9.3. [GitHub-30146](https://github.com/magento/magento2/issues/30146)

<!-- MC-35798 -->

* Korrigerade problem med GraphQL `testRequestCacheTagsForCategoryListOnMultipleIds` test. [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-7762 -->

* Huvudvärden som innehåller URL:er tolkas nu korrekt i `ApiFunctional TestFramework`. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

<!-- MC-35798 8109-->

* Korrigerade problem med GraphQL `testRequestCacheTagsForCategoryListOnMultipleIds` test. [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-8382 -->

* `—no-tablespaces` har lagts till i alla förekomster av `mysqldump`som gör att integreringstester kan köras utan `PROCESS` privilegium (krävs sedan MySQL 5.7.31 / 8.0.21 ska köras `mysqldump` som standard). [GitHub-30566](https://github.com/magento/magento2/issues/30566)

### Tema

<!-- ENGCOM-8419 -->

* En ny `--no-parent` flaggan lades till i `bin/magento setup:static-content:deploy` som förhindrar att det överordnade temat kompileras. Den här nya flaggan kan avsevärt förbättra prestandan för den statiska innehållsdistributionen genom att undvika onödig kompilering. Observera att den här nya flaggan inte fungerar när du använder `compact` strategi. [GitHub-30184](https://github.com/magento/magento2/issues/30184)

<!-- MC-37630 -->

* Designkonfigurationen genererar inte längre DDL-åtgärder. Tidigare genererades DDL-satser som kunde utlösa MySQL-fel när designkonfigurationen uppdaterades.

<!-- ENGCOM-8112 -->

* Överflödig kod i `Magento_ConfigurableProduct` modulen i Admin-temat har tagits bort.  [GitHub-29857](https://github.com/magento/magento2/issues/29857)

<!-- ENGCOM-8144 -->

* Navigering för överflödiga mindre format och oanvända egenskaper i det tomma temat har tagits bort. [GitHub-29914](https://github.com/magento/magento2/issues/29914)

<!-- ENGCOM-8285 -->

* Lagt till komprimerbara navigeringsfunktioner i det tomma temat i mobilvyn. [GitHub-30237](https://github.com/magento/magento2/issues/30237)

<!-- ENGCOM-7803 -->

* Inläsning av webbteckensnitt för teman har optimerats.  [GitHub-29526](https://github.com/magento/magento2/issues/29526)

<!-- ENGCOM-8068 -->

* Utvecklare kan nu ange teckensnittstyp när de deklarerar ett anpassat teckensnitt i ett tema. [GitHub-29719](https://github.com/magento/magento2/issues/29719)

### Översättning och nationella inställningar

<!-- MC-36836 -->

* Datumväljaren i rutnätet för administrationsbeställningar fungerar nu som väntat när adminspråket är arabiska (`ar_SA - Saudi Arabia`).

<!-- MC-38476 -->

* Programmet visar inte längre ett felmeddelande när en kund anger en argentinsk adress med en giltig postkod när han eller hon registrerar eller lägger till en ny adress. Tidigare visades följande fel i programmet: `Provided Zip/Postal Code seems to be invalid. Example: 1234. If you believe it is the right one you can ignore this notice.`

<!-- MC-38663-->

* Programmet genererar inte längre något fel när en kund anger ett femsiffrigt postnummer för en koreansk adress.

<!-- ENGCOM-8244 -->

* Ökat stöd för de Uruguay-regioner som definieras i [ISO 3166-2:UY](https://en.wikipedia.org/wiki/ISO_3166-2:UY). [GitHub-29729](https://github.com/magento/magento2/issues/29729)

<!-- ENGCOM-8220 -->

* `zip_codes.xml` har uppdaterats för att framtvinga åtta siffror för brasilianska postnummer. [GitHub-29984](https://github.com/magento/magento2/issues/29984)

<!-- ENGCOM-8304 -->

* Förbättrad lokalisering av återstående olokaliserade fraser. [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8380 -->

* Platshållaren för indata för stödrastersökning kan nu översättas. [GitHub-30510](https://github.com/magento/magento2/issues/30510)

<!-- ENGCOM-8018 -->

* Programmet hämtar nu JavaScript-moduler för textbundna översättningar endast när de är aktiverade.  [GitHub-29553](https://github.com/magento/magento2/issues/29553)

### UI

<!-- MC-38509-->

* The **Skapa ett konto** på sidan Skapa nytt konto förblir aktiv när en kund anger ogiltiga data. Tidigare var knappen inaktiverad, vilket hindrade kunderna från att försöka skapa ett konto igen efter att ha gjort ett fel. Detta var ett känt fel i 2.4.1. [GitHub-30513](https://github.com/magento/magento2/issues/30513)

<!-- MC-38698-->

* Inläsningen av rutnätet på sidan Redigera administratörsorder har förbättrats.

<!-- MC-37870-->

* Programmet visar nu  **Samma som faktureringsadress** kryssrutan som förväntat på ordersidan när produkter har lagts till i varukorgen av SKU.

<!-- ENGCOM-8007 -->

* CSS-klassen som har definierat begränsad bredd används nu som förväntat på **Starttid** fält i Admin **Butik**  >  **Konfiguration**  >  **Katalog**  >  **XML-webbplatskarta**  >  **Genereringsinställningar**.  [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992 -->

* Visningsproblem med kryssruteetiketten Villkor har korrigerats.  [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7948 -->

* Programmet visar inte längre CSS-koden för ett skiktprisblock på produktsidan när skiktpriserna inte är tillgängliga. [GitHub-29194](https://github.com/magento/magento2/issues/29194)

<!-- ENGCOM-8084 -->

* Placeringen av knapparna på informationssidan i bildvyn har ändrats så att de överensstämmer med riktlinjerna för användargränssnittet.  [GitHub-1783](https://github.com/magento/adobe-stock-integration/issues/1783)

<!-- ENGCOM-8342 -->

* Kupongkodens textfält visas nu med rätt bredd i Internet Explorer-/EDGE-webbläsare.

<!-- ENGCOM-7630 -->

* The `@button__border-radius` variabeln definieras nu i `lib/web/css/source/lib/variables/_buttons.less` bibliotek.  `border-radius` har standardvärdet `3px`. Tidigare `border-radius` var hårdkodad.  [GitHub-28674](https://github.com/magento/magento2/issues/28674)

<!-- ENGCOM-8067 -->

* Sändningsknappen (förstoringsglas) i det lilla sökfältet är nu inaktiverad tills den minsta sökstränglängden har nåtts. [GitHub-29704](https://github.com/magento/magento2/issues/29704)

<!-- MC-38807-->

* The **Förhandsgranska mall** fungerar nu som väntat på sidan Redigera kö.

<!-- MC-31892-->

* Programmet behåller nu attributets värde när du flyttar attributet från en grupp till en annan.

<!-- ENGCOM-8085 -->

* En stor variabel för teckensnittsvikt har lagts till i `lib/web/css/source/lib/variables/_typography.less`. [GitHub-29778](https://github.com/magento/magento2/issues/29778)

<!-- ENGCOM-8211 -->

* Filtersynlighet fungerar nu med kolumnsynlighet på det sätt som förväntades i administratörsstödraster.  [GitHub-30345](https://github.com/magento/magento2/issues/30345)

<!-- ENGCOM-8152 -->

* Komponentalternativ för val av gränssnitt visas inte längre när `this.disabled(true)` är inställt. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7901 -->

* The `@font-family-name__base` variabeln används inte längre när Open Sans-teckensnittet läses in. [GitHub-29515](https://github.com/magento/magento2/issues/29515)

<!-- ENGCOM-8120 -->

* Attributet WAI-ARIA `aria-atomic="true"` har lagts till i felbehållartaggen. [GitHub-29560](https://github.com/magento/magento2/issues/29560)

<!-- ENGCOM-8175 -->

* UI-komponentstödraster visar nu korrekt antal valda objekt. Tidigare visade stödraster fel antal markeringar när en sökning med nyckelord markerade alla stödrasterobjekt och användaren avmarkerade vissa objekt innan han/hon markerade rubrikraden. [GitHub-29968](https://github.com/magento/magento2/issues/29968)

<!-- ENGCOM-8118 -->

* Programmet visar inte längre orenderad HTML på översiktssidorna för fakturor och leveranser. [GitHub-29958](https://github.com/magento/magento2/issues/29958)

<!-- ENGCOM-8066 -->

* Klicka **Alternativ** på Admin **Lager**  >  **Valutakurser**  dirigerar nu användare till avsnittet med utökade valutaalternativ på sidan Systemkonfiguration. [GitHub-29336](https://github.com/magento/magento2/issues/29336)

<!-- ENGCOM-8361 -->

* Förbättrat stöd för att visa en widget beroende på ett annat villkor för `adminhtml` widgetar när du använder en väljarwidgettyp. [GitHub-13316](https://github.com/magento/magento2/issues/13316), [GitHub-7252](https://github.com/magento/magento2/issues/7252), [GitHub-6868](https://github.com/magento/magento2/issues/6868)

<!-- ENGCOM-8336 -->

* Förbättrad utfyllnad av text i bekräftelsedialogrutor i Luma-temat. [GitHub-30452](https://github.com/magento/magento2/issues/30452)

### Valv

<!-- MC-39109-->

* The `Vault` modulen känner nu igen betalningsmetodkoder från begäran om tjänsten för hantering av betalningsinformation. När en kund gjorde en beställning med ett sparat Braintree-kreditkort uppstod det här felet även när en giltig betalningsmetod användes: `The requested Payment Method is not available`.

<!-- ENGCOM-7977 -->

* Den banderoll som programmet visas på sidan Administratörsinloggning som kund finns nu högst upp på sidan när användaren rullar. [GitHub-29354](https://github.com/magento/magento2/issues/29354)

### Hörn

* Adressförslag tas nu bort som förväntat när en adress ändras.

* Ett konkurrensvillkor som innebar att vissa kunder inte kunde spara sin adress på sin kontopanel har lösts.

* Verifiering av vertex-adresser lägger inte längre till sidan Adressredigering i helsidescachen under vissa förhållanden.

* Vertex-beräknad moms beaktas nu när fri frakt har konfigurerats för ett belopp inklusive moms.

### Webb-API-ramverk

<!-- MC-23904 ENGCOM-8421-->

* Nu kan du använda POST `V1/invoice/:invoiceId/refund` att återbetala en faktura som har noll produktkvantitet och noll fraktkostnader (till exempel `{"items": [{"qty": 0, "orderItemId": 6, "extensionAttributes": {}}], "appendComment": false, "notify": true, "isOnline": true, "arguments": {"adjustment_negative": 0.0, "adjustment_positive": 0.99, "shipping_amount": 0}}.` ) Tidigare uppstod följande fel i programmet: `You can't create a creditmemo without products`. [GitHub-23069](https://github.com/magento/magento2/issues/23069)

<!-- MC-33732 -->

* Nu kan du använda POST `V1/categories` för att skapa eller uppdatera en kategori. Tidigare sparade programmet inte värdet om `default_sort_by` värdet angavs som en array. När `default_sort_by` värdet angavs som en sträng. Programmet returnerade följande fel: `Error occurred during \"custom_attributes\" processing. Attribute \"default_sort_by\" has invalid value. The \"string\" value's type is invalid. The \"string[]\" type was expected. Verify and try again.`

<!-- MC-35740 -->

* Använda POST `V1/invoices/:id/capture` att hämta in betalningsinformation fungerar nu som förväntat. Tidigare godkände programmet ordern men tog bara emot den på betalningsgatewayens plats.

<!-- MC-37794 -->

* När du använder POST `V1/order/:orderId/ship` Om du vill skapa en partiell leverans returnerar slutpunkten det korrekta antalet levererade produkter.

<!-- MC-38425-->

* Fakturor som skapats med POST `V1/order/:orderID/invoice` återspeglar nu korrekt delbetalning per butikskrediter. Tidigare, när en order delvis betalades med butikskrediter, skapades fakturan utan att butikskrediten togs med i beräkningen.

<!-- MC-36830-->

* GETEN `rest/all/V1/categories` och GET `rest/all/V1/categories?rootCategoryId=2` samtal returneras nu `name` och `product_count` fält som förväntat för alla kategorier i trädet. Tidigare var kategorifältets värden tomma. Insticksprogrammet för tabellnamnsmatchning returnerade ett felaktigt tabellnamn för hämtning av antalet produkter per kategori.

<!-- ENGCOM-8286 -->

* PUT `V1/categories/:id` slutpunkten lagrar nu de data som behövs för att skapa 301 omdirigeringar för kategorins URL-nycklar när `save_rewrites_history` ett anpassat attribut anges. [GitHub-29174](https://github.com/magento/magento2/issues/29174), [GitHub-30240](https://github.com/magento/magento2/issues/30240)

### Önsklista

<!-- MC-33626-->

* Köpare kan nu lägga till en produkt i en önskelista när produkten tilldelas en anpassad lagerkälla. [GitHub-3018](https://github.com/magento/inventory/issues/3018)

<!-- MC-35416-->

* Administratörer kan nu komma åt sidan Hantera kundvagn från kundsidan Admin när en kund har lagt till en produkt i sin önskelista från butiken. Tidigare visade programmet följande fel när administratören klickade på **Hantera kundvagn** knapp: `An error has occurred. See error log for details`.

<!-- MC-35573-->

* The **Lägg i kundvagnen** på sidan med delade önskelistor fungerar nu som väntat för anonyma användare, gäster och användare som inte är inloggade.

<!-- ENGCOM-8062 -->

* Programmet visar nu de valda alternativen för konfigurerbara produktattribut på önskelistesidan som förväntat.  [GitHub-24091](https://github.com/magento/magento2/issues/24091),  [GitHub-22503](https://github.com/magento/magento2/issues/22503)

<!-- ENGCOM-7779 -->

* Implementerat `ActionInterface` for `\Magento\Wishlist\Controller\Shared\Allcart`. [GitHub-29537](https://github.com/magento/magento2/issues/29537)

## Kända fel

**Problem**: `[magento_root]/index.php` filen har tagits bort och programmet körs nu från `/pub` som standard för Apache-konfigurationer. Lager som hanteras från undermappar fungerar inte som förväntat och kan visa 404 fel. **Tillfällig lösning**: Använd symboler för att emulera installationen i en undermapp. I följande exempel används `https://shop01.com/shop/` för att illustrera hur du använder en länk för att emulera en installation i en undermapp.

1. Skapa en underkatalog för `https://shop01.com/shop/`:

   ```bash
   mkdir magento_root/pub/shop01
   ```

   ```bash
   cd magento_root/pub/shop01
   ```

1. Skapa symboler för butikens överordnade kataloger i den nyligen skapade katalogen:

   ```bash
   ln -s ../media media
   ```

   ```bash
   ln -s ../static static
   ```

   ```bash
   ln -s ../../../pub pub
   ```

   ```bash
   ln -s ../.htaccess .htaccess
   ```

   ```bash
   ln -s ../health_check.php health_check.php
   ```

1. Skapa en `index.php` filen i den nya katalogen (`magento_root/pub/shop01/index.php`) och lägga till innehållet:

```php
   <?php
   require realpath(__DIR__) . '/../../../app/bootstrap.php';

   switch ($_SERVER['HTTP_HOST']) {
       case 'shop01.com':
       case 'www.shop01.com':
           $params = $_SERVER;
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = 'shop01';
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = 'website';
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
           break;

       default:
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $_SERVER);
           /** @var \Magento\Framework\App\Http $app */
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
       break;
   }
```

1. Konfigurera Apache-servern så att den pekar på den nya underkatalogen. Distributionskonfigurationerna kan variera mycket. Här är ett exempel på serverkonfiguration:

```xml
   <VirtualHost *:80>
       DocumentRoot "magento_root/pub/shop1"
       ServerName shop01.com
   </VirtualHost>
```

**Problem**: Programmet skickar inte betalningsinformation som förväntat när en kund först anger rätt kod i fältet CAPTCHA på betalningssidan, men det här felet visas:  `There has been an error processing your request`. Detta inträffar endast när kunden försöker att lägga ordern antingen utan att ange CAPTCHA-koden eller genom att ange den felaktigt.  **Tillfällig lösning**: Uppdatera sidan. <!-- MC-40506-->

**Problem**: Programmet skapar en order i Braintree som förväntat när en kund klickar på den **Betala med Venmo**, men skapar inte ordningen i Admin. Se [2.4.2 Känt fel: Betalningen till Braintree Venmo fungerar inte](https://support.magento.com/hc/en-us/articles/360054662652/) Kunskapsbasartikeln.  <!-- BUNDLE-2894-->

**Problem**: Du kan inte använda `addConfigurableProductToCart` GraphQL-mutation för att lägga till en konfigurerbar produkt i en varukorg i en icke-standardbutiksvy i en multibutiksdistribution som kör Inventory. (Lumabutiker påverkas inte.) följande fel visas i programmet: `Could not add item to cart. Please check required options and try again`. **Tillfällig lösning**: Använd `addProductsToCart` mutation istället. [GitHub-31660](https://github.com/magento/magento2/issues/31660)<!-- PWA-1298-->

## Bidrag från gemenskapen

Vi är tacksamma mot den bredare Magento Open Source-communityn och vill tacka för deras bidrag till denna release.

Gemenskapens ingenjörsteam [Magento Contributor](https://magento.biterg.io/app/kibana) har en lista över de viktigaste bidragsgivande personerna och partnerna per månad, kvartal och år. På den Contributors-sidan kan du följa länkar till deras sammanslagna PR på GitHub.

### Partnerbidrag

I följande tabell visas partnerernas bidrag. I den här tabellen visas den partner som har bidragit med pull-begäran, den externa pull-begäran och det GitHub-nummer som är kopplat till den (om tillgängligt).

{{$include /help/_includes/release-notes/engcomm-2-4-2-partner.md}}

### Individuella bidrag

Följande tabell visar bidragen från våra communitymedlemmar. I den här tabellen visas externa pull-begäranden, GitHub-utgåvans nummer som är kopplat till den (om tillgängligt) och den community-medlem som bidrog med pull-begäran.

{{$include /help/_includes/release-notes/engcomm-2-4-2-issues.md}}

### Systemkrav

Vår teknikstack bygger på PHP och MySQL. Mer information finns i [Systemkrav](../../../installation/system-requirements.md).

### Installations- och uppgraderingsanvisningar

Du kan installera Magento Open Source 2.4.2 med [Disposition](../../../installation/composer.md).

## Migreringsverktyg

Med datamigreringsverktyget kan du överföra data från Magento 1.x-lagringsplatsen till Magento 2.x. Det här kommandoradsgränssnittet innehåller funktioner för verifiering, spårning av förlopp, loggning och testning. Installationsanvisningar finns i [Installera datamigreringsverktyget](../../../tools/data-migration-tool/install.md). Överväg att utforska eller bidra till [Datamigreringsdatabas](https://github.com/magento/data-migration-tool).

The [Code Migration Toolkit](https://github.com/magento-commerce/code-migration) kan överföra befintliga tillägg och anpassningar för Magento 1.x-butiken till Magento 2.x. Kommandoradsgränssnittet innehåller skript för konvertering av moduler och layouter i Magento 1.x.
