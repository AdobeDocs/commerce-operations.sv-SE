---
title: Versionsinformation för Magento Open Source 2.4.7
description: Lär dig mer om nya funktioner, förbättringar, buggfixar och kända problem i version 2.4.7 av Magento Open Source.
recommendations: noCatalog
exl-id: 0145380a-8b4b-4757-a5fe-d98713f0df62
source-git-commit: 16feb8ec7ecc88a6ef03a769d45b1a3a2fe88d97
workflow-type: tm+mt
source-wordcount: '16977'
ht-degree: 0%

---


# Versionsinformation för Magento Open Source 2.4.7

Magento Open Source 2.4.7 introducerar stöd för PHP 8.3. Den innehåller hundratals kvalitetskorrigeringar och förbättringar. Core Composer-beroenden och bibliotek från tredje part har uppgraderats till de senaste tillgängliga versionerna. Den här versionen ökar GraphQL täckning för anpassade attribut och GraphQL resolver-cacheminnen. Här finns också stöd för nyligen uppdaterade FedEx- och UPS-tjänster.

{{bics}}

## Annan versionsinformation

Även om koden för dessa funktioner levereras med versioner av Magento Open Source-kärnkoden, släpps flera av dessa projekt också oberoende av varandra. Felkorrigeringar för dessa projekt dokumenteras i den separata, projektspecifika versionsinformationen som finns i dokumentationen för varje projekt.

## Magento Open Source 2.4.7 höjdpunkter

Leta efter följande högdagrar i den här versionen.

### Säkerhetsförbättringar

Den här versionen innehåller samma säkerhetskorrigeringar och förbättringar av plattformssäkerheten som ingår i Adobe Commerce 2.4.6-p5, 2.4.5-p7 och 2.4.4-p8. Se [Adobes säkerhetsbulletin](https://helpx.adobe.com/security/products/magento/apsb24-18.html) för den senaste diskussionen om dessa åtgärdade problem.

Inga bekräftade attacker relaterade till dessa problem har inträffat hittills. Vissa sårbarheter kan dock potentiellt utnyttjas för att komma åt kundinformation eller ta över administratörssessioner. De flesta av dessa problem kräver att en angripare först får åtkomst till Admin. Som ett resultat av detta påminner vi dig om att vidta alla nödvändiga åtgärder för att skydda din administratör, inklusive men inte begränsat till dessa ansträngningar:

* Lista över tillåtna IP-adresser
* [Tvåfaktorsautentisering](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* användning av ett VPN
* användning av en unik plats i stället för `/admin`
* god lösenordshygien

#### Ytterligare säkerhetsförbättringar

Säkerhetsförbättringar för den här versionen förbättrar efterlevnaden av de senaste säkerhetsmetoderna.

* **Ändringar i beteendet för icke-genererade cachenycklar**:

   * Icke-genererade cachenycklar för block inkluderar nu prefix som skiljer sig från prefix för nycklar som genereras automatiskt. (Icke-genererade cachenycklar är nycklar som anges via malldirektivets syntax eller `setCacheKey` metoderna or `setData` .)
   * Icke-genererade cachenycklar för block får nu endast innehålla bokstäver, siffror, bindestreck (-) och understreck (_). <!-- AC-9831 -->

* **Begränsningar för antalet autogenererade kupongkoder**. Magento Open Source begränsar nu antalet kupongkoder som genereras automatiskt. Standardmaxvärdet är 250 000. Handlare kan använda det nya konfigurationsalternativet **[!UICONTROL Code Quantity Limit]** (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) för att förhindra att systemet överbelastas med många kuponger. <!-- AC-8753 -->

* **Optimering av standardgenereringsprocessen för administratörs-URL**. Genereringen av den förvalda admin-URL:en har optimerats för ökad slumpmässighet, vilket gör att genererade URL:er blir mindre förutsägbara. <!-- AC-9028 -->

* En ny cachekonfigurationsinställning på helsidan kan hjälpa till att minska riskerna som är kopplade till HTTP-slutpunkten `{BASE-URL}/page_cache/block/esi`. Den här slutpunkten stöder obegränsade, dynamiskt inlästa innehållsfragment från Commerce layouthandtag och blockstrukturer. Den nya konfigurationsinställningen **[!UICONTROL Handles params size]** ställer in värdet för den här slutpunktens `handles` -parameter, som avgör det högsta tillåtna antalet hanterare per API. Standardvärdet för den här egenskapen är 100. Handlare kan ändra det här värdet från Admin (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**). Se [Konfigurera Commerce-programmet för att använda Varnish](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html). <!-- AC-9113 -->

* **Stöd för underresursintegritet (SRI)** har lagts till för att uppfylla PCI 4.0-kraven för verifiering av skriptintegritet på betalningssidor. Stöd för SRI (Subresource Integrity) ger integritetshashvärden för alla JavaScript-tillgångar som finns i det lokala filsystemet. Standardfunktionen för SRI implementeras bara på betalningssidorna för områdena Admin och storefront. Handlare kan dock utöka standardkonfigurationen till andra sidor. Se [Delresursintegritet](https://developer.adobe.com/commerce/php/development/security/subresource-integrity/) i _Commerce PHP-utvecklarhandbok_.<!--AC-11513-->

* **Ändringar av CSP (Content Security Policy)** - Konfigurationsuppdateringar och förbättringar av Adobe Commerce Content Security Policies (CSP) uppfyller PCI 4.0-kraven. Mer information finns i [Säkerhetsprinciper för innehåll](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) i _Commerce PHP-utvecklarhandboken_. <!--AC-11512-->

   * CSP-standardkonfigurationen för betalningssidor för Commerce Admin- och storefront-områden är nu `restrict`. Standardkonfigurationen är `report-only` för alla andra sidor.  I versioner före 2.4.7 konfigurerades CSP i `report-only`-läge för alla sidor.

   * En nonce-provider har lagts till för att tillåta körning av infogade skript i en CSP. Enonce-providern gör det lättare att skapa unika nonce-strängar för varje begäran. Strängarna kopplas sedan till CSP-huvudet.

   * Lagt till alternativ för att konfigurera anpassade URI:er för att rapportera CSP-fel för sidan Skapa order i Admin och sidan Checka ut i butiken. Du kan lägga till konfigurationen från administratören eller genom att lägga till URI:n i filen `config.xml`.

     >[!NOTE]
     >
     >Om du uppdaterar CSP-konfigurationen till läget `restrict` kan befintliga textbundna skript på betalningssidorna i Admin och storefront blockeras, vilket orsakar följande webbläsarfel när en sida läses in: `Refused to execute inline script because it violates the following Content Security Policy directive: "script-src`. Åtgärda dessa fel genom att uppdatera vitlistskonfigurationen så att nödvändiga skript tillåts. Se [Felsökning](https://developer.adobe.com/commerce/php/development/security/content-security-policies/#troubleshooting) i _Commerce PHP Developer Guide_.

* **Inbyggd hastighetsbegränsning för betalningsinformation som överförs via REST- och GraphQL-API:er**. Affärsmän kan nu [konfigurera hastighetsbegränsning](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/sales#rate-limiting) för betalningsinformation som skickas med REST och GraphQL. Detta extra skydd stöder förebyggande av kardningsattacker och kan minska antalet kardningsattacker som testar många kreditkortsnummer samtidigt. Detta är en ändring av standardbeteendet för en befintlig REST-slutpunkt. Se [Hastighetsbegränsning](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* Standardbeteendet för GraphQL-frågan [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) och REST-slutpunkten ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.7-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) har ändrats. API:erna returnerar nu alltid `true` som standard. Marknadsförare kan aktivera det ursprungliga beteendet genom att ställa in alternativet *[Aktivera inloggning med gästutcheckning](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/checkout)* i administratören på `yes`, men om du gör det kan kundinformation visas för oautentiserade användare.

### Förbättringar av plattformen

Plattformsuppgraderingar för den här versionen förbättrar efterlevnaden av de senaste säkerhetsstandarderna.

Magento Open Source 2.4.7 innehåller följande uppgraderingar:

* **PHP 8.3-kompatibilitet**. Den här versionen innehåller stöd för PHP 8.3. Magento Open Source stöder nu både PHP 8.3 och 8.2. Stöd för PHP 8.2 kommer att ges fram till det datum då tjänsten upphör i december 2025. Efter december 2025 ska alla handlare som kör 2.4.7-distributioner migrera till PHP 8.3. <!-- AC-8988 -->

Magento Open Source 2.4.7 är fortfarande kompatibelt med PHP 8.1 endast i uppgraderingssyfte. PHP 8.1 stöds inte och rekommenderas inte. Magento Open Source 2.4.7 kärnkod, alla medföljande tillägg och alla Adobe-ägda tillägg och SaaS-tjänster är kompatibla med PHP 8.3. <!-- AC-9668 -->

* **Stöd för KaninMQ 3.13**. Den här versionen är kompatibel med den senaste versionen av RabbitMQ 3.13. Kompatibiliteten kvarstår med RabbitMQ 3.11 och 3.12, som stöds till och med augusti 2024 respektive december 2024, men Adobe rekommenderade att använda Magento Open Source 2.4.7 endast med RabbitMQ 3.13. <!-- AC-9659 -->

* **Composer 2.7.x**. Kompatibiliteten med Composer 2.2.x kvarstår. <!-- AC-9663 -->

* **Stöd för lack cache 7.4**. Den här versionen är kompatibel med den senaste versionen av Varnish Cache 7.4. Kompatibiliteten är fortfarande kompatibel med versionerna 6.0.x och 7.2.x, men vi rekommenderar att du endast använder Magento Open Source 2.4.7 med Varnish Cache version 7.4 eller version 6.0 LTS. <!-- AC-9662 -->

* **Elasticsearch 8.11** kompatibilitet <!-- AC-9661 -->

* Stöd för OpenSearch 2.12 och OpenSearch 1.3 <!-- AC-9659 -->

* **Redis 7.2** <!-- AC-10811 -->

* Biblioteket `extjs` har ersatts med den senaste versionen av `jsTree`. <!-- AC-9320 -->

* `jquery/fileUpload` Biblioteket har tagits bort. <!-- AC-10569 -->

Alla JavaScript-bibliotek och NPM-beroenden i Magento Open Source kärnkod har uppdaterats till de senaste tillgängliga versionerna. Alla Laminas-biblioteksberoenden har uppdaterats till den senaste versionen som är kompatibel med PHP 8.3. <!-- AC-9667 9665 -->

#### Ytterligare uppgraderingar

* Commerce UPS XML API-gateway har migrerats till det nya [Commerce UPS REST API](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/ups) som stöder uppdateringar som UPS gör i sin [API-säkerhetsmodell](https://developer.ups.com/oauth-developer-guide). (UPS implementerar en OAuth 2.0-säkerhetsmodell (bearer tokens) för alla API:er.) Alla tidigare Commerce UPS XML API:er har tagits bort från kodbasen Magento Open Source 2.4.7. <!-- AC-8918 -->

* Magento Open Source [integration](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/fedex) med FedEx har migrerats från äldre FedEx WSDL-webbtjänster till de senaste FedEx RESTful-API:erna. WSDLS för FedEx Web Services Tracking, Address Validation och Validate Postal Codes kasseras i maj 2024. <!-- AC-1470 -->

* Stöd för den nya leveransmetoden USPS Ground Advantage. Detta är en färdig integrering med USPS nya leveransmetod, USPS Ground Advantage, som släpptes i juli 2023. Den här nya integreringen kan användas för att hämta fraktkostnader och schemaläggningsleveranser och -returer via USPS-leveranstjänsten. Leveransmetoden USPS Ground Advantage ersätter dessa fraktmetoder, som kasserades när leveransmetoden USPS Ground Advantage lanserades:

   * USPS Retail Ground
   * Pakettjänst av första klass
   * Markering av paket <!-- AC-9182 -->

* Temando fraktmoduler har tagits bort från kärnan i Magento Open Source-kodbasen. Den här funktionen är föråldrad i Magento Open Source 2.4.4. <!-- AC-8130 -->

### Förbättringar av prestanda och skalbarhet

Magento Open Source 2.4.7 innehåller följande förbättringar av Magento Open Source prestanda och skalbarhet:

* **Förbättrad hantering av** indexerare. Det nya `indexer:set-status` kommandot stöder dynamisk hantering av indexerarstatus. Administratörsanvändare kan använda det här kommandot för att ändra indexerarens status till `suspended`, `invalid`eller `valid`. Den här funktionen är särskilt användbar för att hantera systemprestanda under omfattande bulkoperationer, till exempel produktimport eller uppdateringar, genom att tillåta kontroll över när indexerare automatiskt utlöses av systemets cron-jobb. Se [Hantera indexerarna](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/manage-indexers.html).

* **Produktlistningssida för komplexa produkter med många alternativ**. Laddningstiden har förbättrats för produktlistningssidor som innehåller komplexa produkter med över 100 alternativ. Prestandan för GraphQL-begäranden om att lista produkter efter kategori har också förbättrats. <!-- ACPT-1683 -->

* **Prestandaförbättringar för försäljningsregel**. Förbättrad prestanda för företagsdistributioner med många (cirka 100 000) aktiva försäljningsregler. Företagsinstallationer som implementerar kampanjer i hög grad använder ofta många aktiva kundvagnsregler. Dessa typer av företagsdistributioner som kör Magento Open Source 2.4.7 kommer inte att se någon prestandaförsämring relaterad till antalet konfigurerade kundvagnsprisregler under utcheckningsoperationer. <!-- ACPT-1198 -->

* **Snabbare sparåtgärder för konfigurationer på butiksnivå för distributioner med många butiker**. Det kan ta lång tid att spara konfigurationsinställningar i distributioner med fler än 500 butiker. Den nya [Async Config-modulen](../../../performance/configuration.md#asynchronous-configuration-save) möjliggör asynkrona konfigurationsåtgärder för att spara genom att köra ett cron-jobb som använder en konsument för att bearbeta sparåtgärden i en meddelandekö. AsyncConfig är inaktiverat som standard.

* **Snabbare generering av config cache för stora konfigurationer**. Kommandot `bin/magento cache:clean config` förvärvar nu konfigurationscachen när konfigurationscachen är aktiverad. Detta minskar den drifttid som krävs för att generera config-cachen för stora konfigurationer. Åtgärder för att spara konfigurationer rensar inte längre `config_scopes`-cachen innan data skrivs till cachen, vilket också minskar den tid som andra begäranden låses ut när konfigurationsdata skrivs.

### Braintree

* **[!DNL Vaulted PayPal]och [!DNL Pay Later] ändringar** – inloggade kunder som tidigare har arkiverat/lagrat sitt PayPal-konto har möjlighet att betala med:
   * [!DNL Pay Now] (utan att behöva logga in på sitt [!DNL PayPal] konto kan användaren betala med sitt standardkort)
   * Betala med en annan finansieringskälla
   * Betala med ett annat konto
   * [!DNL PayPal Pay Later]- eller [!DNL PayPal Credit]-knapp

* **3DS-stöd för[!DNL Google Pay]** - Inkluderat stöd för 3DS-verifiering för [!DNL Google Pay] icke-tokeniserade kort. Mer information finns i [Braintree-dokumentationen](https://developer.paypal.com/braintree/docs/guides/3d-secure/client-side/android/v3#using-3d-secure-with-google-pay).

* **[!DNL Vault Apple Pay Payments]**– Tillåt inloggade kunder att valva/lagra sina [!DNL Apple Pay] betalningar på sitt handelsbutikskonto för att använda på framtida transaktioner. Detta minskar antalet steg i kassan och skapar en snabbare kassaupplevelse för den återkommande kunden.

* **[!DNL Vault Google Pay Payments]**– Tillåt inloggade kunder att valva/lagra sina [!DNL Google Pay] betalningar på sitt handelsbutikskonto för att använda på framtida transaktioner. Detta minskar antalet steg i kassan och skapar en snabbare kassaupplevelse för den återkommande kunden.

* **[!DNL Vault Venmo Payments]**– Tillåt inloggade kunder att valva/lagra sina [!DNL Venmo] konton på sitt handelsbutikskonto för att använda på framtida transaktioner. Detta minskar antalet steg i kassan och skapar en snabbare kassaupplevelse för den återkommande kunden.

* **[!DNL Vault ACH Payments]**– Tillåt inloggade kunder att valva/lagra sina ACH-betalningar på sitt handelsbutikskonto för att använda på framtida transaktioner. Detta minskar antalet steg i utcheckningen och ger en snabbare utcheckningsupplevelse för den kund som returnerar produkten.

* **[!UICONTROL Express Payment]-knappar högst upp i utcheckningen** - För att få en snabbare utcheckning har vi introducerat [!DNL Express Payment] alternativ i början av utcheckningen. Kunder kan nu betala med [!DNL PayPal], [!DNL PayPal Pay Later], [!DNL Apple Pay] och [!DNL Google Pay Express] betalningar.

* **[!DNL Braintree]versionsinformation och supportlänkar i Admin Configuration** - Nu kan marknadsförare länka direkt från Commerce Admin till Braintree support och versionsinformation online.

* **GraphQL-stöd för alla [!DNL Braintree] betalningsmetoder utom[!DNL Venmo]** - Fler konfigurationer visas i GraphQL API. Detta är särskilt användbart för headless-program.

* **[!DNL Vaulting]betalningar i kontoområdet** - Inloggade kunder kan nu [vault/store](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree#step-3-complete-the-advanced-settings) nya kredit-/debetkort och [!DNL PayPal] konton i kundkontoområdet. Tidigare kunde kunderna bara vault/store när de sparade sina betalningar för senare bruk när de slutförde en transaktion i kassan, nu kan de vault new credit/debit cards and PayPal accounts without need to create a new transaction.

* **Friktionslösa transaktioner** - Friktionslösa transaktioner snabbar upp betalningsprocessen genom att minska antalet kundklick/steg för att slutföra en online-transaktion med kredit-/betalkort. Tidigare (när 3DS var aktiverat) var alla kunder utmanade 3DS. Med den nya funktionen Friktionslösa transaktioner blir kunderna bara utmanade för 3DS när banken begär det. Detta minskar antalet övergivna varukorgar, ökar konverteringsgraden och leder till ökad försäljning.

* **Tvivla webhooks** - När en kund bestrider en transaktion i Braintree skickas tvistens status till Commerce. Det är sökbart i rutnätet **[!UICONTROL Sales]** > **[!UICONTROL Order]** och kopplat till varje ordning.

### GraphQL

Magento Open Source 2.4.7 innehåller förbättrade GraphQL-cachningsfunktioner, stöd för GraphQL-schema för anpassade attribut, stöd för headless-orderannullering och förbättrad cachning för lösare.

* **Mer flexibel kundvagnshantering**. mutationen `clearCart` rensar nu innehållet i en angiven kundvagn i en enda åtgärd. Den ersätter mutationen `clearCustomerCart`, som har tagits bort. <!-- LYNX-254 -->

* **Förbättringar av mutationer för att skapa kundvagn.** Mutationen `createGuestCart` har lagts till för att ersätta den föråldrade `createEmptyCart` mutationen. Tidigare, om du använde `createEmptyCart`, kunde du inte avgöra om kundvagnen var för en gäst eller en inloggad kund. <!-- LYNX-224 -->

* **Beställningsartiklar innehåller nu produktbilder**. `OrderItemInterface` Exponerar produktbilder, vilket gör att bilder kan associeras med beställda produkter och laddas mer effektivt. [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **Utökat stöd för cachelagring** av matchare. Följande GraphQL-frågelösare är nu tillgängliga i GraphQL Resolver Results Cache, vilket förbättrar prestanda när frågor skickas med POST-begäranden:

   * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
   * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **Stöd för annullering av beställning**. Mutationen [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) gör det möjligt för en kund att annullera en order genom att skicka dess identifierare och en orsak till annulleringen. <!-- LYNX-197 -->

   * Fälten new `order_cancellation_enabled` och `order_cancellation_reasons.description` response i `storeConfig`
Fråga stöd för användarinitierade begäranden om annullering av beställningar. Se [Fråga en butiks konfiguration för annullering av order](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **Förbättrat stöd för anpassade attribut**. Stöd för anpassade GraphQL-attribut har förbättrats genom att API-data har utökats med stöd för alla attributtyper. GraphQL EAV-attributschemat har nu stöd för att utöka kundattribut och kundadressobjekt i Admin och hämta dem med GraphQL. Specifika förbättringsområden är: <!-- LYNX-61 110-->

   * utökat/tillagt stöd för anpassade attribut inom specifika områden som kund- och kundadress
   * Cachelagring har lagts till för anpassade attribut
   * Förbättrat stöd för befintliga anpassade attribut för produkter

* **Förbättrade GraphQL-cachefunktioner förbättrar sidinläsningshastigheten**. Cachelagringsfunktioner har lagts till i dessa frågor, vilket förbättrar hastigheten på sidinläsningstiden för de flesta PWA-sidor:

   * [tillgängligaButiker](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
   * [länder](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) och [land](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
   * [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
   * [valuta](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
   * [customAttributeMetadata](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **Förbättrade prestanda för GraphQL parser**. GraphQL parserprestanda har förbättrats genom att antalet gånger som parsningsmetoden anropas per begäran har reducerats. Den kallas nu en gång. Tidigare anropades parsern minst tre gånger.

#### Nya fält för befintliga mutationer

* Fältet har lagts till `quickorder_active` i [frågorna storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) och [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) . Det här fältet anger om snabborderfunktionen är aktiverad.

* Följande fält har lagts till i mutationerna `setBillingAddressOnCart` och `setShippingAddressesOnCart` :

   * `fax`
   * `middlename`
   * `prefix`
   * `suffix`

#### Nya frågor och mutationer

* [`attributeForms`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) fråga<!-- LYNX-151 -->
* [`attributesList`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) fråga<!-- LYNX-150 -->
* [`guestOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order/) fråga
* [`guestOrderByToken`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order-by-token/) fråga
* [`recaptchaFormConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/recaptcha-form-config/) fråga
* [`cancelOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutation <!-- LYNX-172 -->
* [`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) fråga
* [`applyCouponsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/)-mutation
* [`confirmEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/)-mutation
* [`createGuestCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-guest-cart/)-mutation
* [`estimateShippingMethods`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-shipping-methods/)-mutation
* [`estimateTotals`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-totals/)-mutation
* [`removeCouponsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-coupons/)-mutation

#### Föråldrade frågor och mutationer

* `clearCustomerCart` mutation <!-- LYNX-254 -->
* [`createEmptyCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) mutation <!-- LYNX-224 -->
* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) fråga
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/) fråga

### Inventory management

Inventory management (v1.2.7) innehåller verktyg för att hantera produktlager. Den här communityutvecklade funktionen ingår i Adobe Commerce och Magento Open Source kärnkod.

### Magento Open Source Extension-metapaket

Den här versionen innehåller metapaketet för Magento Open Source Extension v1.0.0, som automatiskt paketerar utvalda Magento Open Source-tillägg med den här huvudversionen. Den version av det här tillägget som ingår i det här metapaketet installeras när `composer update` körs, vilket förenklar processen att uppgradera tillägget när du uppgraderar till den senaste kärnversionen. Tillägget behåller ett oberoende releaseschema.

Metapaketet Magento Open Source Extension för Magento Open Source 2.4.7 innehåller följande tillägg:

* [Adobe Commerce-integrering med Adobe IMS](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)
* [Betalningstjänster](https://experienceleague.adobe.com/docs/commerce/payment-services/guide-overview.html)

Framtida versioner av det här tilläggspaketet kommer att innehålla ytterligare tillägg.

### PWA Studio

PWA Studio v14.0 är kompatibel med Magento Open Source 2.4.7-beta1. Det innehåller flera förbättringar som förbättrar tillgängligheten. Information om felkorrigeringar finns i [PWA Studio-versioner](https://github.com/magento/pwa-studio/releases). Se [Versionskompatibilitet](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) om du vill se en lista över PWA Studio-versioner och deras kompatibla grundversioner för Magento Open Source.

### Webb-API-ramverk

I den här versionen introduceras två nya REST-slutpunkter som ger en lösning för en begränsning med REST API:t `GET` och `POST V1/products/attributes` slutpunkter. Dessa slutpunkter returnerar samma värde för attributet `is_filterable` för både alternativen `Filterable(with results)` och `Filterable(no results)` för alternativet **[!UICONTROL Use in Layered Navigation]**. (Attributegenskapen `is_filterable` är av typen `Boolean`, vilket inte tillåter inställning av egenskapen till `Filterable(no results)`.)

Två nya REST-slutpunkter har implementerats som en lösning:

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. Sökvägsparametrar: `attributeCode` (`String`) och `isFilterable` (`int` värdena är: 0 är Nej; 1 är `Filterable (with results)`; 2 är `Filterable (no results)`).
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. Sökvägsparametrar: `attributeCode` (`String`).<!-- ACP2E-2275 -->

## Åtgärdade problem

Vi har åtgärdat hundratals problem i Magento Open Source 2.4.7 Core-koden. En deluppsättning av de åtgärdade problemen som ingår i den här versionen beskrivs nedan.

### Installation, uppgradering, driftsättning

<!-- AC-10396 -->

* Onödig cachehantering har tagits bort från konfigurationsprocessen. Tidigare skrev Magento Open Source konfigurationen till disken i onödan när `bin/magento setup:db-data:upgrade` eller `bin/magento setup:upgrade` kördes, vilket orsakade problem med vissa moduler under installationen. [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* Distributionsproblem på grund av otillräckligt minne och stora tabeller har åtgärdats. Kommandot `bin/magento setup:upgrade` misslyckas inte längre på grund av minnesöverskrivna fel som är relaterade till stora MySQL-tabeller.

<!-- ACP2E-2198 -->

* `bin/magento setup:install` slutförs nu när `app/etc/config.php` har tagits bort. Tidigare genererades inte den saknade filen om under installationen och ett fel uppstod i Magento Open Source. [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` har omarbetats för att kunna köras när en ny modul som installerar både tabeller och associerade `mview`-indexerare installeras. [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* Databasåterställningen misslyckas inte längre på grund av ett avgränsningsfel. Tidigare inträffade detta fel i Magento Open Source när `bin/magento setup:rollback --db` kördes: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* Kommandot `bin/magento setup:upgrade` misslyckas inte längre med den här typen av MINSQL-minnesbegränsningsrelaterat fel: `PHP Fatal error: Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. Flervalsattributmigreringen har optimerats för att ta mindre minne under `setup:upgrade`.

<!-- ACP2E-1751 -->

* Nu fungerar säkerhetskopiering av databaser som väntat både på Admin- och kommandoraden. Tidigare inträffade följande fel i Magento Open Source: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 1605-->

* Om du kör `setup:config:set` utan att ange parametern `--lock-db-prefix` raderas inte längre det aktuella värdet från filen `env.php`.

<!-- ACP2E-1498 -->

* Slutarkonfigurationen har uppdaterats för att förhindra att gästanvändare får åtkomst till cachelagrat innehåll relaterat till andra kundgrupper.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` slutförs nu när en ny modul som installerar både tabeller och associerade `mview`-indexerare installeras.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` visar nu ett mer informativt felmeddelande när ett meddelandeköämne inte innehåller något ämnesnamn. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` visar nu ett mer informativt felmeddelande när sammanfogade XML-filer är ogiltiga. Felmeddelandet innehåller nu filnamnet.

### Administratörsgränssnitt

<!-- AC-10998 -->

* Diagram är nu inaktiverade som standard på instrumentpanelen. [GitHub-38430](https://github.com/magento/magento2/issues/38430)

<!-- AC-9423 -->

* Menyn Admin Sales visar nu undermenyer på rätt sätt. Tidigare fungerade inte kolumnbrytningen korrekt och vissa undermenyer visades inte. [GitHub-37812](https://github.com/magento/magento2/issues/37812)

<!-- AC-3122 -->

* Alternativ på den nedrullningsbara menyn **[!UICONTROL Select]** visas nu i Admin **[!UICONTROL Content]** > **[!UICONTROL Pages]** när flera sidor är markerade i rutnätet. [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-9209 -->

* Korrigerade sökvägen till standardvärdet `system/dashboard/enable_charts` i konfigurationsinställningarna. Diagram visas nu som förväntat i Admin. [GitHub-37668](https://github.com/magento/magento2/issues/37668)

<!-- AC-9632 -->

* Åtgärdat visningsproblem med rutnät för administratörskunder. Tidigare fanns inte rutnätskolumner helt på den visade sidan.

<!-- AC-2916 -->

* Hovringsfärger används nu som förväntat på raderna i statiska rutnät för administratörer. [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* Arbetsflödet för utcheckning visar inte längre en varning när en kund anger ett postnummer för Grekland som inte innehåller ett tomt utrymme. [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* Länken Admin `It's time to change your password` dirigeras nu om till sidan Ändra administratörslösenord som förväntat. [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- AC-9164 -->

* Sidtitelsuffix ingår nu i både taggen `title` och taggen `meta title` för produktsidor. [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* Villkoret för produktens lagerstatus tillämpas nu korrekt för relaterade produktregler.

<!-- ACP2E-2083 -->

* Knappen **[!UICONTROL Login as Customer]** visas nu korrekt på mobila enheter.

<!-- ACP2E-2146 -->

* Adobe Commerce visar inte längre knappen Admin **[!UICONTROL Add new customer group]** om den inloggade administratörsanvändaren saknar behörighet att lägga till en ny kundgrupp.

<!-- ACP2E-2286 -->

* En administratörsanvändare med begränsade behörigheter kan nu spara en underordnad produkt vars överordnade produkt har tilldelats ett annat omfång. Tidigare ogiltigförklarade Commerce cachen för en överordnad produkt som inte tilldelats det omfång i vilket den underordnade produkten ändrades.

<!-- ACP2E-2042 -->

* Administratörsanvändare kan nu växla mellan administratörsfiltervyer utan att visa data som är skadade eller har gått förlorade. [GitHub-37529](https://github.com/magento/magento2/issues/37529)

### Paketprodukter

<!-- AC-8966 -->

* Frågan `customerCart` returnerar nu alla tillämpade rabatter på paketprodukter som förväntat. Tidigare returnerades de totala rabatterna som tillämpades på en paketprodukt som noll.

<!-- ACP2E-2618 -->

* På produktinformationssidorna visas nu rätt pris för paketprodukter för vilka en rabatt på 100 % har tillämpats. Tidigare tillämpade Magento Open Source inte 100 % rabatt på paketpriser.

<!-- ACP2E-2377 -->

* Prisreglerna gäller nu för produktpaket istället för för för varje underordnad produkt för dynamiska paketerade produkter.

<!-- ACP2E-1650 -->

* Ett fel som inträffar när du använder slutpunkten `POST V1/shipment` för att skapa en leverans som innehåller en paketprodukt har korrigerats. Slutpunkten lägger nu till objekt som förväntat och returnerar inte längre det här felet: `The shipment couldn't be saved`.

<!-- ACP2E-1650 -->

* Du kan nu använda API-vägen `GET V1/shipment/` för att skapa en leverans med en paketprodukt när produkten har leveranstypen **[!UICONTROL together]** angiven. Paketprodukter valideras nu också baserat på deras leveranstypsegenskap.

<!-- ACP2E-2038 -->

* Kunderna kan nu redigera mängden av en paketprodukt i sin kundvagn. Tidigare hanterades inte null-värden för `ItemId` när produkter redigerades i butikens kundvagn och ett fel visades. [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* Paketprodukter kan nu läggas till i en administratörsorder med SKU:er som innehåller ett snedstreck (`/`). Tidigare kunde inte administratörsanvändare använda den här metoden för att lägga till produkter i en Admin-order, och Magento Open Source genererade ett JavaScript-fel.

<!-- ACP2E-1799 -->

* Administratörsanvändare kan nu ange decimalstandardvärden för nyligen tillagda paketalternativ när **[!UICONTROL Qty Uses Decimal]** är aktiverat för motsvarande enkla produkt. Tidigare kunde decimalvärden bara anges för sparade markeringar.

<!-- ACP2E-1347 -->

* Optimerad prestanda för att spara paketprodukter med ett stort antal alternativ

<!-- ACP2E-1478 -->

* Paketprodukter importeras nu utan att duplicera SKU:er i produktalternativ. Tidigare skapade Magento Open Source flera SKU:er i produktalternativen när du importerade paketprodukter med dubblettposter.

<!-- ACP2E-1388 -->

* Paketproduktpriset beräknas nu korrekt när en av produkterna i paketet inte finns i lager. Tidigare togs en produkt som ingick i paketet bort från prisberäkningen om den inte fanns i lager.

<!-- ACP2E-1503 -->

* Paketprodukter visas nu som färdiga lager när den sista av deras underordnade produkter köpts. Tidigare visades paketprodukter som lagrade i butiken när deras enkla produkter inte fanns i lager.

<!-- ACP2E-1443 -->

* Prestandaproblem när paketprodukter med alternativ som inte krävs läggs till i kundvagnen med mutationen `addBundleProductsToCart` har lösts.

<!-- ACP2E-1264 -->

* Frågan `categoryList` returnerar nu alla paketalternativ som förväntat när konfigurationsinställningen **[!UICONTROL Show out-of-stock products]** är aktiverad. Tidigare inkluderades inte optioner som inte finns i lager i frågesvaret.

<!-- ACP2E-1345 -->

* Paketera produkter som skapats med `POST V1/products` nu lyckas när katalogprisomfånget är inställt på `website`. Tidigare inträffade en överträdelse av integritetsbegränsningen. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- AC-11411 -->

* Kategorierna är nu synliga för kunder i butiker där cachen är inställd på Fast CDN (**[!UICONTROL Caching Application=Fastly CDN]**). Detta påverkade både gästkunder och registrerade kunder.

<!-- ACP2E-2070 -->

* Cachelagra cookies efter inloggning är nu desamma efter att du har bläddrat på webbplatsen. Tidigare skickade inloggningskontrollen fel cachecookie och sidorna kan ha cachelagrats flera gånger.

<!-- ACP2E-1840 -->

* Svar från GraphQL GET-åtgärder på CMS-sidor som innehåller CMS-block rensas nu som förväntat i Fastly-cachen. Efterföljande schemauppdateringar visar nu korrekt uppdateringsinnehåll för dessa sidor.

<!-- ACP2E-1524 -->

* Sidcachen rensas nu som förväntat för en överordnad produkt när en av dess underordnade produkter har sparats från administratören. En plugin-kontroll har införts för att uppnå cacheogiltigförklaring för konfigurerbara varianter, som liknar andra produkttyper, oavsett indexerarstatus (schemalagd eller realtid). Tidigare uppdaterades inte priserna korrekt i butiken efter att en konfigurerbar variant uppdaterades från administratören.

<!-- ACP2E-1454 -->

* En cachelagringsmekanism för AWS inloggningsuppgifter har lagts till. En leverantör av autentiseringsuppgifter använder nu Commerce-cachen för att cachelagra autentiseringsuppgifter som hämtats från AWS för EC2-konfiguration.

<!-- AC-7639 -->

* Det plugin-program vars syfte är att lägga till den konfigurerbara cachetaggen när en enkel produkt som är kopplad till en konfigurerbar produkt sparas fungerar nu som förväntat. Alla relevanta konfigurerbara cachetaggar tas bort som förväntat när en enkel produkt uppdateras av `POST V1/products`. Tidigare uppdaterades inte alla priser i butiken, och cacheminnen måste rensas manuellt. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Kundvagn och kassan

<!-- ACP2E-2658 -->

* Magento Open Source optimerar nu prestanda genom att inte läsa in användarspecifika offertdata när helsidessidor som PDP- (Product Details Pages) och CMS-sidor genereras när beständig kundvagn är aktiverad. Tidigare lästes användarspecifika sessioner in i onödan och data citerades när dessa sidor genererades, vilket påverkade prestandan.

<!-- ACP2E-2684 -->

* Anpassade adressattribut sparas nu som förväntat i databasen. Tidigare har attributvärden som sparats i databasen prepensats med attributkod.

<!-- ACP2E-2517 -->

* Genereringen av filtertext för kundvagnsregler för produktattribut har förbättrats. Enskilda produkter laddas inte längre flera gånger.

<!-- AC-8920 -->

* Magento Open Source visar nu ett informativt felmeddelande när ett fel inträffar under utcheckningen och inte längre återgår till ett tidigare utcheckningssteg. Tidigare returnerades shopparen till leveranssidan.

<!-- ACP2E-2520 -->

* `cart`-frågan returnerar inte längre leveransmetod och adress för virtuella varukorgar. Tidigare, när en vagn innehöll både fysiska och virtuella produkter och alla fysiska produkter togs bort, fortsatte kundvagnsfrågan att inkludera leveransinformation.

<!-- ACP2E-2267 -->

* Magento Open Source visar nu informativa meddelanden när en tilläggshandling utlöses. Tidigare visades `The requested qty is not available` inte alltid på det sätt som krävs i butiken.

<!-- ACP2E-2166 -->

* Inläsningstiden för utcheckningssidan har förbättrats för kunder med stora adressböcker. Magento Open Source bearbetar nu bara det antal kundadresser som har angetts i inställningen **[!UICONTROL Customer Addresses Limit]**. Tidigare laddade Magento Open Source hela adressboken.

<!-- ACP2E-2174 -->

* Produktkvantitet kan nu ändras i varukorgen som förväntat för varor som finns i lager när en artikel är slut i lager. Tidigare kunde kunderna inte ändra produktkvantiteten för några artiklar när någon inte fanns i lager.

<!-- ACP2E-2269 -->

* Produktattributfiltret `AdvancedSalesRule` fungerar nu korrekt med serverdelstypen för decimalattribut. Därför fungerar kundvagnsreglerna med `Coupon Type` inställd på **[!UICONTROL No Coupon]** nu som förväntat.

<!-- ACP2E-2376 -->

* Hela kundvagnsrabatten tillämpas nu som förväntat på varukorgar som innehåller både paketerade och konfigurerbara produkter.

<!-- ACP2E-2092 -->

* Cookies för kundavsnitt följer nu cookie-filens domäninställning. Tidigare uppdaterades inte minivagnen som förväntat i butiker som innehöll underdomäner, även om sessionen delades.

<!-- AC-9340 -->

* Att skicka en order till flera adresser utlöser inte längre ett fel under bearbetningen av region-ID.

<!-- AC-8853 -->

* Fasta rabattbelopp som används på kundvagnsnivå är nu korrekta.[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* Kuponger tillämpas nu framgångsrikt på en order när en kund använder kupongen efter att ha valt den fasta fraktmetoden där en varukorgsprisregel med leveransmetod som ett villkor gäller. Tidigare visade kundvagnssidan felet Kupongen är inte giltig och kupongen tillämpades inte. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-2044 -->

* Kuponger tillämpas nu korrekt på en beställning när en kund använder kupongen efter att ha valt leveransmetoden där en kundprisregel med leveransmetoden inställd som villkor gäller. Tidigare visade kundvagnssidan att kupongen inte är ett giltigt fel och kupongen tillämpades inte. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* Kryssrutan **[!UICONTROL My billing and shipping address are the same]** förblir nu markerad som standard när en kund använder Chrome Autocomplete för att fylla i sin leveransadress och sedan klickar på **Nästa** innan leveransmetodblocket läses in igen. [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* Värdet `applied_rule_ids` i tabellen `quote_item` innehåller nu en korrekt lista med tillämpade regel-ID:n. Tidigare innehöll det här värdet bara det senast använda regel-ID:t.

<!-- ACP2E-2025 -->

* Mini-cart och kunddata i lokala lager återställs nu när en session tas bort från servern. Tidigare visades dessa data fortfarande när sessionsfilen togs bort.

<!-- ACP2E-1763 -->

* Diskreta kort sammanfogas inte längre av misstag från administratören när beständig kundvagn är aktiverad.

<!-- ACP2E-1580 -->

* Kundvagnsskatt och leveransberäkning återspeglar nu korrekt standarddestinationskonfigurationen. Tidigare visades endast ZIP-värdet i kundvagnen under **[!UICONTROL Estimate Tax and Shipping]** när du konfigurerade standardinställningar för momsberäkning och specificerade delstat/region och ZIP. Detta är ett resultat av att Magento Open Source har angett region-ID:t till undefined innan villkorssatsen som anger standard-region-ID:t från administratören anropas.

<!-- ACP2E-1547 -->

* Magento Open Source genererar inte längre det här felet vid utcheckning när en beständig kundvagn är aktiverad: `Invalid state change requested`. Tidigare skapades flera order med samma `quote_id` ibland när det här felet uppstod.

<!-- ACP2E-1456 -->

* Minivagnen visar nu paketpriser som återspeglar konfigurationsinställningarna för kundvagnen. Tidigare ingick alltid moms i priset på paketprodukter.

<!-- AC-7503 -->

* Fraktuppskattningen från kundvagnssidan är nu korrekt. `collectShippingRates` har nu bara angetts en gång. Tidigare har leveransberäkningen duplicerats. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* Frågan `cart` returnerar inte längre ett fel när en produkt i den angivna varukorgen är slut i lager. Tidigare kunde kunder som använde den här frågan för att göra ett köp inte slutföra sitt köp när en vara var slut i lager och deras kassasida var tom.

<!-- ACP2E-1459 -->

* Gäst-API-begäranden till `POST V1/guest-carts/<cartId>/shipping-information` returnerar inte längre statusen `cancel` om sidan läses in igen under inloggning i en mobilmiljö. Tidigare inträffade ett 500-fel i Magento Open Source och det här undantaget loggades: `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* Rätt till fri frakt beräknas nu som förväntat när villkoret **[!UICONTROL Subtotal (Excl. Tax)]** för kundvagnsregler tillämpas. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* Frågan `cart` returnerar nu korrekt nivåpris för en produkt. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- AC-1162 -->

* Informativa felmeddelanden har lagts till på utcheckningssidan för att vägleda kunderna när tillämpningen av en kupong på leveranssidan står i konflikt med den valda leveransmetoden. Tidigare sa ett meddelande till kunderna att de skulle återvända till föregående sida.

<!-- ENGCOM-8387 -->

* Autentiserings-popup-fönstret initieras nu bara när det behövs i stället för när gästutcheckning är aktiverat. Den initieras nu när gästshopparen försöker gå vidare till kassan och gästutcheckningen inaktiveras. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Kundprisregel

<!-- AC-2054 -->

* Produktdelvalsvillkoret för kundprisregel innehåller nu alternativet `total (incl.tax)` som förväntat. [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* Villkoret för katalogprisregeln `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` fungerar nu korrekt med attribut för kategori och SKU. Tidigare tillämpades inte detta villkor korrekt i logiken för kundvagnspriskuponger, och ogiltiga kuponger tillämpades på beställningar. [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* Du kan nu spara en ny varukorgsprisregel med `Magento_OfflineShipping` tillägget inaktiverat. Tidigare kastade Magento Open Source det här felet: `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* Regler för kundvagnspris tillämpas nu som förväntat när en kundvagnsprisregel som är relaterad till en leveransmetod har konfigurerats för butiken och denna fraktmetod ändras till en annan i kassan. Tidigare `applied_rule_ids` ändrades aldrig värdet i `sales_order_item` tabellen och regeln för kundvagnspris tillämpades inte på ordern.

<!-- AC-2044 -->

* Kuponger tillämpas nu korrekt på en beställning när en kund använder kupongen efter att ha valt leveransmetoden där en kundprisregel med leveransmetoden inställd som villkor gäller. Tidigare visades felet `Coupon is Not valid` på kundvagnssidan och kupongen tillämpades inte. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

### Katalog

<!-- AC-10746 -->

* Om du kör `bin/magento cache:clean` eller `bin/magento cache:flush` rensas inte längre hela den inbyggda eller den fullständiga sidocachen för lack om inget annat anges. [GitHub-38301](https://github.com/magento/magento2/issues/38301)

<!-- ACP2E-2257 -->

* Merchants kan nu använda Product Carousel för att skapa CMS-block när `catalog_product_price dimensions-mode` är inställt på `website`. Magento Open Source sparade inte blocket tidigare och utlöste detta SLQ-fel: `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* Magento Open Source visar inte längre dubbletter av bilder när produktfärgen ändras på en produktdetaljsida.  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* Optimerade algoritmen för att synkronisera webbplatsspecifika värden efter att ha lagt till en ny butik eller ändrat en befintlig i stora miljöer med flera butiker.

<!-- ACP2E-2631 -->

* Rensningsprocessen för cachade bildfiler har förbättrats för att undvika att det skapas dolda kataloger i mappen `pub/media/catalog/product` . Tidigare ledde dolda kataloger till problem med diskutrymme under rensningsåtgärder. Åtgärden kunde avslutas, vilket lämnade efter sig tillfälliga dolda kataloger som aldrig togs bort.

<!-- AC-10316 -->

* Paketproduktpriser beräknas nu korrekt och ett problem med åtgärdsordningen vid beräkning av priser har lösts. [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* En onödig sats har tagits bort från `catalog_product_price` indexfrågor, vilket har förbättrat indexerarens prestanda i butiker med stora kataloger. [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Magento Open Source infogar inte längre produktbeskrivningstext i fältet **[!UICONTROL Meta Description]** på produktinformationssidan när det här fältet har lämnats tomt. Tidigare visades HTML i fältet Meta **[!UICONTROL Description]** när en produktbeskrivning innehöll HTML-kod som genererades av Page Builder eller en annan HTML-redigerare, och du kunde inte lämna det här fältet tomt.

<!-- ACP2E-2308 -->

* Konfigurerbara produktalternativ på PDP-sidor för konfigurerbara produkter påverkas inte längre av andra konfigurerbara produktalternativ på sidan. Tidigare utlöstes inte längre ett undantag när det finns en produktkarusell på informationssidan för konfigurerbara produkter med nedrullningsbara attribut. Konfigurerbara produktalternativ kunde inte väljas när andra konfigurerbara produkter med färgrutealternativ fanns på sidan.

<!-- ACP2E-2260 -->

* Nyligen visad produktinformation visas nu i enlighet med konfigurationen av butiksvyn. Tidigare uppdaterades inte den nyligen visade produktdatan per butiksvy, inklusive namn och önskat språk.

<!-- ACP2E-2296 -->

* Vimeo-videor spelas nu upp som väntat på produktsidor i mobilvyn i Chromium-baserade webbläsare.

<!-- ACP2E-1959 -->

* Kommandot `bin/magento catalog:images:resize` genererar nu produktbilder korrekt för de produkter som har tilldelats en anpassad webbplats med ett anpassat tema.

<!-- ACP2E-1982 -->

* Metadata med `NULL` eller `NOT NULL` värden sparas nu för standardarkivet enligt kryssrutan **Använd standardvärde** som förväntat. Tidigare sparades inte metadata med värdet `NULL` när kryssrutan avmarkerades.

<!-- ACP2E-2093 -->

* Handlare kan nu ta bort en befintlig bild från informationssidan och sedan överföra en ny bild med samma namn. Tidigare visades inte rätt bild på butikens produktsida.

<!-- ACP2E-2128 -->

* Frågan `productDetail` returnerar nu produktnamnet i stället för null när produktbildattributet `alt` är tomt.

<!-- ACP2E-2215 -->

* Beställningar som innehåller både nedladdningsbara och fysiska produkter innehåller nu fungerande länkar till den nedladdningsbara produkten så snart beställningen är klar. Tidigare var länkar till nedladdningsbara produkter inte tillgängliga förrän de fysiska produkterna i samma beställning levererades.

<!-- ACP2E-2343 -->

* URL-omskrivningar uppdateras nu när en kategori flyttas från en butik/rotkategori till en annan butik/rotkategori. Föråldrade databasposter tas nu bort när underkategorierna överförs till nya överordnade kategorier. Databasen innehåller nu bara relevanta poster. Tidigare uppdaterades inte `url_path` med rätt lagrings-ID.

<!-- ACP2E-2152 -->

* REST-slutpunkten `V1/products/<sku>/media` kan nu bearbeta samtidig uppladdning av flera mediebilder. Tidigare, när flera förfrågningar bearbetades samtidigt, skapades inkonsekventa data, och Magento Open Source kastade ett fel när dessa data sparades i databasen.

<!-- ACP2E-2219 -->

* Prestanda för partiell omindexering för indexerarna Kategoriprodukter och Produktkategorier har förbättrats. Tidigare `indexer_update_all_views` körde cron-jobbet omindexerare flera gånger per enskild produkt eller kategori.

<!-- ACP2E-2043 -->

* När produktlagerstatus automatiskt uppdateras till lagerbrist baserat på lagerkonfiguration (kvantitet) uppdateras lagerstatus till lagerstatus när lagerkvantiteten uppdateras. Tidigare ignorerades inställningen `stock_status_changed_auto` när en produkts Stock-konfiguration uppdaterades till i lager.

<!-- AC-8904 -->

* Sortering av verktygsfält fungerar nu som väntat på söksidor när inställningen **[!UICONTROL Remember Category Pagination]** är aktiverad. [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* Flervalsattribut sparas nu som förväntat när kryssrutan **[!UICONTROL Use Default Value]** i butiksvyn är markerad. Tidigare var kryssrutan avmarkerad när produkten redigerades och standardvärdet sparades.

<!-- ACP2E-1878 -->

* Administratörsanvändare med begränsad webbplatsåtkomst kan nu lägga till bilder i en produkt som omfattas av deras omfång. Om administratörsanvändaren inte har åtkomstbehörighet till produkten visas ett informativt meddelande i Magento Open Source. Tidigare gick det inte att lägga till bilder i produkter som administratörsanvändare med begränsad webbplatsåtkomst hade tillgång till.

<!-- AC-6761 -->

* Magento Open Source visar nu rätt namn efter att ha sorterat produkter efter namn i Admin > **[!UICONTROL Category]** > **[!UICONTROL Products in category]** i multibutiksdistributioner där produktnamnen varierar mellan olika butiker. [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* mutationen `addProductsToCart` returnerar nu anpassningsbara alternativ med data. Tidigare returnerades bara tomma anpassningsbara alternativ. [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1943 -->

* Status för restorder av produkter visas nu korrekt i butiken. Tidigare identifierades produkter som var tillgängliga för leverans felaktigt som beställda.

<!-- ACP2E-1994 -->

* Exporterade produkter har nu rätt `manage_stock`-värde när värdet `use_config_manage_stock` är lika med `1`. Tidigare var standardvärdet felaktigt.

<!-- ACP2E-1948 -->

* Åtkomst till nedladdningsbara produkter från administratören resulterar inte längre i ett fel när administratörsanvändaren ändrar butiksvyn från den vy som användes när produkten skapades till en annan butiksvy. Produktpriser konverteras nu till flyttal när en administratörsanvändare byter butiksvy från alla butiksvyer till standardbutiksvyn. Tidigare kastade Magento Open Source ett fel. [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1479 -->

* Ett varningsmeddelande visas inte längre i Magento Open Source när du sparar en produkt som har skapats med anpassade alternativ efter att bilden har tagits bort.

<!-- ACP2E-1419 -->

* Miniatyrbilder av produkter visas nu som väntat i det varningsmeddelande som skickas när en produkt är tillbaka i lager. Den här bilden visades inte i e-postmeddelandet

<!-- AC-3003 -->

* Antalet produkter i kategoriträdet (Admin **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) är nu korrekt. Tidigare kunde antalet kategoriprodukter inte hämtas från tabellen `catalog_category_product_index`. Det stavfel som utlöste felet har åtgärdats. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* Huvudproduktbilden på produktinformationssidan flyttas inte längre synligt nedåt under sidinläsning när `product_image_white_borders` in theme `view.xml` är inaktiverat. Tidigare flyttades produktbilden synligt nedåt under sidladdning på grund av felaktiga höjdinställningar i Fotorama JS.

<!-- ACP2E-1361 -->

* Kunder meddelas nu om sänkningar i produktpriset när kunden prenumererar på prissänkningsvarningar. Tidigare skickades inte alltid meddelanden om prissänkningar på grund av cachelagring på programnivå.

<!-- ACP2E-1422 -->

* Validering på serversidan har lagts till i processen för att skapa produktattribut via webb-API:et. Du kan inte aktivera fältet **[!UICONTROL Use in Layered Navigation Catalog]** när fältvärdet **[!UICONTROL Catalog Input Type for Store Owner]** är `Text Field`, `Text Area`, `Text Editor`, `Date` eller `Date and Time`. Tidigare har produkter utelämnats från kategorier och sökresultat.

<!-- ACP2E-1413 -->

* Kategorisidan läses nu in igen med rätt sidnumrering när en kund öppnar sidan, ändrar sidnumreringen, navigerar till en produktsida och sedan återgår till kategorisidan. [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Enkla produkter som inte finns i lager och som är alternativ för en konfigurerbar produkt visas nu som inaktiverade i butiken när **[!UICONTROL Display Out of Stock Products]** är inställt på **Ja**. Tidigare visades alla alternativ som tillgängliga, trots deras status och verkliga tillgänglighet.

<!-- ACP2E-1384 -->

* Uppdatering av attributet för webbplatsomfång i en specifik butiksvy åsidosätter inte längre värdet för det attributet i global omfattning. Tidigare importerades produktpriser när flera rader var tillgängliga med samma SKU och `store_view_code` resulterade i felaktiga priser för standard- och Alla butiksvyomfång.

<!-- ACP2E-1632 -->

* Merchants kan nu lägga till en GIF-bild i en produkts bildgalleri från Admin. Tidigare visade Magento Open Source följande fel: `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Kontroller har lagts till för att hantera fel som beror på odefinierade matrisnycklar. Tidigare uppstod ett fel vid generering av deklarativa schemavitelist.

<!-- ACP2E-1749 -->

* Magento Open Source returnerar nu ett giltigt resultat för det anpassade datumet `01/01/1970`. Tidigare returnerade attributet följande fel: `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` frågor som använder fragment returnerar nu kategoriinformation som förväntat. Tidigare uppstod ett internt serverfel på kategorisidan. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Problem med den `cataloginventory_stock` partiella omindexeringsprocessen har lösts och indexerarens prestanda har förbättrats. Tidigare uppdaterades inte lager- och produktkategorier korrekt.

<!-- AC-8226 -->

* Magento Open Source genererar nu en 301-omdirigering för en produkt när kategorin den tillhör har flyttats till en ny överordnad. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Regler för katalog

<!-- ACP2E-1834 -->

* Katalogregler indexeras nu korrekt när de aktiveras av schemauppdatering. Som ett resultat av detta genereras och indexeras nu rabatterade priser korrekt. Tidigare, när två katalogregler var tillgängliga och en regel aktiveras efter den första regeln innan den första regeln indexerar katalogregeln har slutförts, genererades inte rabattpriserna för katalogregeln för den andra katalogregeln.

<!-- ACP2E-1579 -->

* Katalogregler tillämpas nu som förväntat i en miljö med flera webbplatser.

### Konfigurerbara produkter

<!-- ACP2E-1881 -->

* Handlare kan nu välja **[!UICONTROL Skip quantity at this time]** och **[!UICONTROL Skip image uploading at this]** när de konfigurerar en konfigurerbar produkt utan att påverka källan för associerade enkla produkter. Om du valde **[!UICONTROL Skip quantity at this time]** tidigare försvann produktkällor.

<!-- AC-7099 -->

* Etiketten **[!UICONTROL As low as]** visas inte längre för ett konfigurerbart produktpris när alla alternativ har samma pris.

<!-- ACP2E-2464 -->

* Administratörsanvändare med webbplatsbehörigheter kan nu spara en underordnad produkt som är en del av en konfigurerbar produkt i en annan butikskontext. Omindexeringsprocesser hoppar nu över den här typen av konfigurerbara produkter.

<!-- ACP2E-2003 -->

* Konfigurerbara produkter med två underordnade produkter markeras inte längre som slut i lager när en underordnad produkt inaktiveras av en schemalagd uppdatering. Detta var ett känt problem för 2.4.7-beta1.

<!-- AC-8060 -->

* Prestandan för sparåtgärder för konfigurerbara produkter med flera alternativ har förbättrats. Tidigare kunde timeout inträffa under produktsparåtgärder. [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* Butiksvisningen av konfigurerbara produktpriser ändras nu som väntat när en kund väljer ett produktalternativ. [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### Kuponger

<!-- ACP2E-2495 -->

* Kupongkoder med ett begränsat antal användningar per kund kan nu användas en andra gång när den order som de tidigare användes för misslyckas. Tidigare släpptes inte kampanjkoden när den tidigare ordern annullerades.

<!-- ACP2E-2428 -->

* Kupongkoder som innehåller blankstegstecken blir inte längre ogiltiga. Tidigare misslyckades valideringen om en kupongkod innehöll ett blanksteg (före eller efter den faktiska koden). [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* En köpares kupongvärde för engångsbruk återställs nu som förväntat när den ordning som användes annulleras.

<!-- ACP2E-1195 -->

* Slutpunkten `GET V1/coupons/<couponId>` returnerar nu det fullständiga förväntade svaret för manuellt skapade kuponger på samma sätt som för automatiskt genererade kuponger. Tidigare har vissa fält utelämnats (till exempel `usage_limit`, `usage_per_customer` och `created_at`).

### cron

<!-- ACP2E-2457 -->

* Kronijobbet `aggregate_sales_report_bestsellers_data` skapar inte längre mycket stora temporära MySQL-tabeller och slutförs nu. Det här cron-jobbet infogar nu data per butik, inte för alla butiker samtidigt. Tidigare kunde detta cron-jobb resultera i `No space left on device` fel.

<!-- ACP2E-2427 -->

* Antalet väntande poster i tabellen `cron_schedule` har reducerats genom att förhindra att cron-jobb försöker hämta onödiga cron-joblockar. Tidigare försökte cron-jobb hämta lås när det var för sent att köra jobbet. Kronjobb i `cron_schedule` markerades inte som missade trots att de redan hade passerat sin schemalagda tid. Det här felet visades också upprepade gånger i felloggen: `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* Korrigerade det allvarliga division med noll-felet i cron-uttryck. [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* Kronprocessen `sales_clean_quotes` har optimerats för att köras snabbare genom att ett sammansatt index läggs till för `store_id` och `updated_at columns` i citattabellen. Den här ändringen förbättrar prestanda för cron-jobb när många citattecken bearbetas.

<!-- AC-7987 -->

* Administratörsanvändare kan nu visa vilken uppgift som `bin/magento cron:run`-processen utför för närvarande. Titeln på den process som körs visas nu med namn på grupper och jobb. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Kund

<!-- AC-6748 -->

* Magento Open Source visar nu fälten **[!UICONTROL Date of Birth]**, , **[!UICONTROL Tax/VAT Number]**&#x200B;**[!UICONTROL Company]**&#x200B;**[!UICONTROL Gender]**&#x200B;**[!UICONTROL Telephone]**, , och **[!UICONTROL Fax]** på sidan för att redigera kund baserat på konfigurationsinställningar. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### E-post

<!-- ACP2E-2125 -->

* E-postmeddelanden som innehåller diakritiska tecken eller accenter (dvs. utf8-e-post) stöds nu för kunder och företag samt för beställningsmontering av gäster och registrerade kunder. Tidigare sparade inte Magento Open Source kundposter som innehöll diakritiska tecken och visade följande fel: `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* Namn på e-postavsändare får inte längre innehålla kolontecken. En ny verifieringsregel förhindrar nu att avsändarnamn som innehåller kolontecken sparas från Store Email Addresses-avsnittet i Admin **[!UICONTROL Stores]** > **[!UICONTROL General]**. Tidigare kunde handlarna spara ett avsändarnamn som innehöll ett kolontecken, vilket resulterade i fel på e-postservern.

<!-- AC-2903 -->

* Kundens e-postadresser kan nu innehålla diakritiska tecken. Tidigare var det inte tillåtet att skapa en användare med diakritiska tecken i e-postadressen vid valideringen. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Mejl med butiks- och prismeddelanden översätts nu enligt det språk som har konfigurerats för webbplatsens standardbutiksvy. Tidigare översattes inte dessa e-postmeddelanden.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` skickar nu ett e-postmeddelande till kunderna om att en beställning är klar för hämtning endast när beställningen är klar. E-post aktiveras nu endast när begäran har slutförts utan ett undantag.

### Ramverk

<!-- AC-10873 -->

* Förbättrad felsökning genom att lägga till värdet när utmatning av `UNCACHEABLE` ett HTTP-huvud med Varnish används. Tidigare har bara `HIT` eller `MISS` värden utdata. [GitHub-37912](https://github.com/magento/magento2/issues/37912)

<!-- AC-10884 -->

* Lade till kod för att stödja standardhantering av Varnish-komprimering. [GitHub-38309](https://github.com/magento/magento2/issues/38309)

<!-- AC-8502 -->

* Kommandot `varnish:vcl:generate` innehåller nu en `input-file argument`. Detta stöder tillägg av en anpassad VCL i en Git-databas i förhållande till Commerce-roten. [GitHub-37363](https://github.com/magento/magento2/issues/37363)

<!-- AC-10739 -->

* Stöd för Varnish 4.x och 5.x har tagits bort från kodbasen. [GitHub-38304](https://github.com/magento/magento2/issues/38304)

<!-- AC-8023 -->

* `phpcodesniffer-composer-installer` i `composer.json` har uppgraderats till v1.0.0. [GitHub-36913](https://github.com/magento/magento2/issues/36913)

<!-- AC-10858 -->

* Tecken som inte överensstämmer med [RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html)  har tagits bort från kodbasen. [GitHub-38355](https://github.com/magento/magento2/issues/38355)

<!-- AC-10692 -->

* Åtgärdade en felaktig PHP doc-tagg i `Magento\Reports\Block\Adminhtml\Shopcart\Product\Grid` klassen. [GitHub-38186](https://github.com/magento/magento2/issues/38186)

<!-- AC-10865 -->

* Omstrukturerad kod i hela kodbasen som skapades när kodningspraxis dikterade att alla cacheavsnitt som ingick i `app/etc/env.php` filen skulle innehålla en frontend-sektion. Denna refaktorisering åtgärdar potentiella problem vid uppgradering av Magento Open Source pre-2.4.4-distributioner. [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* Förtydligade felmeddelandet som är associerat med `StockItemValidator.php` när ett lager-ID med värdet 0 anges under ett API-anrop. [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* En tom standardarray har lagts till i `$tagGenerators` i `CompositeTagGenerator` för att förhindra fel under beroendeinmatningskompilering. Tidigare uppstod ett fel när kommandot `bin/magento setup:upgrade` kördes när modulerna `Magento_DirectoryGraphQl` och `Magento_StoreGraphQl` inaktiverades. [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* Den oanvända klassen `AlgorithmProviderFactory` har tagits bort, liksom beroenden av den här klassen i klasser som `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php` och `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* Filen `var/log/system.log` innehåller inte längre `main.INFO` felmeddelanden. Menyalternativloggen har flyttats från nivån INFO till DEBUG. Tidigare var filen `var/log/system.log` översvämmad av meddelanden som följande: `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* Förinläsningen av Redis misslyckas inte längre när `exec()` returnerar false. Verifiering har lagts till i förinläsningsprocessen för att förhindra att `array_combine` tar emot `false` som ett andra argument. Detta resulterar i att förinläsningen fortsätter när `exec()` returnerar `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* Modulen `Magento_CatalogWidget` har omstrukturerats för att ersätta `$block` undantagsfunktioner med `$escaper` undantagsfunktioner. [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` har uppdaterats till `Eswatini` genom hela kodbasen. [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* Den nya nicaraguanska valutan (NIO) har lagts till i listan över tillgängliga valutor.

<!-- AC-10591 -->

* Ett variabelnamn i `CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php` har korrigerats. [GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* Löste avrundningsfel för delsummor som inträffade i transaktioner för produkter för vilka decimalkvantitet har aktiverats. [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* Datumfiltret för Admin-kundens rutnät fungerar nu som väntat enligt den angivna språkinställningen.

<!-- AC-9027 -->

* Kommandot `bin/magento setup:upgrade` misslyckas inte längre på grund av variabeldatatypen `$schemaPatch`. Tidigare skickades strängvärdet till funktionen `get_class`, vilket orsakade felet. [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2345 -->

* Anslutningen till MySQL-databasen återställs nu om anslutningen tar slut under en transaktion när du anger `max_messages = 0` för konsumenten. Tidigare avbröts anslutningen.

<!-- ACP2E-2121 -->

* Kärnmodulen `magento/module-release-notification` har markerats som föråldrad i 2.4-framkallningskoden med följande kommentar: `Starting from Magento 2.4.7, Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* Generering av proxykod genererar nu proxy- och fabriksfiler som förväntat för distributioner som körs i produktionsläge. [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* Den indiska delstaten Ladakh visas nu som ett alternativ på den nedrullningsbara menyn Admin address **[!UICONTROL State]**. [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* Nedräkningsfilmen för händelsen visas nu som förväntat på kategorisidan.

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* Den förbjudna taggen `@author` har tagits bort från kodbasen, inklusive följande moduler: `Magento_user-variable-wee`, `Magento_Catalog` och `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax` och i hela ramverket. [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* JSON-serialiseraren i modulen `User` har ersatts med en ny, mer korrekt serialiserare (`JsonHexTag`). Tidigare kraschade Magento Open Source ibland vid försök att använda data som serialiserats av den vanliga serialiseraren när den innehöll unescape-element. [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* Brutna pipeline-fel inträffar inte längre när en fullständig omindexering (`bin/magento indexer:reindex`) körs. AMPQ-anslutningar stängs nu innan processhanteraren förgrenar processerna.

<!-- ACP2E-2244 -->

* Valideraren för kömeddelande validerar nu undertypen för alla arrayelement. Tidigare genererade Magento Open Source ett undantag.

<!-- ACP2E-2066 -->

* Konfiguration av köanslutning per ämne i `app/etc/env.php` fungerar nu korrekt. Tidigare genererades inte produktaviseringskön korrekt när en ny meddelandekö skapades med en anpassad växling. Om köanslutningen för ett ämne konfigurerades i `app/etc/env.php` med en anpassad växling, skapades en ny bindning för alla ämnen med den anpassade överföringen. Det gick inte att bearbeta produktvarningar.

<!-- ACP2E-2144 -->

* Tidsbegränsade format som har markerats med en `/* mariadb-5.3 */`-kommentar orsakar inte längre fel under `bin/magento setup:install` när MariaDB-servern uppgraderas till version 10.5.1 eller senare.

<!-- ACP2E-2147 -->

* AwsS3-drivrutinen fungerar nu som förväntat som en ersättning för implementeringen av standardfillagring. Tidigare kunde data skadas när den här drivrutinen konfigurerades för fillagring. [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* `bin/magento config:show` Och `set` kommandon som använder `$_ENV` variabler stöder nu användning av webbplats- och butikskoder som innehåller kamelbokstäver eller versaler.

<!-- AC-8923 -->

* Lagt till klasser med `!important` som de används i Tailwind 3 för CSS-layoutstöd. [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* Ett saknat `jQuery` beroende har lagts till i `trim-input.js` filen. [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* Händelsespecifik information skickas nu som ett andra attribut (`context`) för `log` metoden. [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* Proportionsvärden har lagts till i katalogbilder och onödiga skript har tagits bort från gränssnittets ramverk. [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* Reviderade felmeddelanden utlöses av ogiltig XML-konfiguration för att bli mer informativa. [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* Ersatt inaktuell kod som relaterar till skapandet av dynamiska egenskaper i hela kodbasen.

<!-- AC-7009 -->

* Prestandan för indexerare för stora butiker med extremt aktiva produktdatabaser har förbättrats. Indexerare indexerar nu den senaste produktinformationen en gång för varje index i stället för flera gånger. Tidigare försvann produkterna från webbplatsen och produktinformationen kunde vara inaktuell på webbplatsen. [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* Poststatus `mview_state` indikerar nu korrekt tillstånd baserat på ändringsloggaktivitet när en slavdatabasanslutning är tillgänglig. Tidigare var dessa poster i ett `waiting`-läge i molndistributioner även när det inte fanns några nya poster i ändringsloggen.

<!-- ACP2E-2022 -->

* Stöd för alternativet `precision` för valutaformat har lagts till för att bevara funktionsparitet med den borttagna klassen `ZendCurrency`.

<!-- AC-8854 -->

* Cookie-meddelanden har konverterats till observerbara attribut, och utvecklare kan nu ändra tillstånd, vilket kan aktivera gränssnittsändringar. Tidigare var cookies skrivskyddade och kunde inte ändras. [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* Admin-användare kan nu generera en faktura när deras Magento Open Source-instans är ansluten till S3-lagring.Tidigare visade Magento Open Source det här felet: `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Magento Open Source loggar nu ett undantagsmeddelande som förväntat när validering av momsregistreringsnummer av VIES-valideringstjänsten misslyckas. [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* Namnet `Administrators` har tagits bort från frågan som används för att hämta en administratörsroll när administratörsrollen skapas. [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* Kommandot `bin/magento setup:config:set` misslyckas inte längre när ett ogiltigt databasanvändarnamn ingår i `app/etc/env.php` filen. [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* Sortering efter kolumn efter reserverade ord i en standardkomponent i Admin UI resulterar inte längre i ett SQL-fel i `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* Har lagts till `AddDataForCostaRica.php` för att ge delstatsinformation för Costa Rica. [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* Förbättrat felmeddelande för scenario där användaren försöker komma åt en ogiltig URL från administratören. [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`Position`]` för valutasymboler fungerar nu som förväntat och har stöd för anpassning av valutasymbolens position. Tidigare, efter migrering från Zend Framework 1, `toCurrency` ignorerade metoden parametern `position` . Det här problemet uppstod i hela administratörsgränssnittet.

<!-- ACP2E-1492 -->

* Mutex har implementerats för order för att förhindra konkurrensförhållanden under uppdatering på grund av samtidiga förfrågningar. Tidigare orsakade samtidiga begäranden (konkurrensvillkor) för orderannulleringar dubblerade poster i tabellen `inventory_reservation`.

<!-- ACP2E-1381 -->

* Funktionen `populateWithArray` omformar nu objektegenskaper så att skiftläget blir korrekt, vilket gör den kompatibel med `AbstractModel` get- och set-metoderna. Tidigare var formateringen av orm-kasus felaktig när dataattributets namn innehöll flera versaler i rad.

<!-- ACP2E-1522 -->

* Värdet för `catalog_product_entity_varchar` automatisk ökning i tabellen ökar nu korrekt efter att en produkt har sparats. Tidigare ökade detta värde med tio.

<!-- ACP2E-1701 -->

* Magento Open Source kastar inte längre detta filsystemundantag när du försöker tömma JavaScript/CSS-cachen: `No such file or directory`.

<!-- ACP2E-1358 -->

* Värdet `value_id` för in `customer_entity_int` ökas nu korrekt. En uppdateringsfråga körs i stället för `insert on duplicate key update` när du uppdaterar en entitet som innehåller dessa attribut. Det innebär att de kolumner för automatisk ökning som används i EAV-modellen nu växer på ett linjärt sätt. Tidigare hoppade den automatiska ökningsprocessen för kolumner över värden på grund av misslyckade infogningsfrågor. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Onödigt tomt utrymme har tagits bort från `id` attribut som inte kräver det. (Felet uppstod när Magento Open Source 2.4.6-koden ändrades.)

<!-- AC-7923 -->

* Butikskoder visas inte längre i butikens URL när butiken är i enbutiksläge. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Mindre uppdateringar har gjorts för `around` plugin-program. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* Färgrutorna `Helper` har omarbetats för att ta bort vilseledande importalias. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Administratörsanvändare kan nu ta bort eller ändra namn på en `sitemap.xml`-fil som förväntat. Tidigare kunde en administratörsanvändare ta bort filen från administratören, men den fanns kvar i filsystemet. [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* Kuponger markeras inte längre som använda när betalningen misslyckas för den order som de har tillämpats på. Kömeddelanden bearbetas nu i den ordning som de publiceras när konsumenten startas. Tidigare togs det första meddelandet bort från kön för att kontrollera om meddelanden låg i kö och avvisades därefter, vilket ledde till att det första meddelandet bearbetades sist.

<!-- ACP2E-1627 -->

* Magento Open Source genererar inte längre något undantag i loggfilen när en användare försöker skriva ut en leveransetikett. Tidigare, om ett tillägg ändrar svarshuvuden som innehåller en bifogad fil, utlöste systemet ett undantag i loggfilen.

<!-- AC-7986 -->

* Stöd för fler HTML-klasser har lagts till i `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Allmänna korrigeringar

<!-- AC-10591 -->

* Namnet på variabeln `reponseBody` har ändrats till `responseBody` i `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* Produktuppdateringar som schemaläggs rensar inte längre flervalsattributdata. Tidigare rensades produktens flervalsattributdata felaktigt när en uppdatering schemalagdes för en produkt. [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* Om du sparar en produkt med en lagringsomfattning som inte är standard blir inte längre oförändrade attribut lagringsomfångade när de läses in med `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2404 -->

* Informativa felmeddelanden har lagts till i anpassad fältvalidering på produktinformationssidor. [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* Specialtecken kan nu användas i namnfält. Tidigare var et-tecknet (&amp;) begränsat i namnvalideraren, vilket blockerade åtgärder för att lägga till eller redigera kunder när kundnamnet innehöll ett et-tecken. [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* Administratörsanvändare med begränsad åtkomst till en specifik butik kan nu använda en massuppdateringsåtgärd för att uppdatera produktrecensioner. Tidigare kastade Magento Open Source detta undantag: `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* Inloggningssidans funktion Visa lösenord visar nu lösenord som förväntat. Tidigare visades inte lösenord. [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* Produktjämförelselistan är nu alltid webbplatsspecifik för gästkunder och innehåller inte produkter som lagts till från andra webbplatser, inklusive produkter som tilldelats till båda webbplatserna.

<!-- ACP2E-2087 -->

* CMS-innehållsblock som innehåller känslolägesikoner trunkeras inte längre efter uttryckssymbolen när de sparas i databasen. Tidigare trunkerades innehållet efter emojin eftersom standarddatabaskonfigurationen inte hade stöd för tecken på fyra byte.

<!-- AC-8823 -->

* Lösenord visas nu som förväntat när kryssrutan **[!UICONTROL Show Password]** på inloggningssidan är aktiv.

<!-- ACP2E-2037 -->

* Valideringen av attributet Återställ lösenordstoken för kundentitet (`rp_token`) har tagits bort från attributvalidering när kundkontot skapades och diakritikvalidering inkluderas endast i kundens resulterande e-post. Tidigare sparade inte Magento Open Source kundposten och det här felet visades: `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* Du kan nu spara redigeringar i rutnätet Administratörssidor och Blockera när du har tagit bort en kolumn. [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1972 -->

* Kunder kan nu logga in med ett nytt lösenord från en enhet efter att ha återställt sitt lösenord på en annan enhet.

<!-- ACP2E-1609 -->

* Fältet Admin-kundadress **Delstat/provins** behåller nu det senast sparade värdet som förväntat. Tidigare, när du tog bort värdet från det här fältet, fortsatte Magento Open Source att visa det borttagna värdet i **fältet State/Province** . [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1508 -->

* Fel uppstår inte längre under begäranden om ett RSS-flöde för kategorier när **[!UICONTROL RSS Feed Top Level Category]** det är aktiverat. Tidigare resulterade bläddring på kategorisidan för RSS-feed i Elasticsearch-fel `CRITICAL` i loggfiler när **[!UICONTROL RSS Feed Top Level Category]** den var aktiverad.

<!-- ACP2E-1490 -->

* Rätt värde sparas nu när `gws_store_groups` rollens omfattning ändras när användarrollen skapas. Tidigare sparades värdet `gws_store_groups` som null när rollomfånget valdes som `All`, men inte under rollredigering. Om rollomfånget valdes som `Custom` sparades alltid värdet `gws_store_groups` som null.

<!-- ACP2E-1446 -->

* Sidan för återställning av lösenord kan nu öppnas genom att klicka på länken för återställning av lösenord för administratör på inloggningssidan för administratörer när inställningen **[!UICONTROL Add Store Code to Urls]** är aktiverad. Länken för administratörsåterställning av lösenord öppnade tidigare inloggningssidan eller 404-sidan.

<!-- ACP2E-1274 -->

* Datumintervallet i instrumentpanelen för administratörsstatistik beräknas nu baserat på den tidszon som har angetts i konfigurationsinställningarna och konverteras sedan till UTC för att hämta data från databasen.

<!-- ACP2E-1665 -->

* CMS-hierarkifiltret fungerar som förväntat efter att du har filtrerat en butiksvy och sedan klickat **[!UICONTROL Save]** på Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Tidigare uppdaterades sidan genom att klicka **[!UICONTROL Save]** , men sammanhanget förlorades och den valda butiksvyn visades inte längre.

<!-- ACP2E-1631 -->

* Genom att klicka på **[!UICONTROL Send invitation]** knappen (Admin **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**) skickas nu en POST-begäran tillsammans med formulärnyckeln och inbjudan skickas. Tidigare, när du klickade på den här knappen, fanns varken HTTP POST-metoden eller formulärnyckeln.

<!-- ACP2E-1608 -->

* Filer med noll byte kan nu kopieras till fjärrlagring med AWS S3.

<!-- AC-7402 -->

* Administratörsanvändare kan nu lägga till en ny kundadress från administratören när kunden har skapats för en annan webbplats vars butiks-ID inte matchar webbplats-ID:t. Tidigare visade Magento Open Source det här popup-meddelandet: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* På CMS blockredigeringssida visas nu rätt värde för widgeten `block_id`. [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### GraphQL

<!-- AC-8964 -->

* Frågan `getCustomerWishlist` resulterar inte längre i ett internt serverfel när listor som innehåller konfigurerbara produkter frågas.

<!-- AC-8966 -->

* Frågan `customerCart` returnerar nu alla tillämpade rabatter på paketprodukter som förväntat. Tidigare returnerades de totala rabatterna som tillämpades på en paketprodukt som noll.

<!-- AC-8964 -->

* Frågan `getCustomerWishlist` resulterar inte längre i ett internt serverfel när du frågar listor som innehåller konfigurerbara produkter.

<!-- AC-9147 -->

* Deklarationen av flaggan `is_subscribed` , dess resolver, cache och associerade tester har flyttats från modulen `CustomerGraphQl` till modulen `NewsletterGraphQl` .

<!-- AC-9362 -->

* Mutationen `addProductsToCart` rapporterar inte längre orelaterade fel i `user_errors`. Tidigare inkluderades fel relaterade till vagnen i `user_errors` tillsammans med de förväntade åtgärdsfelen. [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* Frågeproduktfiltret `products` kan nu returnera partiella matchningsresultat samt fullständiga matchningar. Det nya attributet `match_type` (PARTIAL, FULL) har stöd för att ange matchningstyp. Tidigare returnerade frågan endast fullständiga träffar.

<!-- ACP2E-2155 -->

* Mutex har lagts till i `addConfigurableProductsToCart`-frågan för att förhindra konkurrensvillkor under en uppdatering på grund av samtidiga begäranden. Tidigare lades två separata artiklar med samma produkt till när en handlare skickade två parallella förfrågningar om att lägga till samma konfigurerbara produkt i en varukorg. [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* Produktaggregering i GraphQL-svar innehåller nu värden som inte är noll för attribut när **[!UICONTROL Use in Layered Navigation]** är inställd på **[!UICONTROL Filterable (no results)]**. Tidigare returnerades bara värden som inte var noll.

<!-- ACP2E-2141 -->

* Förbättrade prestanda för `setShippingAddressForEstimate`-frågan för kundvagnsrelaterade åtgärder som omfattar anpassade produktattribut. Tidigare lästes alla produktattribut in när parametrar skickades som variabler.

<!-- ACP2E-2255 -->

* `products`-frågefältet `ConfigurableProduct.configurable_options` returnerar nu bara värden som har minst en aktiverad produkt. Tidigare returnerade det här fältet inaktiverade enkla produkter.

<!-- ACP2E-2151 -->

* Förbättrade prestanda för `GetCategories query` genom att minska antalet onödiga SQL-frågor som genereras.

<!-- AC-8623 -->

* Adressfelhantering för GraphQL bibliotekskomponenter fungerar nu som förväntat.

<!-- AC-9058 -->

* Frågan `products` returnerar nu alla relevanta butiksprisdetaljer när dynamisk prissättning har angetts till Nej och rabatter tillämpas. Tidigare returnerades inte prisintervallet för produkter. [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* GraphQL transaktionsnamn innehåller nu endast frågenamn på den översta nivån i New Relic loggar. Tidigare innehöll transaktionsnamn även sekundära frågenamn.

<!-- AC-8623 -->

* Adressfelhantering för GraphQL bibliotekskomponenter fungerar nu som förväntat.

<!-- AC-7430 -->

* När synlighetsinställningen för en produkt är inställd på `Catalog` löser `products` frågor för den produkten nu inställningen korrekt. Tidigare växlades alla angivna filter till inställningen `Visibility: Catalog`. [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* `customer`-frågan returnerar nu ett `product_sale_price`-fält som innehåller moms på order när produktpriset har konfigurerats att inkludera moms. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* Produktattribut av typen `DateTime` mappas nu till filtret `FilterRangeTypeInput` i produktfrågor. Tidigare mappades dessa attribut till `FilterMatchTypeInput`. Som ett resultat av den här ändringen kräver frågefiltrering för `DateTime`-attribut `from`- och `to`-värden i stället för matchningsvärden.

<!-- ACP2E-1552 -->

* `customer`-frågan returnerar nu endast kundrecensioner relaterade till en viss butiksvy som förväntat när den filtreras efter butiks-ID.

<!-- AC-7544 -->

* `categories`-frågan returnerar inte längre något fel när svarsvärdet `items.redirect_code` innehåller ett null-värde. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1486 -->

* `changeCustomerPassword`-mutationen utlöser nu e-post som förväntat efter att ett lösenord har återställts.

<!-- ACP2E-1494 -->

* `urlResolver`- och `route`-frågor returnerar nu ett resultat när `Target Path` för URL-omskrivning är en absolut URL. Tidigare returnerade frågan `urlResolver` NULL när du använde den för att hämta omdirigeringsdata.

<!-- AC-7979 -->

* Frågan `products` returnerar nu korrekta etiketter. [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* `categoryList`-frågan returnerar nu ett ifyllt `product`-avsnitt i `options`-blocket för de underordnade produkterna som förväntat. Tidigare returnerades ingen information om underordnade paketprodukter.

<!-- AC-7114 -->

* Frågan `route` returnerar nu flöden för kategorier och produkter som förväntat utan ett internt serverfel. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* Frågan `products` hämtar `url_key` nu värden när flera kategorier är markerade.

<!-- LYNX-17 -->

* `products` frågor returnerar nu bara aggregeringar för produkter som har tilldelats den angivna delade katalogen.

<!-- AC-7974 -->

* Transaktionsnamn har lagts till i New Relic GraphQL-transaktioner. [GitHub-36874](https://github.com/magento/magento2/issues/36874)

<!-- AC-6680 -->

* `OptionValueProvider`-klassens `get()`-metod returnerar nu ett attributalternativvärde baserat på angiven `option_id` som förväntat. Tidigare returnerades ett fel. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* Frågan `products` returnerar nu alla tillgängliga aggregeringar (filter) och deras korrekt översatta etiketter. Tidigare översattes inte pris- och kategoriaggregeringsetiketter som förväntat. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Du kan nu använda ett fragment `ProductCard` när du frågar `related_products`, `upsell_products` och `crossell_products` på `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* Frågan `products` returnerar nu relaterade produkter, merförsäljning och korsförsäljning i den ordning som de sparades. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* GraphQL-frågor returnerar nu relaterade produktdata sorterade efter position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` har lagts till i `ProductAttributeFilterInput`, som har stöd för att begära alla produkter för en kategori i en enda fråga. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Korrigerade ett fel där metoden som sätter det aktuella arkivet i en GraphQL-mutation kördes före metoden som hanterar valideringen. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Bild

<!-- ACP2E-1353 -->

* Formuläret för uppladdning av favicon-ikonen för administratör har nu stöd för `.ico` filtyper. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Importera/exportera


<!-- ACP2E-2261 -->

* Produktimportprocessen tolkar nu värden med rätt avgränsare. Tidigare använde importprocessen pipe-operatorn (&quot;|&quot;) för att tolka flervalsvärden tills den fastställda värdeavgränsaren inte var lika med standardvärdet. Importen misslyckades därefter.

<!-- ACP2E-2490 -->

* 301-omdirigeringar skapas nu automatiskt när `URL Key` värden uppdateras genom CSV-import.

<!-- ACP2E-2129 -->

* Frakttabellpriser uppdateras nu som förväntat i CSV-filen för import av tabellpriser. Uppladdningsfilen för tabellhastighet lagras tillfälligt tills cron-jobbet för asynkron konfigurationsprocessor körs. Det här cron-jobbet hämtar den nya platsen för filen och bearbetar den därefter. Tidigare uppdaterades inte tabellpriserna som förväntat eftersom den asynkrona processorn letade efter filen på fel plats.

<!-- ACP2E-2298 -->

* Rutnätet Exportera filer visar nu alla exporterade filer oavsett tidsstämpel. Tidigare visade rutnätet inte alla exporterade filer som hade samma tidsstämpel. [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* Produkter med anpassningsbara alternativ kan nu importeras. Tidigare gick alternativdata förlorade under importen. [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* Specialtecken i exporterade CSV-filer visas nu som förväntat i Excel. [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* Import av lagerkällor och kundadresser med hjälp av **[!UICONTROL Customers and Addresses (single file)]** alternativet slutförs nu framgångsrikt.

<!-- ACP2E-1930 -->

* Produktimporten misslyckas inte längre på grund av brist på minne. Tidigare gick det inte att importera ett obegränsat antal produkter till en databas som redan innehåller ungefär tio miljoner produkter på grund av brist på minne.

<!-- AC-9116 -->

* Valideringskontrollerna avbryter nu importen som förväntat när det inte finns några giltiga data att importera och följande fel visas nu i Magento Open Source: `There are no valid rows to import`. Tidigare utfördes valideringen under dessa villkor, men importprocessen misslyckades med följande meddelande: `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* Om du importerar URL-nycklar med samma produkt skrivs inte längre befintliga vynycklar över eller tas bort. URL-omskrivningar genereras nu bara om för butiksvyer när det inte finns något åsidosatt `url_key`-värde. Tidigare skrevs URL-nyckeln över när du importerade URL:en om med samma URL-nyckel. (`key_store` URL-omskrivningar togs bort, men URL-omskrivningen på standardlagervisningsnivån för produkten var fortfarande inställd på `key_store`.)

<!-- ACP2E-1875 -->

* Produktantalet ändras inte längre oväntat under importen. Tömning av cacheminnet skjuts nu upp till efter importprocessen.

<!-- ACP2E-1813 -->

* Statusen för schemalagda importåtgärder representerar nu korrekt om importen lyckades eller misslyckades. Tidigare loggades alla åtgärder som lyckade.

<!-- AC-7039 -->

* Magento Open Source tar nu hänsyn **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** till inställningen vid import av kundregister. Tidigare `disable_auto_group_change` ignorerades värdet i importfilerna. [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel` hanterar nu nummer som föregås av ett mellanslag. Excel XML kodar nu fält som `String`. Tidigare kodade Excel-skrivaren dessa värden som `number`, vilket resulterade i ogiltiga filer. [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* Merchants kan nu ange det språk som importdata presenteras i och hur datavaliderare ska tolka dessa data. Om inget språkområdesvärde anges används standardkonfigurationens språkområde (inte standardbutiksvyn) för att analysera data. I Admin fortsätter import- och exportprocesserna att använda administratörens språkområde för att importera, analysera och formatera data.

<!-- ACP2E-1847 -->

* Om du importerar produkter med `country_of_manufacture` attribut som har skapats av en admin-användare med en annan språkinställning än den admin-användare som importerar produkterna genereras inte längre något valideringsfel. Tidigare kunde den här importåtgärden resultera i ett valideringsfel för attributet `country_of_manufacture`.

<!-- ACP2E-1994 -->

* Exporterade produkter har nu rätt `manage_stock`-värde när värdet `use_config_manage_stock` är lika med `1`. Tidigare var standardvärdet felaktigt.

<!-- ACP2E-1620 -->

* Magento Open Source visar nu ett informativt felmeddelande i det schemalagda importrutnätet när en bild inte kan importeras korrekt under en schemalagd importåtgärd. Tidigare visades inget felmeddelande.

<!-- ACP2E-1565 -->

* Produktimportprocessen avbryts inte längre när produktbilder saknas. Tidigare visades följande fel i Magento Open Source när en produktavbildning saknades vid import av en tredjepartstjänst med hjälp av en CSV-fil: `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1391 -->

* Produktimportprocessen genererar inte längre ett valideringsfel när ett attributvärde i kolumnen `configurable_variations` innehåller ett komma.

<!-- ACP2E-1377 -->

* Avkodning har undantagits från exportprocessen. CSV-exportfilens text ändras inte efter importen. Därför ändras inte beskrivningen efter återimporten. Tidigare togs HTML-taggar bort i Page Builder-redigeraren efter export och import av produkten.

<!-- ACP2E-1451 -->

* Icke-standardkonfigurationer (webbplats- eller butiksomfång) som läggs till som miljövariabler avbryter `app:config:import` inte längre processen med ett rekursionsfel.

<!-- ACP2E-1569 -->

* Katalogsökning och prisindexerare i läget Uppdatera när du sparar ogiltigförklaras inte längre efter importen. Tidigare ändrades dokumentversionen av Elasticsearch Indexer versionen när nya och befintliga produkter importerades.

<!-- ACP2E-1482 -->

* Produktrapporter exporteras nu till katalogen `var` . Tidigare exporterades dessa rapporter till dokumentets rotkatalog, som är en skrivskyddad katalog i molninstanser.

<!-- ACP2E-1736 -->

* Tomma flervalda kundadressfält avbryter eller avbryter inte längre exportprocessen.

### Index

<!-- AC-10911 -->

* Förbättrade prestanda för indexeraren  `catalogrule_product` när ingen katalogregel har angetts. [GitHub-34784](https://github.com/magento/magento2/issues/34784)

<!-- ACP2E-2204 -->

* Problem med prisindexerarens prestanda har åtgärdats. Indexerarens prestanda försämras inte längre gradvis. Indexeraren har omarbetats för att öka bearbetningshastigheten för indexeraren genom att ändra hur tillfälliga tabeller skapas. Dessa tillfälliga tabeller återskapas nu i stället för att hanteras av mer tidskrävande DELETE-satser.

<!-- ACP2E-2033 -->

* Prisindexerarens prestanda har förbättrats. Ett indextips har lagts till i prisindexeraren som förbättrar körningstiderna för MySQL-frågor som utlöses under indexering.

<!-- AC-9223 -->

* Alla indexerare använder nu samma färger för att representera indexerarens tillstånd. [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* Prestandan för produktindexeraren för katalogregel i distributioner där regler inte har tilldelats till alla webbplatser har förbättrats.

<!-- ACP2E-1401 -->

* Om du skapar en anpassad produkttyp när indexerare är inställda **[!UICONTROL Update on schedule]** på misslyckas inte längre indexuppdateringsuppgiften `cron` . [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` misslyckas inte längre med ett MySQL-fel när kundrutnätet innehåller nyskapade anpassade kundattribut. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* Om du ändrar indexerarläge för flera indexerare (d.v.s. en ändring av läget för massåtgärdsindexeraren) ändras nu bara indexerarens läge när det aktuella läget skiljer sig från det som används. Detta förbättrar prestandan genom att förhindra onödiga utresor till databasen. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

<!-- AC-6934 -->

* Indexering av produkter med många attributalternativ har förbättrats. [GitHub-36386](https://github.com/magento/magento2/issues/36386)

### Infrastruktur

<!-- AC-10866 -->

* En instruktion som saknas `return` har lagts till i kontrollanten för aktivering av administratörsanvändning. Tidigare fanns det ingen `return` instruktion och kontrollanten i `FrontendController` klassen hanterades felaktigt. [GitHub-31374](https://github.com/magento/magento2/issues/31374)

<!-- AC-9390 -->

* MySQL `CREATE TEMPORARY TABLE ... LIKE` har ersatts med omstrukturerat `CREATE TEMPORARY TABLE` för kompatibilitet med MySQL 8.x. [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Magento Open Source inkluderar inte längre den fullständiga sökvägen till serverns rot i felmeddelandet som visas när en felaktig HTTP-begäran har skickats till servern. Endast strängar skickas nu till `explode` metoden som ett andra argument.

<!-- AC-8384 -->

* `restricted_classes.php` har ersatt `Zend_Validate_File_Upload`. Tidigare kraschade valideraren under uppladdningen av en importfil som var större än det värde som konfigurerats i `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- AC-7093 -->

* Motorn för e-postmallar kan nu bearbeta vissa kapslade direktiv korrekt (till exempel `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` Frågor med aggregeringsdata returnerar nu rätt etikettvärden för produktattribut av boolesk typ. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- AC-2618 -->

* Ukrainska regioner har lagts till i tabellen `directory_country_region` . [GitHub-35187](https://github.com/magento/magento2/issues/35187)

<!-- https://github.com/magento/magento2/pull/29173 -->

* CSS-filer är inte längre skadade när de slås samman när `var/tmp` och `pub/static` är på olika filsystem och **[!UICONTROL CSS Merging Enabled]** är aktiverat. Temporära filer har skapats i samma statiska katalog som målfilen för att säkerställa att båda filerna finns i samma filsystem. Som ett resultat är anropet för att byta namn på det atomiskt. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Åtgärdade ett potentiellt fel när en medlemsfunktion `getId()` anropades på `int`, vilket ibland utlöste ett undantag när en kund visades i Admin.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Typkontroller används nu för arraytypen i designtemats konfigurationsprocessor. [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Inventory management

<!-- ACP2E-1883 -->

* Produkterna återgår nu automatiskt till In-Stock-status efter en kreditnota som innehåller en retur av produktkvantitet. Tidigare var handlarna tvungna att ändra produktlagerstatus manuellt om en produkt inte fanns i lager men en kreditnota returnerade lager av den produkten.

<!-- ACP2E-2123 -->

* Förbättrade prestanda för lagerindexeraren i asynkront läge genom att ta bort överflödiga begäranden om indexering av standardkällartiklar.

<!-- AC-7023 -->

* Korrigerade problem med lagerindexeraren som påverkade precisionen för lagerinventeringen för konfigurerbara produkter. [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* Det går nu snabbare att uppdatera lagerkällans artiklar via REST `V1/inventory/source-items`. Anropet utlöser inte längre en omindexering eller en rensningscacheåtgärd för oförändrade lagerprodukter.

<!-- ACP2E-1842 -->

* REST `V1/products/<sku>` utlöser nu en automatisk omindexering av lager när en produkts lagerstatus uppdateras. Tidigare utlöstes ingen omindexering av lager för produkten som uppdaterades.

<!-- ACP2E-1653 -->

* Konfigurerbar produktlagerstatus uppdateras nu på butiken som förväntat när underordnade produkter uppdateras av `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* REST-anropet `POST <store_code>/V1/inventory/source-items` validerar nyttolasten för tomt utrymme i returnerade lagerkällartiklar och skickar ett felmeddelande om validering efter behov.

<!-- ACP2E-2072 -->

* Merchants kan nu meddela kunderna att en beställning är klar för hämtning när inställningen **[!UICONTROL No Manage Stock]** är aktiverad för en produkt. Tidigare visades följande felmeddelande när den här inställningen aktiverades: `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* Handlare kan nu skapa en kreditnota för order från vilka en enkel produkt som är kopplad till en konfigurerbar produkt har tagits bort. Tidigare kunde handlarna inte skapa kreditnotan och Magento Open Source utlöste ett `TypeError`-undantag.

<!-- ACP2E-2310 -->

* Admin - rutnätskällans antal returnerar nu giltiga poster efter att ett filter har tillämpats. Tidigare returnerade metoden `getSourcesCount` alltid det totala antalet källor efter att ett filter använts.

<!-- ACP2E-1364 -->

* Kategorisidan omdirigeras inte längre till Admin Dashboard när du sorterar produkter med alternativet &quot;Flytta från Stock till botten&quot;. Problemet har lösts genom att SQL join-satsen placerades inuti villkorssatsen först efter det att den inte redan inkluderats. Tidigare omdirigerades sidan till Admin Dashboard med meddelandet:`Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* `AUTO_INCREMENT` av tabellen `inventory_source_item` ökas inte längre med varje `UPDATE`-åtgärd. Tidigare ökade varje uppdatering `AUTO_INCREMENT` för den här tabellen, vilket till slut gjorde att värdet `AUTO_INCREMENT` låg utanför intervallet när en ny post lades till i `inventory_source_item table`. Som ett resultat av detta fick administratörsanvändare följande fel när de försökte skapa en ny produkt från administratören: `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* Administratörsanvändare kan nu lägga till en produkt i en kundvagn från administratören för ett visst butiksvyomfång med lagerhantering. Tidigare bestämdes inte lager-ID:t korrekt och administratörsanvändare kunde inte lägga till produkten i kundvagnen.

<!-- ACP2E-1399 -->

* Synkroniseringen mellan lager och katalog är inte längre beroende av konfigurationsinställningen **[!UICONTROL Synchronize with Catalog]** . Tidigare synkroniserades produkter bara korrekt när den här inställningen aktiverades.

<!-- ACP2E-1382 -->

* Magento Open Source genererar inte längre något fel efter sidinläsning när en kund drar av en produktkvantitet från en beställning som ligger inom det tillgängliga produktintervallet när han eller hon väljer leveranskälla.

<!-- ACP2E-1259 -->

* Konfigurerbar produktlagerstatus uppdateras nu korrekt när en konfigurerbar produkt och dess underordnade produkter `Stock Availability`-värde uppdateras med en uppdatering av massinventering. Tidigare gick det inte att returnera en konfigurerbar produkt och dess underordnade produkter till Stock via massuppdatering.

<!-- ACP2E-2096 -->

* Datatypen för källor som inte är standardkällor har uppdaterats till `DECIMAL (12, 4)` med stöd för upp till åtta heltalssiffror, vilket är samma gräns som implementerats för standardlager. Det här värdet är nu synkroniserat med Admin - lägg till och redigera produktsidor, som stöder indatavalidering för upp till åtta siffror för alla typer av lagerkällor. Tidigare stöddes indata för fältet **[!UICONTROL Quantity]** (för icke-standardkällor) endast av upp till sex siffror.

<!-- ACP2E-2054 -->

* Både standard- och icke-standardkällor visar nu rätt information för produktens säljbara kvantitet när en icke-standardkälla som beställdes från butiken bearbetas för leverans. Tidigare visade Magento Open Source felaktig lagerstatus för produktkällor.

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` Returnerar nu lagerstatus baserat på den omfattning som definierats i produktobjektet (`\Magento\Catalog\Model\Product::getStoreId()`). Tidigare `getIsSalable()` returnerades lagerstatus baserat på aktuell omfattning oavsett produktobjekt.

### Loggning

<!-- ACP2E-1385 -->

* Administratörsanvändare kan nu se loggarna för massåtgärder som har skapats av integreringar i gruppåtgärdsloggen i Admin.

### Inloggning

<!-- ACP2E-1521 -->

* Ett undantag uppstår inte längre om du återställer ett lösenord i en webbläsare och sedan loggar in via en annan webbläsare. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Kunder omdirigeras nu till inloggningssidan efter att ett konto har aktiverats som förväntat. Tidigare loggades kunderna in automatiskt.

### Nyhetsbrev

<!-- AC-10806 -->

* Commerce kontrollerar nu om prenumerationsfunktionen för nyhetsbrev är aktiverad innan nya prenumeranter accepteras till ett nyhetsbrev. [GitHub-33040](https://github.com/magento/magento2/issues/33040)

### Beställningar

<!-- AC-8857 -->

* Produkter som flyttats från administratörskundvagnen till listan över artiklar som ska beställas tas nu bort som förväntat från kundvagnen. [GitHub-37538](https://github.com/magento/magento2/issues/37538)

<!-- ACP2E-2535 -->

* Merchants kan nu skapa kreditnotor som förväntat för delreturer av order som delvis har betalats med belöningspoäng. Tidigare när en handlare skapade en partiell retur identifierades orderstatusen felaktigt som stängd och på sidan Admin Order visades inga alternativ för kreditnota.

<!-- ACP2E-2583 -->

* Magento Open Source tillämpar nu rätt rabattbelopp på delvis annullerade order. Tidigare beräknades rabattbeloppet i kolumnen `base_discount_cancelled` felaktigt när en order ändrades. Stöd för negativa värden har lagts till i fakturor för rabatterade order.

<!-- ACP2E-2412 -->

* Magento Open Source sorterar nu anpassade kundadressattribut baserat på den sorteringsordning som angavs när administratören skapade ordern i Admin.

<!-- ACP2E-2400 -->

* Sidan Admin Sales Order Grid läses nu in som förväntat när en handlare startar en sökning från den här sidan. Tidigare, när en handlare försökte söka efter beställningar från den här tabellen, frös sidan och Magento Open Source visade ett fel i webbläsarkonsolen `Request-URI Too Long` .

<!-- ACP2E-2213 -->

* Förbättrade metodens `OrderRepository::get()` prestanda genom att minska antalet gånger den läser in en order från databasen. Tidigare laddade den här metoden en order flera gånger. [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* Handlare kan nu generera kreditnotor för ordrar som innehåller vissa artiklar med en totalsumma på noll när andra beställningsartiklar är tillgängliga för återbetalning. Tidigare kunde handlare inte utföra flera återbetalningar när en kund hade 100 % rabatt på vissa artiklar i ordern.

<!-- AC-8254 -->

* Länkar mellan underordnade och överordnade produkter visas nu på beställningssidan när du beställer om den underordnade produkten från administratören. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- ACP2E-1341 -->

* Emuleringen startar nu under `send()` anrop när emuleringen har slutförts under anropet `getInfoBlockHtml()` och inga fel loggas. Tidigare var filen `system.log` översvämmad med följande fel: `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1918 -->

* Merchants kan nu generera kreditnotor för order som innehåller vissa artiklar med en totalsumma när andra orderartiklar är tillgängliga för återbetalning. Tidigare kunde handlare inte göra flera återbetalningar när en kund hade 100 % rabatt på vissa artiklar i beställningen.

<!-- AC-8254 -->

* Länkar mellan underordnade och överordnade produkter visas nu på beställningssidan när du beställer om den underordnade produkten från administratören. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* Huvudavsnittet på ordersidan innehåller nu den förväntade informationen om den skickade fakturan, kreditnotan och leveransen. [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* Kreditnotor för ordrar som endast innehåller en konfigurerbar produkt genereras nu korrekt. Tidigare `isLast()` returnerades `true` inte funktionen som förväntat. [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* Förbättrad prestanda för `aggregate_sales_report_bestsellers_data` cron-jobbet genom att optimera huvuddatafrågan.

<!-- ACP2E-1714 -->

* Orderstatusen är nu korrekt när en partiell återbetalning har gjorts för en order som innehåller paketprodukter. Tidigare listades orderstatusen som slutförd efter att en partiell återbetalning hade utfärdats, även om den återstående beställningen inte var slutförd. [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* Kunder kan inte längre beställa en produkt med ett anpassat pris när en beställning först genereras från administratören med hjälp av det anpassade engångspriset. Tidigare, om en order innehöll en artikel med anpassade priser, tillämpades detta anpassade pris för andra beställningar som gjordes med funktionen för ombeställning.

<!-- ACP2E-1421 -->

* Kunder kan inte längre spara felaktiga orderstatusar på beställningssidan. Orderstatus ändras inte längre från Slutförd till Bearbetas när en artikel skickas. Tidigare kontrollerade Magento Open Source inte aktuell orderstatus innan orderstatus sparades efter att en kund angett en kommentar. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1367 -->

* Försäljningsorderrutnätet är nu asynkront synkroniserat med alla order som förväntat. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* Funktionen för filter-för-inköpsdatum i kundorderavsnittet på ordersidan fungerar nu som förväntat. Tidigare inträffade ett JavaScript-fel när tidszonskonverteringslogiken genererade ett fel när samma tidszon angavs för metoden.

<!-- ACP2E-1294 -->

* På Admin-kontrollpanelen visas nu korrekt orderstatistik vid första inläsningen. Tidigare visade kontrollpanelen felaktig ordningsinformation, men rätt information visades när tidsperioden uppdaterades.

<!-- ACP2E-1762 -->

* Administratörsanvändare omdirigeras nu som förväntat till ordersidan efter att de har valt en butiksvy när nya order skapas från Admin.

<!-- ACP2E-1418 -->

* Slutpunkten `GET V1/orders/<OrderID>` returnerar nu information om både konfigurerbara och enkla produkter i ordningen, oavsett de enkla produkternas Stock-status. Administratörsanvändare kan endast göra beställningar nu om de valda artiklarna (produkterna) finns i lager eller är säljbara. Tidigare returnerade denna API bara information om de produkter som fanns i lager.

<!-- AC-7901 -->

* Kreditnotssidan kraschar inte längre när fri frakt är aktiverat när leveranspriset inkluderar moms och momsberäkningar tillämpas efter rabatter. Tidigare utlöste Magento Open Source ett `Division by zero`-undantag. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* Om du använder slutpunkten `rest/V1/orders/{id}/comments` för att publicera en kommentar om en order utan att ange orderstatus påverkas inte längre visningen av ordern. Tidigare loggades orderstatus som NULL i tabellerna `sales_order` och `sales_order_grid`, och varken sidan Mina beställningar eller rutnätet Admin-beställning visade ordningen. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

### Page Builder

<!-- AC-8777 -->

* Bilder behåller nu rätt proportioner när de storleksändras i Page Builder. [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* I Page Builder visas nu felmeddelanden vid behov när du försöker överföra en bild som är större än den angivna maximala filstorleken. Tidigare visade Commerce ett varningsmeddelande för överförda bildfiler som var mindre än det angivna maxvärdet.

<!-- ACP2E-1992 -->

* Produktreglagen för CMS-sidor innehåller nu de överordnade produkterna för alla underordnade produkter som har valts för att inkluderas i skjutreglaget. Tidigare har överordnade produkter uteslutits från skjutreglaget.

<!-- ACP2E-2115 -->

* HTML-konverterat innehåll visas nu i e-postmallar som förväntat när modulen `Magento_AsyncConfig` är inaktiverad. Tidigare innehöll e-postmallar endast råformat HTML.

<!-- AC-9128 -->

* Prestandan för att spara Page Builder i webbläsaren Chrome har förbättrats.

<!-- ACP2E-1564 -->

* När du lägger till en produkt i en kundvagn från Page Builder-karusellen dupliceras inte längre artikelkvantiteten från sidor med två olika widgetar som visar samma produkter.

<!-- ACP2E-1542 -->

* Page Builder lägger inte längre till HTML-attributet `tabindex` i hyperlänkstaggar `a` när du redigerar en hyperlänk och sparar sedan en mall.

<!-- ACP2E-1444 -->

* Produktwidgeten och förhandsvisningen i Page Builder hanterar nu HTML specialtecken korrekt. Tidigare visade produktwidgeten inte SKU:er som innehöll tecknet `&` korrekt.

<!-- ACP2E-1441 -->

* Innehållet i textelementet i Page Builder uppdateras nu som väntat när du markerar och uppdaterar hela innehållsblocket i förhandsgranskningsläget.

<!-- ACP2E-1362 -->

* Kopiering och inklistring av text från en textredigerare i Page Builder fungerar nu som väntat. Tidigare gick det inte att spara sidan där du försökte klistra in text, och Magento Open Source visade det här konsolfelet: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Innehållstypen Page Builder `column-block` som skapades i äldre versioner av Page Builder visas nu på rätt sätt.

<!-- ACP2E-1234 -->

* Filtreringen för beskrivningen av produktmetadata när produkten skapas från administratören har förbättrats. Tidigare, om Page Builder var aktiverat, genererades beskrivningen av produktmetadata baserat på standardmasken` {{name}} {{description}}` . Standardmasken för produktens metabeskrivning består nu av `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* Om du lägger till ett dynamiskt block utan innehåll genereras inte längre något fel.

<!-- AC-6645 -->

* Problem med visning av kolumner i Page Builder-innehåll har åtgärdats. Innehåll av innehållstypen `column-line` återgavs inte tidigare. [GitHub-3949](https://github.com/magento/pwa-studio/issues/3949)

### Betalning

<!-- ACP2E-2533 -->

* Magento Open Source hanterar nu korrekt 502-fel från PayPal genom att förhindra att beställningar skapas när detta fel inträffar. Tidigare skapades order trots 502-fel från PayPal, vilket leder till inkonsekvenser mellan Magento Open Source-poster och PayPals.

<!-- AC-9142 -->

* PayPal Express Checkout-transaktioner inkluderar nu underordnade produkter och fullständiga produkttitlar. Filen `Magento/Paypal/Model/Cart.php` samlar nu in underordnade SKU:er med den överordnade produkttiteln för att identifiera produkttiteln med den underordnade SKU:n. [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* Konfigurationsinställningen **[!UICONTROL Card Security Code Does Not Match]** bearbetas nu som förväntat under betalningsprocessen för Payflow Pro. Tidigare var utvärderingsprocessen aldrig slutförd, vilket blockerade utcheckningen.

<!-- ACP2E-1215 -->

* Alternativet Valvbetalningsmetod visas inte längre i arbetsflödet för Admin-utcheckning när användaren inte har någon vaulttoken. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* Knappen **[!UICONTROL Venmo]** kan nu döljas när PayPal-knapparna är aktiverade. Tidigare gick det inte att ta bort knappen **[!UICONTROL Venmo]** från korgen, minikorgen, produktinformationen eller utcheckningssidorna.

<!-- BUNDLE-3313 -->

* Köpare kan nu välja leveranssätt och lägga på kupongkod vid kassan. Tidigare inträffade ett fel i Magento Open Source och en fast frakt tilldelades ordern.

<!-- BUNDLE-3310 -->

* Problem med butiksbehandlingen av betalningsmetoderna PayPal och PayPal-kredit har lösts.

<!-- BUNDLE-3273 -->

* Löste problem med reserv-URL:er för order som betalas med Ideal-betalningar när lokal betalning är aktiverad.

<!-- BUNDLE-3253 -->

* Köpare kan inte längre skapa en PayPal-order utan att lägga till ett efternamn.

#### Braintree

<!-- AC-2901 -->

* Braintree betalningsinformation sparas nu per butik och kunderna ser nu bara kortinformation som har sparats i den butik där de handlar. Tidigare kunde kunderna se lagrad kortinformation från alla butiker under utcheckningen. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* Köpare kan nu checka ut en order som skickas till flera adresser med en betalningsmetod från Braintree när valvet för kortbetalningar är inaktiverat. [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* Delvis fakturerade ordrar samlas nu in som förväntat på rätt konto i distributioner där handlare har två olika handelskonto-ID:n för samma valuta på sitt Braintree-konto.

<!-- BUNDLE-3250 -->

* Magento Open Source ger inte längre ett fel när du skapar en andra delfaktura för en order som betalas av Braintree när den **[!UICONTROL Enable Vault for Card Payments]** är aktiverad. Tidigare när en handlare försökte skapa en andra faktura utlöste Magento Open Source följande fel: `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* Betalningsmetoden Braintree Vault avmarkeras inte längre automatiskt i arbetsflödet för kassan när en kund uppdaterar sin faktureringsadress. Tidigare var betalningsmetoden avmarkerad när användaren avmarkerade knappen **[!UICONTROL My billing and shipping address are the same]**.

<!-- BUNDLE-3248 -->

* Löste problem med utcheckning av PayPal via Braintree efter uppgradering från Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Telefonnummer återges nu som förväntat med adresser i fälten för leveransadresser i Google Pay modala popup-leveransadresser. Tidigare saknades telefonnummer.

<!-- BUNDLE-3228 -->

* Beställningar görs nu med Braintree när Braintree-svaret innehåller ett tomt värde för `threeDSecureInfo/eciFlag`. Tidigare uppstod ett PHP-fel i kassan när det här värdet var tomt.

<!-- BUNDLE-3243 -->

* Magento Open Source ger inte längre ett fel när en shoppare använder en kupong på ordergranskningssidan när han eller hon checkar ut med Google Pay från minivagnen. Tidigare omdirigerades kunder till en 404-sida.

<!-- BUNDLE-3245 -->

* Shoppare kan nu slutföra kassan med Braintree Payments och Magento Open Source 2.4.6 med osynlig ReCAPTCHA v2 eller v3. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Köpare kan inte längre klicka på knappen **[!UICONTROL PayPal]** för att köpa en konfigurerbar produkt utan att först välja nödvändiga alternativ. Tidigare kunde kunderna klicka på knappen **[!UICONTROL PayPal]** och sedan omdirigeras de tillbaka till produktsidan med ett fel:

<!-- BUNDLE-3148 -->

* Knappen **[!UICONTROL PayPal]** visas nu som förväntat på sidorna för kundvagn och minikundvagn. Tidigare visades inte den här knappen på kundvagnssidan och den duplicerades på mini cart-sidan.

### Prestanda

<!-- AC-9753 -->

* Flera klick i listrutan för massåtgärd på sidan **Försäljning** > **Beställningar** genererar inte längre flera POST-begäranden.  [GitHub-37997](https://github.com/magento/magento2/issues/37997)

<!-- AC-10944 -->

* Endast `200` eller `404` svar cachelagras när en kund navigerar till en sida som utlöser en 301-omdirigering, såvida inte sidans Cache-Control-huvud innehåller `private `. Tidigare cachelagrades en HTTP-status 200 med `private` i Cache-Control-huvudet och en HTTP-status 301 cachelagrades om den inte fanns `private` i Cache-Control-huvudet. [GitHub-36492](https://github.com/magento/magento2/issues/36492)

<!-- AC-9302 -->

* Oanvända `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` har tagits bort från `Magento\Catalog\Model\ProductRepository`. Tidigare lästes den här hjälpen in av `ProductRepository`, som är en `Adminhtml`-styrenhet. [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* Förbättrade prestanda för sidinläsningshastighet när många alternativ läggs till i paketerade produkter. [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* Processen att tilldela produkter till kategorier från fliken **[!UICONTROL Products in Category]** har optimerats. Knapparna **[!UICONTROL Assign]** och **[!UICONTROL Remove]** på fliken **[!UICONTROL Add Product by SKU]** inaktiveras nu tills produkterna har lästs in helt i rutnätet. Tidigare gick det inte att lägga till produkter från SKU i kataloger som innehöll miljontals registrerade produkter.

<!-- ACP2E-2098 -->

* Prestandan för mutationen `addProductToCart` när den körs med många anpassade produktattribut har förbättrats. Tidigare, när denna mutation utfördes med många produktattribut (ungefär 1 000), försökte Magento Open Source läsa in alla produktattribut.

<!-- ACP2E-1965 -->

* Prestandaproblem vid inläsning av produktattribut som används av kundvagnsregler har åtgärdats. Endast produktattribut för aktiva varukorgsregler har nu lästs in.

<!-- ACP2E-1864 -->

* Kommandot `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` kan nu köras flera gånger. Tidigare uppstod det här felet vid körning mer än en gång: `Coupon with the same code already exists`.

### Kampanj

<!-- ACP2E-1290 -->

* Effekterna av prisregeln **[!UICONTROL Fixed amount discount for whole cart]**, när den används med regeln **[!UICONTROL Apply to shipping amount]**, fördelas nu proportionellt mellan produkter och leveransbelopp. Tidigare var rabattberäkningarna felaktiga.

<!-- ACP2E-1300 -->

* Inställningen **[!UICONTROL Discard Subsequent Rules]** används nu som förväntat. När den här inställningen är aktiverad kan andra regler med låg prioritet endast tillämpas på en annan produkt. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* Osynlig reCAPTCHA v3 fungerar nu som förväntat för knappen för utcheckningssidan **[!UICONTROL Sign in]**. Tidigare kunde inte kunderna logga in och Commerce råkade ut för JavaScript-fel.

<!-- ACP2E-1539 -->

* Google reCAPTCHA fungerar nu som väntat för checkar, betalningsorder och anpassade betalningsmetoder.

<!-- ACP2E-1311 -->

* Adobe Commerce-formulär kan inte längre skickas innan kryssrutan Google ReCAPTCHA läses in.

<!-- ACP2E-1338 -->

* Widgeten reCAPTCHA kommer nu före knappen **[!UICONTROL Place Order]** på betalningssidan. Tidigare visades widgeten högst upp på sidan.

### Rapporter

<!-- ACP2E-1541 -->

* Orderrapporten (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) innehåller nu korrekta ordervärden när order genereras av butiker som använder icke-standardvalutor. Tidigare innehöll den här rapporten felaktiga värden. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Felaktig information i formuläret för försäljningsorderrapport har reviderats för tydlighet.

<!-- ACP2E-1435 -->

* Administratörsanvändare kan nu söka efter poster med e-postmeddelanden som innehåller `+` (plus) tecken från rapportsidan Övergivna kort. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

### Sök {#search-heading}

<!-- ACP2E-2272 -->

* Sökförslagen som fylls i automatiskt på sidhuvudets minisökruta fungerar nu som förväntat. Tidigare fylldes inte det här fältet i automatiskt när den här funktionen var aktiverad. [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* Prestandan för frågor som gjorts i sökfältet för administratörer har förbättrats genom att en indexerare har lagts till. Tidigare tog det längre tid att slutföra frågan eftersom tabellen `search_query` var större.

<!-- ACP2E-2279 -->

* Alfabetisk sortering av produkter efter namn fungerar nu korrekt för namn som innehåller turkiska tecken.

<!-- ACP2E-1854 -->

* Egenskapen **[!UICONTROL Use in Search Results Layered Navigation]** för produktattributet visas nu endast när **[!UICONTROL Use in Search]** inställningen är inställd på **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* Pris- och SKU-filtren för avancerad sökning fungerar nu korrekt när de används tillsammans i en avancerad sökning. [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* Sökningar utförs inte längre för tomma sökfält. Detta minskar storleken på tabellen `search_query` . Tidigare returnerade felaktiga frågor eller frågor om tomma sökfält en enorm datauppsättning, vilket ökade storleken på `search_query` tabellen och resulterade i problem med `/tmp`.

<!-- ACP2E-1916 -->

* Storefront-filter fungerar nu som väntat när kataloginlägg med anpassade attribut sorteras i listrutor.

<!-- ACP2E-1499 -->

* Sökresultaten visar nu relevanta resultat baserat på sökvikten för attributen som förväntat.

<!-- AC-7505 -->

* Informativ text under `Search Weight`-attributets `Storefront Properties`-inmatningsfält på Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** beskriver nu möjliga värden. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Leverans

<!-- ACP2E-2515 -->

* Kundprisreglerna fungerar nu som väntat när en paketprodukt läggs till i kundvagnen när dynamiska prisattribut inaktiveras. Fri frakt och korrekt registerhastighet används oavsett om attributet dynamic är aktiverat eller inaktiverat. Tidigare tillämpades inte fri frakt som förväntat.

<!-- AC-9729 -->

* Magento Open Source övergår nu till en ny leveranssida som förväntat efter att ha skapat en delleverans för en beställning. Tidigare, efter att ha skapat en delleverans, skapade Magento Open Source inte en komplett leveranssida för de återstående produkterna i beställningen. [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* Det totala beloppet för att skicka en order till flera adresser är nu korrekt beräknat. Tidigare, när en offert innehöll mer än en leveransadress, uppdaterade den totala insamlaren fraktbeloppet för den angivna adressen `$quote->getShippingAddress()` i stället för att skicka den förbi `$shippingAssignment` som förväntat. [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Magento Open Source ger inte längre ett undantag i kassan med flera leveransadresser när administratörsanvändaren har använt funktionen för inloggning som kund.

<!-- ACP2E-2258 -->

* Produkterna visas nu korrekt i produktrutnätet på sidan Skapa paket när du lägger till produkter i ett paket efter att etiketten för leverans har skapats.

<!-- ACP2E-2044 -->

* Frågan `cart` returnerar nu diskreta fraktrabatter som separata fraktrabatter med unika rabattetiketter. Den nya rabattegenskapen `applied_to` stöder differentiering mellan rabatter som tillämpas på en vagnsartikel. Tidigare kombinerades alla fraktrabatter till ett hårdkodat **[!UICONTROL Shipping Discount]**-värde.

<!-- ACP2E-1826 -->

* När en administratörsanvändare skapar en ombeställning fylls fakturerings- och leveransadresserna från den initiala ordern automatiskt i de relevanta fälten när administratörsanvändaren klickar på knappen **[!UICONTROL Reorder]** (Admin **[!UICONTROL Sales]** > **[!UICONTROL Orders]** > **[!UICONTROL View]** ). Om samma adresser sparas i kundens adressbok kommer ombeställningen alltid att innehålla en uppdaterad version av adresserna. Tidigare fylldes leveransadressfältet i automatiskt med uppdaterade data, men inte faktureringsadressfältet.

<!-- AC-7003 -->

* Textrutan **[!UICONTROL Shipping Policy]** är nu synlig i omfånget Admin Store-vy när **[!UICONTROL Apply custom Shipping Policy]** den är aktiverad och en anpassad fraktpolicy är tillgänglig. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* Frågan `cart` returnerar nu ett `selected_shipping_method` värde som matchar en av `available_shipping_methods` transportföretags- och metodkoderna. Tidigare, när en av de valda leveransmetoderna innehöll ett understreck, matchades inte dessa transportföretags-/metodkoder. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* `setShippingAddressesOnCart`-mutationen genererar inte längre ett fel när det andra värdet i gatuarrayen är null. Tidigare utlöstes det här undantaget: `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Webbplatskarta

<!-- AC-2465 -->

* XML-webbplatskartan fungerar nu som förväntat i en flerartikeldistribution. Tidigare innehöll platskartorna inte de tilldelade standardsidorna för varje butik. [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Handlare kan nu skapa och spara en produkt när webbplatsen `id != 1` och läget för en butik är aktiverat. Tidigare misslyckades åtgärden Spara med följande meddelande: `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### Moms

<!-- ACP2E-2651 -->

* Fakturor visar nu korrekt delsumma när moms har konfigurerats och FPT är aktiverat.

<!-- ACP2E-2245 -->

* Magento Open Source visar nu korrekt värde för värdet **[!UICONTROL Regular Price]** när ett anpassat alternativ väljs för en produkt som har ett **[!UICONTROL Special Price]**-värde när **[!UICONTROL Price Display Settings]** är inställt på att inkludera moms.

<!-- ACP2E-2303 -->

* Moms inkluderas nu som förväntat i utcheckningspriset för arbetsflöde enligt konfigurationsinställningarna.

<!-- AC-9758 -->

* Svarsvärdet för `cart`-frågan `applied_taxes` innehåller nu alla enskilda momsregler som förväntat. Tidigare returnerades det totala momsvärdet när flera momsregler konfigurerades.

<!-- ACP2E-2247 -->

* Ikonen för att komprimera/expandera för avsnittet **[!UICONTROL Additional Settings]** när momsregler skapas fungerar nu som förväntat. Tidigare fungerade bara expandera-ikonen. [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* Nu kan du redigera värdet för Skattesats, Land och region på redigeringssidan för skatteregel som förväntat. Tidigare sparades inte redigeringar gjorda från den sidan.

<!-- ACP2E-1143 -->

* Momsbeloppet i vagnsberäkningsområdet uppdateras nu som väntat när leveransmetoden uppdateras. Tidigare uppdaterades inte skattesatsen efter det att en köpare bytte land under utcheckningen.

<!-- AC-8227 -->

* Värdet `tax class` för nyskapade enkla produkter ställs nu in på den överordnade produktens värde när nya varianter av en befintlig konfigurerbar produkt skapas i Store View-omfånget. Tidigare var det här värdet inställt på none. Därför lades ingen skatt till i varukorgen och kunderna beskattades inte alls. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Testa

<!-- ACP2E-2501 -->

* Förbättrade `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` testet för att eliminera fel som orsakas av för tidig ifyllning av e-postfältet.

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` har omstrukturerats för att förbättra tillförlitligheten. [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* Testet har åtgärdats `AdminSimpleProductwithTextandVisualSwatch` genom att introducera ett extra steg som uttryckligen anger de attribut som ska användas i sökningen.

<!-- AC-9194 -->

* Korrigerat stavfel i enhetstestet för `SortbyTest`. [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* Referenser till klasser som inte finns i enhetstester har tagits bort. [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* Förbättrade `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` testet för att eliminera fel som orsakas av för tidig ifyllning av e-postfältet.

<!-- ACP2E-2202 -->

* Omstrukturerat `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` test för att hantera slumpmässig kategoriordning i `products` frågesvar.

<!-- AC-6842 -->

* `\Magento\Test\Integrity\Di\CompilerTest::testConstructorIntegrity`-testet verifierar nu alla PHP-klasser från moduler som registrerats av `ComponentRegistrar()`.

<!-- AC-7098 -->

* Prestandaproblem med stora arrayer i `TableNameSniff` har åtgärdats.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` har nu konton för sommartid.

### Gränssnittsramverk

<!-- AC-8039 -->

* Attributet `crossorigin` har lagts till i `linkTypes` för `HEAD`-element.[GitHub-32509](https://github.com/magento/magento2/issues/32509)

<!-- AC-9604 -->

* Bilduppladdaren fungerar nu som väntat på dynamiska rader. Bilder överförs nu korrekt när de skickas som en internationell array. [GitHub-37957](https://github.com/magento/magento2/issues/37957)

<!-- AC-10877 -->

* Filöverföringsformat dupliceras inte längre i Luma-temat. [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* Gatufält i gatufältet Kundkonto redigera adressformulär sparas nu korrekt. Dessa fält sorteras nu korrekt efter de angivna nycklarna i formuläret. [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-3001 -->

* Cumulative Layout Shift-värden (CLS) har förbättrats för produktinformationssidor. (Det här måttet anger den visuella stabiliteten för sidlayouter.) [GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* Förbättrade meddelanden om fel som uppstår under mallåtergivning. Magento Open Source visar nu ett informativt meddelande. Tidigare visade Magento Open Source HTML-läckor när ett PHP-fel inträffade.

<!-- ACP2E-2595 -->

* Anpassade kundattribut (typ `File attached`) fungerar nu korrekt med bilder som har tagits bort och sedan överförts. Tidigare gick det inte att spara anpassade attribut som överförts, sedan tagits bort och sedan överförts igen från butiken.

<!-- AC-9125 -->

* Ett syntaxfel i kalendermallfilen har korrigerats. [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* Administratörsanvändare kan nu ändra skyltfönstrets logotyp när läget för en butik är aktiverat. Tidigare visade Magento Open Source standardlogotypen som reserv. [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Mixins konfigurationsvärden är inte längre tomma, och jQuery-blandningar fungerar nu oavsett laddningsposition. Tidigare lästes inte jQuery-blandningar in konsekvent i alla webbläsare.

<!-- AC-8823 -->

* Lösenord visas nu som förväntat när **[!UICONTROL Show Password]** kryssrutan på inloggningssidan är aktiv.

<!-- ACP2E-2034 -->

* Magento Open Source visar nu korrekta priser för fasta paketprodukter med specialpriser.

<!-- AC-8285 -->

* Länken till listsidan för GitHub-problem i mallfilen för butiksfoten har uppdaterats. [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* Widgeten Senast visade visar nu rätt momsbelopp i grupperade produktpriser. [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* Administratörsanvändare kan nu dra och släppa de anpassningsbara alternativ som skapats för den enkla produkten som förväntat. [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* Ordningen på attributtyperna i listrutan för produkter matchar nu ordningen på bilderna på den konfigurerbara produktsidan. [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* Systemmeddelanden läses nu in snabbare. Endast de meddelanden som visas läses in. Tidigare lästes alla meddelanden in från databasen, som var tidskrävande.

<!-- ACP2E-1804 -->

* Om du tar bort noden för vägbeskrivningar genom att ställa in `remove=true` via XML-layouten tas inte längre sidtiteln bort på kategorisidan. Om du tidigare tog bort vägbeskrivningar på det här sättet togs sidtiteln bort från kategorisidan.

<!-- ACP2E-171 -->

* Kundregistreringsblanketten läses nu in som förväntat när den innehåller kundattribut med flera val. Tidigare inträffade följande undantag i Magento Open Source: `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Välkomstmeddelanden som innehåller enkla citattecken återges nu korrekt på butiken utan konsolfel. Om ett välkomstmeddelande innehöll ett enkelt citattecken lästes inte välkomstmeddelandet in vid återgivning i dispositionen. Magento Open Source visade även konsolfel.

<!-- ACP2E-1369 -->

* Magento Open Source genererar inte längre något fel när du försöker att snabbt ändra vyn mellan kommentarhistorik och Returer på ordersidan i Admin. Tidigare visade Magento Open Source följande allmänna fel: `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Administratörsanvändare med begränsad behörighet till en webbplats kan nu uppdatera webbplatsspecifika produktattribut som angetts till ett `all stores view`-omfång.

<!-- ACP2E-1648 -->

* Förstoringswidgeten läses nu in som väntat på produktsidan.

<!-- ACP2E-1216 -->

* Anpassningsbara alternativ för flera rader återges nu korrekt i PDF-dokument med faktura, leverans och kreditnota. Tidigare föregicks flerradig text av en oväntad sidbrytning, och om texten överskred sidan kortas texten av.

<!-- AC-7402 -->

* Administratörsanvändare kan nu lägga till en ny kundadress från administratören när kunden har skapats för en annan webbplats vars butiks-ID inte matchar webbplats-ID:t. Tidigare visade Magento Open Source detta popup-meddelande: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1775 -->

* Felmeddelanden som är kopplade till att skicka kommentarer på sidan med orderinformation är nu mer informativa. När en kund klickade på **[!UICONTROL Submit comment]** utan att ändra beställningsstatus eller ange text i kommentarsområdet visade Magento Open Source tidigare det här meddelandet: `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* Kalenderikonen visas nu som förväntat i datumintervallfälten på Admin **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** efter att ett datum har valts för ett fält. När du tidigare har valt ett datum för ett fält visades inte kalenderikonen längre i andra fält och Magento Open Source visade platshållartext. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Kundregistreringsformulär som innehåller flervalsfält har nu lästs in. Tidigare lästes inte det här formuläret in när det innehöll flervalsfält och följande fel utlöstes: `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Om du klickar på en videominiatyr i produktgalleriets helskärmsläge visas videon som förväntat. Tidigare visades inte videon och webbläsarkonsolen visade ett JavaScript-fel. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* En variabel som uppdateras automatiskt varje år har lagts till på copyright-raden. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* Skjutreglaget på produktsidan fungerar nu som förväntat i mobilvyn. Tidigare visades bara den första bilden. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### URL-omskrivningar

<!-- ACP2E-2549 -->

* URL-omskrivningar genereras nu baserat på konfiguration av synlighet på butiksnivå i distributioner med flera butiker. Tidigare genererades inte URL-omskrivningar för icke-standardbutiker när produktsynligheten var inställd på att **inte visas** under standardbutiksomfånget.

<!-- AC-10464 -->

* `Category::getUrl()` hämtar inte längre en 301-omdirigering. [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Magento Open Source genererar inte längre produkt-URL-omskrivningar för rotkategorier och för produkter som är inställda på **[!UICONTROL Not Visible Individually]** i flerbutiksinställningar när saknade URL-omskrivningar genereras för anpassade butiker.

<!-- ACP2E-2481 -->

* Kanoniska URL-taggar återspeglar nu de ändringar som förväntas efter att kategorins URL-nyckelegenskap har uppdaterats. Tidigare användes den föråldrade kategori-URL:en, som omedelbart utlöste omdirigeringen till den nya URL:en.

<!-- AC-6728 -->

* URL-omskrivningar för kategoriprodukter genereras nu som förväntat för alla butiksvyer när en produkt läggs till i en kategori. [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Magento Open Source ger inte längre ett fel när du försöker skapa en 301/302-omdirigering för en produkt-URL när **Generera kategori-/produkt-URL-omskrivningar** är aktiverat. När en produkt skapas och tilldelas en kategori skapas automatiserade URL-omskrivningar: en för den direkta URL:en och en för produkten via kategorisökvägen. När en ny omskrivning av produkt-URL:en skapas kontrolleras korrelationer mellan produkt, kategori och butik. Den här kontrollen baseras nu på korrelerade enhetsegenskaper (kategori och produkt). Tidigare utfördes den här kontrollen på befintliga URL-omskrivningar.

<!-- ACP2E-1737 -->

* Omskrivningar av kategori-URL genereras nu för alla butiksvyer när en ny kategori importeras från en CSV-fil.

<!-- ACP2E-1700 -->

* Konfigurationerna för suffix för produkt-URL och kategori-URL matchar nu suffixen i tabellen `url_rewrite` . Tidigare inträffade konkurrensförhållanden vid uppdatering av konfigurationer för URL-suffix och de konfigurerade URL-suffixen `url_rewrite` och tabellen matchade inte.

<!-- ACP2E-1703 -->

* Magento Open Source återger nu kategoriträdet på alla nivåer när kategorins URL-skrivningar skapas. Tidigare visades bara de tre första nivåerna av kategorier. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1737 -->

* Återskrivningar av kategori-URL finns nu i CSV-filen under importen av en ny kategori.

<!-- ACP2E-1668 -->

* CMS-sidor för flera butiker utan URL-omskrivningar vidarebefordras nu som förväntat. Tidigare omdirigerades begärda CMS-sidor för flera butiker utan URL-omskrivningar till butikens hemsida, men de ursprungliga CMS-sidorna dirigerades inte.

### Webb-API-ramverk

<!-- AC-6980 -->

* Magento Open Source visar inte längre en `Integration not secure`-varning i Admin **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** när fälten **[!UICONTROL Callback URL]** och **[!UICONTROL Identity link URL]** är tomma. [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* Tilläggsattributen `taxes`, `itemized_taxes` och `additional_itemized_taxes` har lagts till i  `Magento\Sales\Api\Data\OrderInterface`. Med de här attributen kan du spara tillämpade skatter med REST-anrop för order.

<!-- ACP2E-2610 -->

* REST API:t för nivåpriser har nu stöd för decimalkvantiteter. Tidigare tillät detta API inte decimalkvantiteter även när inställningen **[!UICONTROL Use Decimal Quantity]** var aktiverad.

<!-- AC-8998 -->

* REST-slutpunkten `V1/orders/{id}/comments` ändrar inte längre statusen för en order när du försöker lägga till en kommentar till en väntande orders status. Det ger nu ett informativt fel. Tidigare ändrade den här slutpunkten ordningsstatusen när en kommentar lades till.

<!-- ACP2E-2275 -->

* REST API:t `GET` och `POST V1/products/attributes`-slutpunkten returnerar inte längre samma värde för attributet `is_filterable` för både alternativen `Filterable(with results)` och `Filterable(no results)` för alternativet **[!UICONTROL Use in Layered Navigation]**. Tidigare returnerade den här slutpunkten samma värde eftersom attributegenskapen `is_filterable` var av typen `Boolean`, vilket inte medgav att egenskapen skulle ställas in på `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* Det saknade fältet `media_gallery_entries` har lagts till i REST `V1/configurable-products/sku/children`-slutpunkten. Tidigare saknades den kod som behövs för att lagra och visa `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* REST-metoden `V1/carts/mine/estimate-shipping-methods` validerar nu alla nivåer av nyttolastfältdata och returnerar en 400 HTTP-kod för ogiltiga data. Tidigare validerades endast den första nivån av API-nyttolast, och om ogiltiga data returnerades i icke-validerade nivåer av nyttolasten returnerade Magento Open Source en 500-statuskod.

<!-- ACP2E-2053 -->

* Asynkrona REST API-åtgärder i bulk för att uppdatera produkter med nivåpriser och olika attributuppsättningar har nu slutförts. Tidigare gick det inte att uppdatera produkter med olika attributuppsättningar på det här sättet och följande fel visades i Magento Open Source: `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* Slutpunkten `POST /V1/products/tier-prices` returnerar nu ett mer informativt felmeddelande när ett ogiltigt kundgruppsnamn används när skiktpriset skapas. Tidigare returnerade Magento Open Source ett fel så här: `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* Nu kan du köra en auktoriserad asynkron mass-API-begäran för att skapa kunder med ett grupp-ID som inte är standard. Tidigare återställdes grupp-ID:t av dessa begäranden till standardvärdet.

<!-- ACP2E-1543 -->

* Kunder som skapats med hjälp av Bulk API får nu e-postmeddelanden om kundregistrering på det språk som är konfigurerat på deras tilldelade webbplats. Tidigare skickades alla e-postmeddelanden till standardspråkområdet, inte till språkområdet på den webbplats som kunden är tilldelad.

<!-- ACP2E-1339 AC-7577-->

* `POST V1/guest-carts`-anropet skickar inte längre gästorder när **[!UICONTROL Allow Guest Checkout]** är inaktiverat.

<!-- ACP2E-1526 -->

* Magento Open Source returnerar nu attributet `content` (base64-bildkod) i `GET V1/products/sku/media` API-svar för produktmedia. Attributet `content` visades inte tidigare i svaret.

## Systemkrav

Vår teknikstack bygger på PHP och MySQL. Mer information finns i [Systemkrav](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Installations- och uppgraderingsanvisningar

Du kan installera Magento Open Source 2.4.7 med [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
