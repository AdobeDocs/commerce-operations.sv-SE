---
title: Versionsinformation om Adobe Commerce 2.4.2
description: Läs om nya funktioner, förbättringar, felkorrigeringar och kända fel i Adobe Commerce version 2.4.2.
exl-id: eb6c836c-0725-4f82-97ab-317b45ba55db
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '15295'
ht-degree: 0%

---

# Versionsinformation om Adobe Commerce 2.4.2

Adobe Commerce 2.4.2 innehåller förbättringar av prestanda och säkerhet samt betydande plattformsförbättringar. Säkerhetsförbättringarna inkluderar utökat stöd för attributet `SameSite` för alla cookies. B2B-förbättringarna fokuserar på stöd för onlinebetalningar för inköpsorder. Stöd för Elasticsearch 7.9.x och Redis 6.x finns nu.

Den här versionen innehåller över 280 nya korrigeringar av kärnkod och 35 säkerhetsförbättringar. Det innehåller en lösning på nästan 290 GitHub-problem som våra communitymedlemmar har. Dessa communitybidrag omfattar allt från mindre rensning av kärnkod till betydande förbättringar i GraphQL.

Alla kända fel som identifierats i 2.4.1 har åtgärdats i den här versionen.

{{bics}}

## Använd `AC-3022.patch` om du vill fortsätta erbjuda DHL som fraktfirma

DHL har introducerat schemaversion 6.2 och kommer inom kort att föråldra schemaversion 6.0. Adobe Commerce 2.4.4 och tidigare versioner som stöder DHL-integration stöder endast version 6.0. Merchants som distribuerar dessa releaser ska tillämpa `AC-3022.patch` så snart som möjligt för att fortsätta erbjuda DHL som fraktfirma. Information om hur du hämtar och installerar korrigeringsfilen finns i [Använd en korrigeringsfil för att fortsätta erbjuda DHL som fraktfirma](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier).

## Säkerhetsuppdatering

Merchants kan nu installera tidskänsliga säkerhetskorrigeringar utan att tillämpa de hundratals funktionella korrigeringar och förbättringar som finns i en fullständig kvartalsversion (till exempel 2.4.1-p1). Patch 2.4.0.12 (Composer package 2.4.1-p1) är en säkerhetspatch som innehåller korrigeringar för säkerhetsluckor som har identifierats i vår tidigare kvartalsversion, 2.4.1. Alla snabbkorrigeringar som tillämpades på version 2.4.1 ingår i den här säkerhetspatchen. (En *snabbkorrigering* åtgärdar ett problem eller ett fel i en släppt version.)

Allmän information om säkerhetsuppdateringar finns i [Introduktion till den nya säkerhetsuppdateringen](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Instruktioner om hur du hämtar och använder säkerhetsuppdateringar (inklusive patch 2.4.1-p1) finns i [Snabbstart av lokal installation](../../../installation/composer.md). Säkerhetsuppdateringar innehåller endast säkerhetsfelkorrigeringar, inte de ytterligare säkerhetsförbättringar som ingår i den fullständiga korrigeringen.

## Annan versionsinformation

Även om koden för de här funktionerna paketeras med kvartalsvisa utgåvor, kommer flera av dessa projekt (till exempel B2B, Page Builder och Progressive Web Applications (PWA) Studio) också att släppas oberoende av varandra. Felkorrigeringar för dessa projekt beskrivs i den separata, projektspecifika versionsinformation som finns i dokumentationen för varje projekt.

## Högdagrar

Leta efter följande högdagrar i den här versionen.

### Betydande säkerhetsförbättringar

Den här versionen innehåller över 35 säkerhetskorrigeringar och plattformssäkerhetsförbättringar. Alla säkerhetskorrigeringar har backporterats till 2.4.1-p1 och 2.3.6-p1.

#### Mer än 35 säkerhetsförbättringar som kan åtgärda säkerhetsluckor vid fjärrexekvering av kod (RCE) och cross-site scripting (XSS)

Inga bekräftade attacker relaterade till dessa problem har inträffat hittills. Vissa säkerhetsluckor kan dock utnyttjas för att få tillgång till kundinformation eller ta över administratörssessioner. De flesta av dessa problem kräver att en angripare först får åtkomst till administratören. Därför påminner vi dig om att vidta alla nödvändiga åtgärder för att skydda din administratör, inklusive men inte begränsat till dessa åtgärder: IP-tillåtelselistning, [tvåfaktorsautentisering](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/), användning av ett VPN, användning av en unik plats i stället för `/admin` och god lösenordshygien. Se [Adobe säkerhetsbulletin](https://helpx.adobe.com/se/security/products/magento/apsb21-08.html) för en diskussion om dessa åtgärdade problem.

#### Ytterligare säkerhetsförbättringar

Säkerhetsförbättringar för den här versionen är:

* Alla kärncookies har nu stöd för attributet `SameSite`.

* Programmet visar nu meddelanden som identifierar potentiellt skadligt innehåll i beskrivningsfält för produkter och kategorier när användaren försöker spara värden i dessa fält.

* Filsystemåtgärder mellan komponenter har standardiserats och härdats för att förhindra skadliga överföringar.

* CSP-överträdelser (Core Content Security Policy) har åtgärdats.

{{cve-notice}}

### Förbättrade infrastrukturer

Den här versionen innehåller förbättringar av den grundläggande kvaliteten, som förbättrar ramverkets kvalitet och dessa funktionsområden: Kundkonto, Katalog, CMS, OMS, Import/Export, Kampanjer och målinriktning, Kart och Kassa, B2B samt Förproduktion och förhandsgranskning.

### Förbättringar av plattformen

* [**Elasticsearch 7.9.x stöds nu**](../../../installation/system-requirements.md). Även om vi rekommenderar att du kör Elasticsearch 7.9.x är version 2.4.x fortfarande kompatibel med Elasticsearch 7.4.x. <!-- MC-36867-->

* 2.4.2 har testats med [Varnish 6.4](../../../installation/system-requirements.md). Version 2.4.x är fortfarande kompatibel med lack 6.x.

* [**Redis 6.x stöds nu**](../../../installation/system-requirements.md). Version 2.4.x är fortfarande kompatibel med Redis 5.x. <!-- MC-34853-->

* 2.4.2 är nu kompatibelt med **Composer 2.x**. Vi rekommenderar att handlare migrerar till Composer 2.x. Även om du kan installera den här versionen med Composer 1.x kommer Composer 1.x snart att ha nått slutet av livscykeln. En översikt över funktionerna i Composer 2.x finns i [Composer 2.0 är nu tillgänglig!](https://blog.packagist.com/composer-2-0-is-now-available/)

Möjligheten att konfigurera en installation att använda en delad databas har tagits bort i den här versionen. Handlare som för närvarande använder en delad databas bör börja planera att återgå till eller migrera till en enda databas eller använda en alternativ metod. En översikt av det här problemet finns i [Borttagning av delad databasfunktion i Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog-inlägg.  Se [Återgå från en delad databas till en enskild databas](../../../configuration/storage/revert-split-database.md) för migreringsanvisningar.

### Prestandaförbättringar

Den här versionen innehåller kodförbättringar som förbättrar API-prestanda och Admin-svarstid för distributioner med stora kataloger. Flera skalbarhetsförbättringar gör att 2.4.2 kan hantera komplexa kataloger upp till 20 gånger större än i tidigare versioner.

### GraphQL

Den här versionen innehåller GraphQL-avtal för följande funktioner:

* Stöd för flera önskelistor har lagts till. Du kan använda GraphQL för att [skapa](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/create/), [ta bort](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/delete/) och [byta namn på](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update/) önskelistor samt för att [flytta](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/move-products/) eller [kopiera](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/copy-products/) objekt mellan dem. <!-- MC-32356-->

* Stöd för returnerad varuauktorisering (RMA) har lagts till. Köpare kan [begära retur](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/request-return/). Om handlaren accepterar begäran kan han/hon utföra uppgifter som att [lägga till en kommentar](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/add-return-comment/) och [lägga till spårningsinformation](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/add-return-tracking/). <!-- MC-34596-->

* Stöd för följande B2B-funktioner:
   * Företag. Du kan lägga till företag [administratörer](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/mutations/create/), [användare](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/mutations/create-user/), [roller](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/mutations/create-role/) och [team](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/mutations/create-team/). <!-- MC-33861-->
   * Företagskrediter. [företagsfrågan](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/queries/company/) innehåller information om företagets kredithistorik. <!-- MC-33862-->
   * Rekvisitionslistor. Du kan [skapa](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/create/), [ta bort](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/delete/) och [uppdatera](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/update/) rekvisitionslistor. Supporten inkluderar även möjligheten att [lägga till](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/add-products/), [uppdatera](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/), [ta bort](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/delete-items/), [kopiera](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/copy-items/) och [flytta](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/move-items/) objekt i en rekvisitionslista samt lägga till rekvisitionslistobjekt [i kundvagnen](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/requisition-list/mutations/add-items-to-cart/). <!-- MC-34312-->

* Stöd för fackföreningar i GraphQL har lagts till. [GitHub-29425](https://github.com/magento/magento2/issues/29425) <!-- ENGCOM-8291 -->

* Stöd för [jämförelselistor](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/compare-list/) har lagts till. Köpare kan [skapa](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-compare-list/)- och [ta bort](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/delete-compare-list/)-jämförelselistor och [lägga till](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/add-products-to-compare-list/)- och [ta bort](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/remove-from-compare-list/)-objekt i jämförelselistorna. Dessutom kan kunder som skapar en jämförelselista som gäst logga in som kund och [behålla](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/assign-compare-list/) sina jämförelselistor.

* [`generateCustomerTokenAsAdmin`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/generate-token-as-admin/)-mutationen har lagts till och `Customer`-objektet har uppdaterats med stöd för fjärrinköpshjälp.

* Stöd för lokalisering i olika butiker som stöd för t.ex. byte av språk, kundvagn och valutor. <!-- MC-37801-->

* GraphQL-schemat har förbättrats för att optimera hämtning av produktdata för konfigurerbara produkter med många varianter. <!-- MC-36138-->

* Objekt-ID för heltalstyp har ersatts med attribut av typen `uid`. <!-- MC-36346-->

* Attributet `staging` har lagts till i [`ProductInterface`](https://developer.adobe.com/commerce/webapi/graphql/schema/products/interfaces/attributes/) och [`CategoryInterface`](https://developer.adobe.com/commerce/webapi/graphql/schema/products/interfaces/category/) för att avgöra om en produkt har mellanlagrats och för att visa den associerade kampanjinformationen. <!-- MC-33897-->

Mer information om dessa förbättringar finns i [GraphQL Developer Guide](https://developer.adobe.com/commerce/webapi/graphql/).

### B2B

2.4.2 inför B2B v1.3.1. Den här versionen innehåller stöd för onlinebetalningar för inköpsorder samt flera felkorrigeringar.

**Inköpsorder kan nu slutföras med onlinebetalningsmetoder**. B2B-köpare uppmanas att välja sin betalningsmetod för varje [inköpsorder](https://experienceleague.adobe.com/sv/docs/commerce-admin/b2b/purchase-orders/purchase-order-flow) under den första utcheckningen. När inköpsordern har godkänts uppmanas köparna att ange betalningsinformation för att konvertera inköpsordern till en slutgiltig order.

Den här funktionen har även stöd för ett fullständigt arbetsflöde för att acceptera onlinebetalningar:

* Åsidosätter befintliga mallar för betalningsmetoder vid den första utcheckningen för att upprätthålla PCI-kompatibilitet.

* Upprätthåller kompatibilitet med betalningsmetoder som utvecklats av tredje part, anpassade och i communityn.

* Meddelar köpare via e-post när de behöver lägga till betalningsinformation i en godkänd inköpsorder.

* Gör det möjligt att anpassa e-postmeddelanden från administratören, vilket gör att handlare kan använda mallar som är konsekventa med deras varumärke.

* Introducerar ett `Approved – Pending Payment`-läge för inköpsorder för att tydligt visa när åtgärd krävs.

* Förhindrar att rabattkoder läggs till eller tas bort vid det sista betalningssteget, vilket säkerställer att orderns totala belopp förblir oförändrat för godkända inköpsorder.

* Gör det möjligt för köpare att ändra betalningsmetoden under det sista betalningssteget för att bibehålla flexibiliteten och öka konverteringsgraden.

Den här versionen innehåller även flera felkorrigeringar. Se [Versionsinformation för B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html?lang=sv-SE).

### PWA Studio

Den här versionen av PWA Studio innehåller:

* Internationalisering och lokalisering. Venia har nu stöd för flera språk och valutor.

* Förbättrat ramverk för utbyggbarhet som stöder kodändringar via tillägg.

* Initiala komponenter för Mitt konto, till exempel Önsklista, Sparade betalningar, Adressbok och Orderhistorik.

* Olika prestandaoptimeringar och felkorrigeringar.

Mer information om förbättringar och felkorrigeringar finns i [PWA Studio-utgåvor](https://github.com/magento/pwa-studio/releases). Se [kompatibilitet](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) för en lista över PWA Studio-versioner och deras kompatibla versioner.

### Page Builder

Den här versionen innehåller förbättringar av innehållsmigrering i Page Builder och anpassning av CSS i Page Builder:

* Utvecklare kan nu formatera innehållstyputdata på olika sätt per visningsruta utan att använda direktivet `!important`.

* Innehåll som migreras till Page Builder fylls inte längre ut med standardformat för infogad text.

* Page Builder kräver inte längre att alla innehållstyper placeras i en rad. [Page Builder-scenen](https://experienceleague.adobe.com/sv/docs/commerce-admin/page-builder/walkthrough/3-catalog-content#stage) är nu tom från början och har stöd för att lägga till följande innehållstyper direkt på scenen: Rader, kolumner, flikar, HTML-kod, block, dynamiska block.

* Fördefinierade marginaler och utfyllnader behövs inte längre för innehållstyper.

* Med den nya [visningsruteväljaren](https://experienceleague.adobe.com/sv/docs/commerce-admin/page-builder/walkthrough/3-catalog-content#viewports) för mobilen och visningsruteomfånget för formulärfältvärden kan användare och utvecklare utföra följande åtgärder:

   * Visa innehåll på olika visningsportar vid redigering.

   * Optimera fältparametern för minsta höjd för olika innehållstyper för varje visningsruta. (Endast en parameter (min height) stöds inte. Anpassad utveckling krävs för att aktivera mobiloptimering för andra innehållsparametrar.)

   * Lägg till fältomfång i anpassade fält och fältuppsättningar (utvecklare).

### Interaktiv produktvägledning

Interaktiv produktvägledning ger säljarna användningstips och information inifrån administratören om nya funktioner, genomgångshandböcker, introduktionsinformation och verktygstips.  **Administratörer måste avanmäla sig från administratören för att få produktvägledning om den här funktionen inte är aktiverad**. Se [Användning av datainsamling](https://experienceleague.adobe.com/sv/docs/commerce-admin/start/admin/admin) och [Administratörsanvändning](https://experienceleague.adobe.com/sv/docs/commerce-admin/config/advanced/admin#admin-usage).

### Adobe Stock Integration

Den här versionen innehåller Adobe Stock Integration v2.1.1.

### Mediegalleri

**Nya rollresurser för mediegalleriet**. Den här versionen ger säljarna möjlighet att begränsa administratörsåtkomst till endast mediegalleriet och styra vem som kan utföra dessa åtgärder:

* Infoga medieresurser i innehåll

* Överför resurser

* Redigera resursinformation

* Ta bort resurser från mediegalleriet

* Hantera mappstruktur.

**Webboptimerade bilder i innehållet**. Merchants kan nu använda [webboptimerad bildåtergivning](https://experienceleague.adobe.com/sv/docs/commerce-admin/content-design/wysiwyg/gallery/media-gallery-image-optimization) i innehåll i stället för högupplösta bilder. Originalbilden ändras inte i Mediegalleriet och bildåtergivningen genereras dynamiskt när bilden infogas i innehållet.

### Förbättrat stöd för AWS S3

Stöd för Amazon Simple Storage Service (AWS S3) har förbättrats och omfattar stöd för:

* Objektlagring och framtida utbyggbarhet

* [Lagra mediefiler](../../../configuration/remote-storage/remote-storage.md) på AWS S3

Stöd för AWS S3 har lagts till i alla moduler, inklusive B2B, PageBuilder och Adobe Stock Integration.

### Functional Testing Framework (MFTF)

MFTF 3.2.1 finns nu att köpa. I den här versionen introduceras feltolerans i både tester och testsvitgenerering. Ytterligare förbättringar och felkorrigeringar beskrivs i [Functional Testing Framework Changelog](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Order Management System (OMS)

MCOM Connector är helt kompatibel med 2.4.2. Felkorrigeringar och förbättringar av kopplingen beskrivs i [Versionsinformation för Connector](https://commerce-docs.github.io/oms-documentation-archive/release-notes/connector/index.html). Den här versionen innehåller förbättringar av kommandoradsgränssnittet för OMS, som nu innehåller utförlig information som partners och supportteam kan använda för att felsöka `retry`-, `queue_prune`-, `order_sync`-, `message process`- och `catalog export`-processer.

### Tillägg som utvecklats av leverantör

I följande artiklar finns information om uppdateringar av funktioner och ändringar för den här versionen:

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html). Amazon Pay har tagits bort i den här versionen och tas bort i Magento 2.5.0. Version 2.4.3 och senare kommer endast att innehålla uppdateringar för kompatibilitet och korrigeringar för större fel.

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html?lang=sv-SE)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Vertex Cloud](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Produktrecensioner i Yotpo](https://marketplace.magento.com/yotpo-module-yotpo.html)

## Åtgärdade problem

Vi har åtgärdat hundratals problem i 2.4.2-kärnkoden.

### Installation, uppgradering, driftsättning

<!-- MC-38429-->

* Möjligheten att konfigurera en installation att använda en delad databas har tagits bort i den här versionen. Se [Borttagningen av den delade databasfunktionen i Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog-inlägget.

<!-- MC-36472-->

* Merchants kan nu uppgradera en Open Source-distribution som kör MySQL 8.x till en Commerce-distribution. Tidigare uppstod ett undantag när `AUTO_INCREMENT`-värden återställdes till startvärden för alla tabeller där `row_id` lades till under uppgraderingen.

<!-- ENGCOM-7280 -->

* Programmet visar nu ett felmeddelande som identifierar sökvägen som användes för att skapa korrigeringen om ett fel inträffar när `bin/magento/setup:db:generate-patch` körs. [GitHub-27523](https://github.com/magento/magento2/issues/27523)

<!-- ENGCOM-8029 -->

* `block_html`-, `full_page`- och `layout`-cacheminnen är nu inaktiverade som förväntat efter körningen av `bin/magento/setup:upgrade`. [GitHub-28186](https://github.com/magento/magento2/issues/28186)

<!-- ENGCOM-8184 -->

* Den PHP-version som krävs i `bootstrap.php` har uppdaterats. [GitHub-30004](https://github.com/magento/magento2/issues/30004)

<!-- MC-38788-->

* Du kan nu köra `bin/magento/setup:upgrade` när du har installerat exempeldata. Tidigare, när du försökte köra `bin/magento/setup:upgrade`, visade programmet följande fel: `unable to apply data patch magento\catalogrulesampledata\setup\patch\data\installcatalogrulesampledata for module magento_catalogrulesampledata`. Programmet visade även det här felet i systemloggen: `main.ERROR: Sample Data error: Unable to unserialize value. Error: Syntax error`. [GitHub-30685](https://github.com/magento/magento2/issues/30685)

<!-- MC-36785-->

* Nu kan du ange en YouTube API-nyckel från kommandoraden som förväntat. Tidigare returnerade programmet det här felet när du försökte köra `bin/magento config:sensitive:set catalog/product_video/youtube_api_key`: `There are no sensitive configurations to fill`.

<!-- ENGCOM-8163 -->

* Programmet uppfyller nu `maxMessages`-värdena som definieras i `queue_consumer.xml`. Tidigare använde programmet bara konfigurationsvärdena för distributionen. [GitHub-29522](https://github.com/magento/magento2/issues/29522)

<!-- ENGCOM-8243 -->

* URL-generering för en ny butik fungerar nu som väntat när butiken skapas med `bin/magento setup:config:import`. Tidigare genererades inte URL-omskrivningar i produktionsmiljöer. [GitHub-30025](https://github.com/magento/magento2/issues/30025)

<!-- ENGCOM-8230 -->

* Frågan visas inte längre i programmet när du kör `bin/magento setup:install` för att ansluta till den befintliga databasen: `Overwrite the existing configuration for db-ssl-verify?[Y/n]`. [GitHub-29612](https://github.com/magento/magento2/issues/29612)

### AdminGWS

<!-- MC-37040-->

* Knappen **Lägg till ny klassificering** och knapparna **Spara**, **Ta bort**, **Återställ** är inte längre tillgängliga på sidan **Lager** > **Attribut** > **Klassificering** för en administratör med begränsade behörigheter.

<!-- MC-35804-->

* Administratören visar nu endast data från webbplatser som den inloggade administratören har behörighet till. Tidigare visade administratören data från alla webbplatser i distributionen.

<!-- MC-35027-->

* Alla valda webbplatser lagras nu i `gws_websites` oavsett storleken på webbplats-ID:t. Tidigare trunkerades webbplats-ID:n och listan över valda webbplatser sparades inte i databasen. Användarroller sparades inte korrekt och det här felet visades i programmet när en handlare försökte ändra och spara en roll: `The "X" store ID is incorrect. Verify the store ID and try again`.

<!-- MC-37223-->

* Programmet visar nu korrekt antal objekt i administratörsrutnät för användare med begränsat antal administratörer. Tidigare visade räkningarna som visades för dessa rutnät data för alla länder medan rutnätet visade data endast från vissa länder. (Den här korrigeringen åtgärdar ett problem med rutnät för kundsegment, katalogprisregler, kundprisregler, alla användare, låsta användare och användarroller.)

<!-- MC-34156-->

* Administratörer vars behörigheter utesluter `Magento_Catalog::edit_product_design` (Redigera produktdesign) kan nu skapa en ny produkt genom att spara en befintlig produkt med ett nytt namn i den valda butiksvyn. Tidigare visade programmet följande fel: `Not allowed to edit the product's design attributes`. [GitHub-28106](https://github.com/magento/magento2/issues/28106)

<!-- MC-36406-->

* Programmet visar inte längre knappen **Lägg till attribut** på sidor under **Lagrar** > Attribut när en administratör saknar tillräcklig behörighet för att skapa de här entiteterna. Tidigare inträffade ett 404-fel i programmet när en webbplatsadministratör som inte hade rätt behörighet försökte skapa ett **attributuppsättning** eller **kund** -attribut.

<!-- ENGCOM-8230 -->

* Programmet genererar inte längre något fel när du försöker ändra `backend-frontname` med behållaren `ssh` efter att ha installerat Adobe Commerce. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

### Adobe Stock Integration

<!-- ENGCOM-8020-->

* Stöd för läsning av `exif_image.png`- eller `exif-image.jpeg`-metadata har lagts till. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8194 8094 8147 -->

* Innehållet som visas när du klickar på bokmärket Standardvy för Mediegalleriet filtreras inte längre. Tidigare innehöll standardvyn ett filter som tillämpades från `url-filter` applier. [GitHub-1813](https://github.com/magento/adobe-stock-integration/issues/1813), [GitHub-1789](https://github.com/magento/adobe-stock-integration/issues/1789), [GitHub-1780](https://github.com/magento/adobe-stock-integration/issues/1780)

<!-- ENGCOM-8070 -->

* Logiken har tagits bort från WYSIWYG OnInsert-styrenheten (`Magento\Cms\Controller\Adminhtml\Wysiwyg\Images\OnInsert::execute()`) och lagts till i modellen `Model\Wysiwyg\Images\PrepareImage::execute()`. [GitHub-1504](https://github.com/magento/adobe-stock-integration/issues/1504)

<!-- ENGCOM-8081 -->

* Områdesemulering har tagits bort från kommandot `media-content:sync` (`\Magento\MediaContentSynchronization\Console\Command\Synchronize::execute`). [GitHub-1784](https://github.com/magento/adobe-stock-integration/issues/1784)

### Analyser

<!-- MC-37137-->

* Avancerad rapportering fungerar nu som väntat i flera miljöer i samma domän. Tidigare misslyckades CSV-filer som genererades av Advanced Reporting eftersom dubbla citattecken escape-konverterades med omvända snedstreck i stället för med ett annat dubbelt citattecken enligt CSV-standard RFC4180.

<!-- MC-35996-->

* Jobbet `analytics_collect_data` körs nu när standardporten eller icke-standardporten används för att ansluta till MySQL i `env.php`. Tidigare inträffade ett fel i `analytics_collect_data` när du använde icke-standardporten.

<!-- MC-35407-->

* CSV-filer som genereras av `analytics_collect_data` har nu fått korrekt escape-konvertering. Tidigare genererades dessa filer inte med korrekt flytning, vilket förhindrade genereringen av inventeringsrapporter.

### Braintree

* Nu kan köpare använda Apple Pay för att beställa virtuella produkter. Tidigare uppstod följande fel i programmet: `There are no shipping methods available for you right now. Please try again or use an alternative payment method`.

* Betalningsmetoden PayPal Express Checkout fungerar nu som väntat med betalningsmetoden Braintree Credit Card. Tidigare visades inte knappen **PayPal** i programmet när betalningsmetoden för Braintree-kreditkort var aktiverad.

### Paketprodukter

<!-- MC-34063-->

* Programmet sätter inte längre priser för underordnade produkter till fasta priser inom citattecken.

<!-- MC-38050-->

* Prissortering fungerar nu som väntat när paketprodukter innehåller färdiga produkter. Tidigare visades inte produkter i sorteringspriset i fallande ordning i ordning efter minskande pris.

<!-- MC-38576-->

* Programmet tillämpar nu automatiskt standardkvantiteten 1 för produktalternativ när det finns många alternativ. Tidigare var handlarna tvungna att manuellt tilldela respektive alternativ en standardkvantitet.

<!-- ENGCOM-8159 -->

* På sidan Skapa på orderfakturan visas nu de underordnade produkterna för paketprodukter som förväntat. [GitHub-27350](https://github.com/magento/magento2/issues/27350)

<!-- MC-38460 -->

* Programmet tilldelar nu rätt produktpriser när du beställer enkla produkter som ingår i en paketprodukt till ett anpassat pris. Tidigare ledde fastställandet av ett anpassat pris på en paketprodukt till felaktiga priser på bifogade enkla produkter när de beställdes på nytt. [GitHub-30343](https://github.com/magento/magento2/issues/30343)

<!-- MC-30348 -->

* Om POST `/V1/order/{orderId}/ship` anropas för att leverera en order som innehåller en paketprodukt markeras ordern som slutförd som förväntat. Tidigare visades följande felmeddelande i programmet: `You can't create a shipment without products`. [GitHub-9762](https://github.com/magento/magento2/issues/9762)

### Kundvagn och kassan

<!-- MC-34264-->

* Leveransmetoduppskattaren fungerar nu som väntat när anpassade adressattribut finns i leveranssteget i arbetsflödet för utcheckning. Tidigare visades följande felmeddelande i programmet: `{"message":"Error occurred during \"custom_attributes\" processing. A custom attribute is specified with a missing attribute code. Verify the code and try again."}` [GitHub-27505](https://github.com/magento/magento2/issues/27505)

<!-- MC-35783-->

* Programmet visar nu meddelandet `You have no items in your shopping cart` i minivagnen som förväntat när en kund tar bort det enda objektet i kundvagnen. Tidigare uppdaterades inte kundvagnsdata för `checkout/cart/removeFailed` när en kund tog bort det enskilda objektet och programmet visade följande meddelande: `1 product requires your attention`.

<!-- MC-36088-->

* Ansökan visar inte längre fraktkostnaden för en order om en ej tillämplig fraktmetod. Tidigare visade programmet priset 0 för en ej tillämplig leveransmetod i arbetsflödet för utcheckning.

<!-- MC-36598-->

* En kunds standardfaktureringsadress väljs nu när kryssrutan **Min fakturerings- och leveransadress är densamma** i arbetsflödet för utcheckning är avmarkerad.

<!-- MC-36685-->

* Administratörer kan lägga till en produkt i en kundvagn med SKU från administratören utan att omdirigeras från administratören. Administratören omdirigeras inte längre till en butikssida och produkten visas som förväntat i avsnittet Admin Shopping Cart Items.

<!-- MC-36750-->

* Programmet visar nu informativa felmeddelanden när du överför en CSV-fil som innehåller flera typer av fel när du lägger till produkter i kundvagnen. Tidigare visade programmet en tom sida och ett generiskt felmeddelande när du klickade på **Välj Arkiv** på **Hantera kundvagn** > **Lägg till i kundvagnen via SKU**.

<!-- MC-37351-->

* Kundvagnens innehåll förloras inte längre när en kund byter från en butik till en annan i en annan domän.

<!-- MC-38000-->

* Köpare kan nu slutföra en beställning med hjälp av Checka ut med flera adresser när de använder flera leveransmetoder. Tidigare visade programmet följande fel: `There has been an error processing your request`. [GitHub-30197](https://github.com/magento/magento2/issues/30197)

<!-- MC-38048-->

* Programmet visar nu rätt standardland på utcheckningsarbetsflödets utcheckningssida när kunden ändrar butiksvyn från kundvagnen.

<!-- MC-38309-->

* Programmet exkluderar nu den aktuella sessionen när kundsessioner rensas efter en lösenordsåterställning efter utloggning när en gästkund är inloggad. Tidigare tömde programmet kundvagnen när kunden återställde sitt lösenord.

<!-- MC-36884-->

* Programmet visar nu rätt standardland för en butiksvy när en kund ändrar butiksvyn i kundvagnen. Tidigare var standardlandet felaktigt när butiksvyn ändrades i kundvagnen.

<!-- MC-38723-->

* Den sekvens i vilken katalogbehörigheter konfigureras förhindrar inte längre administratörer med rätt behörigheter att lägga till produkter i kundvagnen. Tidigare verifierade inte programmet konfigurationsinställningarna för `addToCart` för den aktuella kundgruppen. Därför uppstod ett fel när en administratör försökte lägga till en produkt i kundvagnen.

<!-- MC-38746-->

* Redundanta anrop till slutpunkten `/rest/V1/guest-carts/cart_id/totals-information` i kundvagnen har tagits bort, vilket har förbättrat kundvagnens prestanda. När en kund tidigare lade till en produkt i kundvagnen och sedan visade kundvagnen anropade programmet metoden `collectAddressTotals` flera gånger.

<!-- MC-38833-->

* Programmet visar inte längre fältet **Region** för ett land i arbetsflödet för utcheckning när inställningen **Tillåt att välja läge är valfri för land** är inaktiverad. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- MC-38813-->

* Programmet upprepar inte längre en leveransadress i arbetsflödet för utcheckning av butiker när en order beställs på nytt av administratören.

<!-- MC-38814-->

* Problem med designen för `AdminMediaGalleryInsertLargeImageFileSizeTest` har korrigerats.

<!-- MC-37321-->

* Alla nya poster i tabellen `quote` för gäster tilldelas nu värdet 1 i `customer_is_guest field`. Tidigare tilldelades posten 0 i fältet `quote.customer_is_guest` för varje ny gäst som lade till en produkt i kundvagnen.

<!-- ENGCOM-8091 -->

* Knappen **Skicka** i avsnittet Granska och betalningar i arbetsflödet för utcheckning har flyttats till `<form id="purchaseorder-form"...></form>`, vilket gör implicit formuläröverföring möjlig utan att någon JavaScript ändras. [GitHub-27925](https://github.com/magento/magento2/issues/27925)

<!-- ENGCOM-8428 -->

* Programmet visar inte längre fältet **Region** i arbetsflödet för utcheckning när inställningen **Tillåt att välja läge är valfri för land** är inaktiverad. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- ENGCOM-8442 -->

* Programmet uppdaterar nu kundvagnens artikeldelsumma korrekt när en kund klickar på **Uppdatera kundvagn** vid utcheckning med flera adresser. [GitHub-30408](https://github.com/magento/magento2/issues/30408)

<!-- ENGCOM-8283 -->

* Programmet genererar inte längre ett undantag när det finns `config.xml` noder för betalningsmetoder som inte är installerade. Tidigare utlöstes ett undantag under utcheckningen av programmet. [GitHub-29555](https://github.com/magento/magento2/issues/29555)

<!-- ENGCOM-8215 -->

* Programmet återger nu produktnamn som innehåller specialtecken på rätt sätt i minikorgen. [GitHub-29075](https://github.com/magento/magento2/issues/29075)

<!-- ENGCOM-8308 -->

* Programmet ställer nu in rätt rabattpaket för registerpriset. Tidigare tillämpades ingen kundvagnsregel som angav en rabatt på vagnen när den beräknade registerräntan. [GitHub-30169](https://github.com/magento/magento2/issues/30169)

### Kundprisregel

* Kundprisreglerna tillämpas nu som förväntat när delsummor för order beräknas utan att inkludera moms. Det nya alternativet `Subtotal (Incl. Tax)` har lagts till som ett villkor för kundprisregel.

<!-- MC-37884-->

* Om du tillämpar en prisregel med en kupong som använder GraphQL fungerar nu som väntat när åtgärden **Fast belopprabatt för hela kundvagnen** används.

### Katalog

<!-- MC-34100-->

* Programmet visar nu alla återaktiverade produkter i butiken som förväntat. Tidigare, när en produkt inaktiverades och sedan återaktiverades, visades inte produkten i programmet förrän cache-minnet för sidan &quot;Varnish&quot; rensades eller butiken indexerades om eftersom sidcachen inte ogiltigförklarades efter att en produkt återaktiverats.

<!-- MC-37745-->

* Partiell omindexering av stora kataloger fungerar nu som väntat. Tidigare försvann produkter slumpmässigt från kategorisidan för butiker vid omindexering med den partiella indexeraren `catalogsearch_fulltext`.

<!-- MC-35123-->

* Köpare kan nu beställa en fakturerad order av en produkt på nytt med anpassningsbara alternativ som förväntat. Tidigare uppstod det här felet i programmet när en kund försökte beställa om: `{"0":"The product's required option(s) weren't entered. Make sure the options are entered and try again`.

<!-- MC-35212-->

* Du kan nu ange inställningen **Layout** på kategoridesignsidan till **Inga layoutuppdateringar**. Tidigare återgick programmet till **Category - FullWidth** när du tilldelade värdet **No layout updates**.

<!-- MC-35490-->

* Problem med sorteringsordningen i butiken har lösts. Tidigare, när programmet indexerade produktpriser, ställdes en konfigurerbar produkts `min_price` och `max_price` in på 0 i tabellen `catalog_product_index_price`, vilket påverkade prissorteringsordningen i butiken.

<!-- MC-35608-->

* Programmet uppdaterar nu attribut med etiketten `Product Type`. Tidigare, eftersom attributet `product_type` var reserverat i koden, visade programmet det här meddelandet när du försökte uppdatera ett `Product Type` -attribut: `An attribute with the same code (product_type) already exists.`

<!-- MC-36214-->

* Programmet ändrar inte längre positionen för en överförd video i avsnittet Bilder och videoklipp på sidan med produktinformation när du sparar produkten. Tidigare tilldelades den nya bildpositionen ett indexvärde (position i listan) och om de befintliga bildpositionerna inte justerades mot indexvärdena, placerades den nya bilden inte i listan.

<!-- MC-36548-->

* Funktionen **Lägg till i kundvagnen** fungerar nu som förväntat när knappen **Lägg till i kundvagnen** är tillgänglig att klicka på. Om du tidigare klickade på den här knappen flera gånger i väntan på att en produktsida skulle läsas in uppstod följande fel i programmet: `Invalid Form Key. Please refresh the page`.

<!-- MC-37006 36835-->

* Programmet tömmer inte längre kategoricachen när en handlare lägger till eller tar bort inaktiverade produkter i eller från en kategori. Tidigare tömde programmet cacheminnet för relaterade kategorier trots produktstatus. Kategorierna tilldelades inte heller när en kategori sparades, vilket ledde till att kategoricachen tömdes.

<!-- MC-37347-->

* Filtrering av katalogprodukter i omfånget **All Store view** fungerar nu korrekt. Tidigare visades produkter med statusvärdet `Enabled` eller `Disabled` i rutnätet när endast aktiverade eller inaktiverade produkter filtrerades.

<!-- MC-38038-->

* Delvis omindexering resulterar inte längre i missade produkter och tomma kategorier.

<!-- MC-38315-->

* Ordna om fungerar nu som väntat när **Använd JavaScript-kalender** är aktiverat (**Lager** > **Konfiguration** > **Katalog** > **Anpassade alternativ för datum och tid**). Tidigare, när den här inställningen var aktiverad, visade programmet det här felet när du försökte ändra ordningen på den tidigare placerade ordern från administratören: `Please specify date required option(s)`.

<!-- MC-38719-->

* Programmet visar nu rätt valuta i distributioner på flera platser när nivåpriser skapas.

<!-- MC-38914-->

* Anpassade attribut för produktbilder har nu escape-konverterats korrekt. Attributet `data-src` har som förväntat samma värde som attributet `src`. Tidigare har URL-specialsymboler undantagits.

<!-- MC-37665-->

* När en kategori uppdateras via REST API inaktiveras inte längre inställningen **Använd standardvärde** för attributen Aktivera kategori, Inkludera på meny och URL-nyckel.

<!-- MC-36832-->

* Om du aktiverar kategoribehörigheter från administratören går det inte längre att cachelagra kategorisidor i helsidescachen vid upprepade besök på kategorisidan. Tidigare betjänades inte efterföljande besök på sidan från cacheminnet som förväntat, och prestandan försämrades.

<!-- MC-35363-->

* När du sparar en kategori töms nu bara blockcachen som hör till den här kategorin. Tidigare tömde programmet cacheminnet för alla kategoriblock.

<!-- MC-30626-->

* Priset för ett anpassat alternativ med ett procentpris konverteras nu som förväntat till den aktiva butikens basvaluta i distributioner i flera butiker. Tidigare konverterades priset på ett anpassat alternativ med ett procentpris felaktigt. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- MC-38890-->

* Bilderna återskapas nu och de här bilderna visas i administratören som förväntat när en handlare skickar mediegalleridata med POST `rest/all/V1/products`. Tidigare återskapade programmet bilderna men tog bort dem när en handlare skickade data i mediegalleriet via POST `rest/all/V1/products` om bilderna togs bort i `pub/media`, men det fanns fortfarande poster i media som innehöll poster för dessa bilder. Som en följd av detta såg handlaren bara platshållare i administratören eftersom bilderna skapades och togs bort under uppdateringsprocessen.

<!-- MC-36903-->

* Poster tas nu bort som förväntat när du tar bort tilldelningen av ett objekt från en webbplats. Tidigare duplicerades bilder när POST `rest/all/V1/products` kördes.

<!-- MC-38413-->

* Anropet `/V1/categories/{categoryId}/products` returnerar nu en lista över alla produkter som tillhör den överordnade kategorin som förväntat. Tidigare, om en produkt tillhör mer än en underkategori i den överordnade kategorin, genererades den här typen av fel i programmet: `Internal Error. Details are available in the application log file. Report ID: webapi-5f8579e37db54`.  [GitHub-30461](https://github.com/magento/magento2/issues/30461)

<!-- MC-32996-->

* REST-slutpunkten `/V1/products/attributes/:attributeCode/options` stöder nu uppdatering av ett befintligt attributalternativ.

<!-- MC-30626 ENGCOM-8475-->

* Priset för ett anpassat alternativ med ett procentpris konverteras nu som förväntat till den aktiva butikens basvaluta i distributioner i flera butiker. Tidigare konverterades priset på ett anpassat alternativ med ett procentpris felaktigt. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- ENGCOM-8395 -->

* Handlare kan nu spara ett nytt attribut när produkten skapas. Tidigare sparade inte programmet attributet och omdirigerade handlaren till butiksvyns hemsida när de försökte spara attributet. [GitHub-30362](https://github.com/magento/magento2/issues/30362)

<!-- ENGCOM-7997 -->

* Produktstödraster på sidorna **Försäljning** > **Beställningar** och **Katalog** > **Produkter** visar nu alla relevanta butiker, inte bara den senast skapade butiken. [GitHub-29267](https://github.com/magento/magento2/issues/29267)

<!-- ENGCOM-6698 -->

* Produktdatabasen använder nu `store_id` när den är tillgänglig för att spara attributvärden för en befintlig produkt.  Tidigare åsidosatte produktdatabasklassen produktens butiks-ID och tilldelade alltid standardbutiks-ID:t. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### Katalogregel

<!-- MC-35065-->

* Katalogprisreglerna fungerar nu som förväntat med anpassade alternativ på produktinformationssidor. Tidigare återspeglade inte produktpriserna på den sidan tillämpliga katalogprisregler. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

<!-- MC-34265-->

* Produkt- och katalogcacheminnen upphör nu att gälla enligt schemat. Tidigare upphörde cacheminnet att gälla dagligen eftersom `сron` körde `catalogrule_apply_all`-aktiviteten en gång dagligen, vilket indexerade om alla katalogregler och beroende indexerare, och rensade cacheminnet för alla produkter och kategorier.

### Rensa

#### Tecko- och grammatikrensning

<!-- ENGCOM-7967 -->

* Titeln på sidan Orderfel har ändrats för att vara korrekt. Tidigare hette den här sidan: **Vi har tagit emot din beställning!**.  [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-8101 -->

* Onödiga blanksteg i `app/code/Magento/Contact/view/frontend/templates/form.phtml` har tagits bort. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-7716 -->

* Ett stavfel i hjälpmeddelandet för underkommandot `bin/magento/setup:config:set` har korrigerats. [GitHub-28802](https://github.com/magento/magento2/issues/28802)

<!-- ENGCOM-8058 -->

* Grammatik i PHPDoc för filen `framework/Registry.php` har korrigerats. [GitHub-29661](https://github.com/magento/magento2/issues/29661)

<!-- ENGCOM-8273 -->

* Ett överflödigt mellanrum har tagits bort från `app/code/Magento/Catalog/Helper/Product/View.php`. [GitHub-30601](https://github.com/magento/magento2/issues/30601)

<!-- ENGCOM-8181 -->

* Ett stavfel i ett funktionsnamn i `app/code/Magento/Ui/view/base/web/js/form/element/ui-select.js` har korrigerats. [GitHub-29987](https://github.com/magento/magento2/issues/29987)

<!-- ENGCOM-8478 -->

* Korrigerade en parallalisering av&quot;artikel&quot; i ordersammanfattningen för mini-varukorgen och kassan. [GitHub-29920](https://github.com/magento/magento2/issues/29920)

<!-- ENGCOM-8309 -->

* Borttagen tomt utrymme i textbundna element i navigeringsfilter med kod. [GitHub-30448](https://github.com/magento/magento2/issues/30448)

<!-- ENGCOM-8056 -->

* `rl` har korrigerats till `url` i `\Magento\Framework\Filter\Template\Tokenizer\Parameter`.  [GitHub-29185](https://github.com/magento/magento2/issues/29185)

#### Rensning av kod

<!-- MC-37922-->

* En överflödig HTML `<br>`-tagg har tagits bort från meddelandeområdet Kontrollera data på sidan **System** > **Importera**.

<!-- ENGCOM-8028 -->

* `ChangeQuoteControl` har omarbetats. [GitHub-29673](https://github.com/magento/magento2/issues/29673)

<!-- ENGCOM-8027 -->

* `AccessChangeQuoteControl` och dess enhetstester har omarbetats. [GitHub-29672](https://github.com/magento/magento2/issues/29672)

<!-- ENGCOM-8053 -->

* Kodformatet för deklarationen av returtypen i `app/code/Magento/Captcha/CustomerData/Captcha.php` har korrigerats. [GitHub-29712](https://github.com/magento/magento2/issues/29712)

<!-- ENGCOM-8288 -->

* Placeringen för knapplistan på sidan Nytt attribut har korrigerats.

<!-- ENGCOM-8315 -->

* Korrekt blockklass för referensexemplet `viewModel` för klassen `\Magento\Framework\View\Element\Template` har lagts till. [GitHub-30450](https://github.com/magento/magento2/issues/30450)

<!-- ENGCOM-8090 -->

* En redundant fältuppsättning i försäljningsregelformuläret har tagits bort. [GitHub-29599](https://github.com/magento/magento2/issues/29599)

<!-- ENGCOM-8448 -->

* Onödig kod har tagits bort från mallen `hierarchy/edit.phtml`.

<!-- ENGCOM-8446 -->

* PHPdoc-kommentaren i `app/code/Magento/CatalogImportExport/Model/Export/Product.php` har korrigerats. [GitHub-30833](https://github.com/magento/magento2/issues/30833)

<!-- ENGCOM-8277 -->

* Dokumentblockanteckningen för meddelandet `PublisherInterface` har korrigerats. [GitHub-30190](https://github.com/magento/magento2/issues/30190)

<!-- ENGCOM-8264 -->

* Argumenten i metoden `getStatusByState` har korrigerats. [GitHub-30173](https://github.com/magento/magento2/issues/30173)

<!-- ENGCOM-8235 -->

* Metodbeskrivningen i `app/code/Magento/Quote/Model/Cart/Totals/ItemConverter.php` har korrigerats. [GitHub-30125](https://github.com/magento/magento2/issues/30125)

<!-- ENGCOM-8242 -->

* Borttagen redundanta variabeltilldelningar på samma rad i flera filer. [GitHub-30133](https://github.com/magento/magento2/issues/30133)

<!-- ENGCOM-8263 -->

* `@param string $attribute` har ändrats till `@param AbstractAttribute|string[]|string $attribute` i `EntityAbstract.php`. [GitHub-30191](https://github.com/magento/magento2/issues/30191)

<!-- ENGCOM-8142 -->

* Ogiltiga taggar (till exempel `@package` och `@subpackage`) har tagits bort från dokumentblock i hela kodbasen. [GitHub-30061](https://github.com/magento/magento2/issues/30061)

<!-- ENGCOM-8117 -->

* Oanvända parametrar i `AdvancedPricing`-klassens konstruktion har tagits bort. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Konfigurerbara produkter

<!-- MC-35016-->

* Om du filtrerar färdiga konfigurerbara produkter efter pris visas nu resultatet inom rätt prisintervall.

<!-- MC-38930-->

* En virtuell produkt ändrar inte längre typ när dess status ändras från aktiverad till inaktiverad (eller vice versa). Tidigare ändrades en produkts typ från virtuell till enkel när dess status ändrades.

<!-- MC-38197-->

* Metoden `getValue()` utlöser inte längre ett allvarligt fel när kundvagnar uppdateras.

<!-- MC-34444-->

* Konfigurerbara produkter som är tillgängliga på flera webbplatser visar inte längre enkla underordnade produkter som inte är tilldelade den specifika webbplatsen. [GitHub-28291](https://github.com/magento/magento2/issues/28291)

<!-- ENGCOM-8202 -->

* Produktsidorna för Storefront visar nu nivåpriser utan moms som förväntat. [GitHub-1225](https://github.com/magento/magento2/issues/12225)

<!-- ENGCOM-8134 8174-->

* MSRP-priser för konfigurerbara produkter konverteras nu korrekt till den valda valutan. Tidigare visade programmet priser i fel valuta och följande fel uppstod: `Call to a member function setAppliedTaxes() on null`. [GitHub-26526](https://github.com/magento/magento2/issues/26526), [GitHub-29603](https://github.com/magento/magento2/issues/29603)

<!-- ENGCOM-8234 -->

* Merchants kan nu spara en butiksspecifik etikett för textruteattribut med värdet 0 (noll). Tidigare ersattes värdet 0 med värdet för alternativet Admin label. [GitHub-30073](https://github.com/magento/magento2/issues/30073)

<!-- ENGCOM-8117 -->

* Oanvända parametrar i `AdvancedPricing`-klassens konstruktion har tagits bort. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### cron

<!-- MC-37712-->

* Systemmeddelandelistan återger nu produktuppdateringar korrekt efter att `cron` har körts och programmet har uppdaterat produkter enligt schemat.

<!-- ENGCOM-8164 -->

* Ett index baserat på `schedule_id` och `status` har lagts till i tabellen `cron_schedule`. [GitHub-29601](https://github.com/magento/magento2/issues/29601)

### Anpassade kundattribut

<!-- MC-23545-->

* Programmet visar nu kundattribut av typen `file` på sidan Kontoinformation när det har skapats. Tidigare visades följande fel i programmet när du försökte spara ett nytt attribut av den här typen: `The "newAttribute" attribute value is empty. Set the attribute and try again` och `Validation is failed`.

<!-- MC-23544-->

* Programmet visar nu anpassade kundattributvärden för flera rader korrekt. Tidigare visades inte alla data.

<!-- MC-36978-->

* Programmet meddelar nu kunderna när de anger ett ogiltigt födelsedatum när de skapar ett konto. Tidigare ignorerade valideraren språkinställningarna och kunderna omdirigerades till sidan Skapa nytt kundkonto med ett ogiltigt datumfel.

<!-- MC-38846-->

* Anpassade adressattribut inkluderas nu som förväntat i betalningssteget i arbetsflödet för utcheckning.

<!-- MC-38114-->

* Attributen för att markera flera adresser visas nu korrekt vid utcheckning av gäster och på sidan Admin- och Min kontoorderinformation.

<!-- MC-37581-->

* Anpassade adressattribut visas nu korrekt i området Mitt konto och på sidan Administratörsorderinformation.

<!-- MC-37101-->

* Du kan nu ta bort en inledande nolla i ett anpassat kundattribut när `Input Type` är inställt på `Text` och `Input Validation` är inställt på `Numeric Only`.

<!-- MC-36721-->

* Programmet exporterar nu kunddata som innehåller ett anpassat könsattributvärde.

<!-- MC-34650-->

* Programmet sparar nu anpassade kundattributvärden för B2B-användare som förväntat. Tidigare var anpassade kundattribut som skapats för att lägga till eller redigera företagsanvändare inte bundna till formuläret Lägg till ny användare, och därför sparades inte attributvärden. Dessutom härleddes det anpassade datumattributet från databasen som en sträng och konverterades inte till korrekt datumformat för butiksvisning.

### Kund

<!-- MC-35771-->

* Kalenderwidgeten för butikskundkontosidans födelsedatum använder nu det angivna butiksspråket.

<!-- MC-38498-->

* Programmet sparar inte längre dubbletter av en kundadress när en befintlig kund checkas ut från administratören.

<!-- MC-37393-->

* Om du tar bort alla adresser från flera kunder från Admin tas nu alla adresser bort från kundadresslistan och standardadresserna för fakturering och leverans tas bort. Tidigare togs adressen bort från kundadresslistan, men standardadresserna för fakturering och leverans togs inte bort.

<!-- MC-37377-->

* På fliken Admin - kundadress visas nu adressantal korrekt efter att en administratör har utfört en massborttagning av adresser. Tidigare innehöll programmet borttagna adresser i antalet.

<!-- MC-36718-->

* DateTime-formatet för fältet **Födelsedatum** på kundregistreringssidan har korrigerats. Tidigare saknades den inledande nolla som föregått en ensiffrig dag.

<!-- MC-36024-->

* Validering av datumformat för fältet **Födelsedatum** fungerar nu innan kunden klickar på knappen **Skapa ett konto**. Tidigare kunde en kund ange ett värde i ett ogiltigt format, och när de klickade på knappen **Skapa ett konto** omdirigerades användaren till sidan Skapa nytt kundkonto med ett ogiltigt datumfel.

<!-- MC-33867-->

* Programmet genererar inte längre ett allvarligt fel när en administratör försöker spara ett nytt kundkonto som innehåller ogiltiga data för ett attribut.

<!-- MC-36258-->

* Programmet genererar inte längre ett 400-fel när en kund försöker få åtkomst till kundvagnen i en distribution där Magento Shipping tidigare var installerat och Luma-standardtemat är distribuerat. Tidigare filtrerades inte avsnittsnamn som skapades av tidigare installerade/aktiverade moduler som inte stöddes av administratören innan begäranden skickades till servern, vilket genererade fel.

<!-- MC-35812-->

* Programmet visar nu ett meddelande som förväntat när en kund skapar ett gästkonto när inställningen **Begär bekräftelse av e-post** är aktiverad och `Magento\Customer\Controller\Account\CreatePost` har åsidosatts. Tidigare tillät programmet inte den här typen av anpassning av användarregistreringsprocessen, och under dessa omständigheter ansågs användarens e-postbekräftelsestatus vara slutförd, den nya användaren loggades in automatiskt och inget felmeddelande visades.

<!-- ENGCOM-8039 -->

* Programmet tilldelar nu en kund till rätt kundgrupp när kunden gör en beställning i en icke-standardkundgrupp i en butik där **Aktivera automatisk tilldelning till kundgrupp** är aktiverat. [GitHub-26976](https://github.com/magento/magento2/issues/26976)

<!-- MC-39783-->

* Rutnätet för administratörskunder är nu tillgängligt som förväntat när den icke-förvalda webbplatsen tas bort i en flersidig distribution när index anges till **Uppdatera enligt schema**. Tidigare visades inte stödrastret och följande fel uppstod: `[2020-12-09 11:31:54] report.CRITICAL: The website with id 2 that was requested wasn't found. Verify the website and try again. \{"exception":"[object] (Magento\\Framework\\Exception\\NoSuchEntityException(code: 0): The website with id 2 that was requested wasn't found. Verify the website and try again. at /var/www/html/magento24ee/vendor/magento/module-store/Model/WebsiteRepository.php:110)"}`

### dotdigital

* Felhanteringen har förbättrats när listor över program hämtas från Adobe Digital Engagement Cloud.

* Värdet som synkroniseras i kolumnen för butiksnamn under gästsynkronisering är nu lagringsvyns namn som förväntat. Tidigare ingick webbplatsens namn i den här kolumnen.

* En arraykontroll har lagts till före slingor över orderstatusautomatiseringar efter att en order har sparats.

* Löste problem med Composer-uppgraderingar som var ett resultat av dotdigital-modulens beroende av `magento/module-authorization`.

### Nedladdningsbar

<!-- ENGCOM-7679 -->

* Programmet visar inte längre en nedladdningsbar produkt på fliken Mina nedladdningsbara produkter när den nedladdningsbara produkten delvis har återbetalats. [GitHub-28388](https://github.com/magento/magento2/issues/28388)

### Dynamiskt block (tidigare banner)

<!-- MC-23938-->

* Programmet visar inte längre ett dynamiskt block på butiken när du har tagit bort det kundsegment som är associerat med blocket.

<!-- MC-37322-->

* Programmet tar nu korrekt hänsyn till katalogprisreglerna när det avgör om ett dynamiskt block ska visas eller inte.

### EAV

<!-- MC-35934-->

* Anpassade attribut som använder `\Magento\Eav\Model\Entity\Attribute\Backend\ArrayBackend` använder nu standardvärden om inget värde anges i nyttolasten när en produkt skapas av API-anrop.

### E-post

<!-- ENGCOM-7961 -->

* `\Magento\Config\Model\Config\Source\Email\Template::toOptionArray` genererar inte längre ett fel när `setPath()` inte anropas före `toOptionArray()`. [GitHub-29315](https://github.com/magento/magento2/issues/29315)

<!-- MC-36777-->

* Programmet konverterar nu oformaterad text korrekt till HTML när du klickar på **Returnera HTML-version** när du läser in en e-postmall.

<!-- MC-34803-->

* E-post som skickas till kunder som innehåller partiella fakturor innehåller nu korrekta artikeldelsummor. Tidigare var delsumman i det här e-postmeddelandet den totala beställda kvantiteten, inte den totala summan för den fakturerade kvantiteten.

<!-- MC-38337-->

* Programmet skickar nu e-postpåminnelser till alla relevanta kunder med giltiga e-postadresser. Tidigare slutade programmet skicka påminnelser via e-post till kunderna efter att en ogiltig adress hade påträffats.

<!-- ENGCOM-7517 -->

* Att skicka e-postmeddelanden i asynkront läge fungerar nu som väntat efter att en produkt har tagits bort från en katalog. Tidigare blockerades asynkron e-postsändning och följande fel visades i programmet: `main.ERROR: Cron Job sales_send_order_invoice_emails has an error: Call to a member function getData() on null. Statistics: {"sum":0,"count":1,"realmem":0,"emalloc":0,"realmem_start":73400320,"emalloc_start":37177640} [] []main.CRITICAL: Error when running a cron job {"exception":"[object] (RuntimeException(code: 0): Error when running a cron job at /var/www/html/vendor/magento/module-cron/Observer/ProcessCronQueueObserver.php:327, Error(code: 0): Call to a member function getData() on null at /var/www/html/vendor/magento/module-catalog/Helper/Image.php:502)"} []`. [GitHub-26878](https://github.com/magento/magento2/issues/26878)

<!-- ENGCOM-8381 -->

* Programmet kopierar inte längre en kund i e-postmeddelandet med orderbekräftelsen när `sales_email/order_comment/enabled` är inaktiverat och `sales_email/order_comment/copy_method` är inställt på `bcc`. [GitHub-29915](https://github.com/magento/magento2/issues/29915)

### Ramverk

<!-- MC-24195-->

* Anpassade filtergrupper används nu korrekt vid kundsökning. Tidigare hade funktionen `afterSearch` inte ELLER-filter som förväntat. [GitHub-24576](https://github.com/magento/magento2/issues/24576)

<!-- MC-36942-->

* Bilder på en butiks hemsida återges nu korrekt. Tidigare var sidkällan HTML skadad eftersom de tre efterföljande snedstrecken i bildens base64-kod feltolkades som en kommentar.

<!-- MC-37369-->

* DatePicker fungerar nu korrekt vid filtrering av order i listan Admin Orders i butiker med den arabiska språkversionen (`ar_SA - Saudi Arabia`).

<!-- MC-38344-->

* DatePicker visar nu korrekt datum när en handlare har sparat en kundprisregel i en distribution. [GitHub-30382](https://github.com/magento/magento2/issues/30382)

<!-- MC-31085-->

* Programmet representerar nu arabiska tusentals grupperingssymboler och arabiska decimalavgränsare korrekt. Tidigare trimmades arabiska symboler. [GitHub-26676](https://github.com/magento/magento2/issues/26676)

<!-- MC-30631-->

* Programmet tar nu bort utgångna databassessioner från tabellen `session` som förväntat.

### Allmänna korrigeringar

<!-- MC-38105-->

* Du kan nu konfigurera en intern sessionshanterare som skiljer sig från hanteraren som definierats i `php.ini`. Tidigare angav `SessionManager` inte memcache som `save_handler`, utan använde i stället filens `session_handler`. programmet orsakade följande fel: `main.CRITICAL: Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 {"exception":"[object] (Exception(code: 0): Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in ../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 at ../vendor/magento/framework/App/ErrorHandler.php:61)"}`. [GitHub-24717](https://github.com/magento/magento2/issues/24717)

<!-- ENGCOM-8052 -->

* Följande förbättringar har gjorts i modulerna `LoginAsCustomer`:

   * Ersatte plugin-programmet `around` med `after`

   * Redundant kod har tagits bort

   * Ersatte `(bool)->getValue()` med `isSetFlag`. [GitHub-29689](https://github.com/magento/magento2/issues/29689)

<!-- ENGCOM-8093 -->

* När du läser in alla kunddataavsnitt med jokertecken (*) orsakar inte längre förfrågningar till `customer/section/load` ett 400-fel. [GitHub-28154](https://github.com/magento/magento2/issues/28154)

<!-- ENGCOM-7994 -->

* Programmet skickar nu undantag som inträffar när en layout återges i produktionsläge till `var/report`. [GitHub-29606](https://github.com/magento/magento2/issues/29606)

<!-- MC-38587-->

* Programmet dirigerar inte längre om kunder till hemsidan när butiksvyn ändras. Metoden `\Magento\VersionsCmsUrlRewrite\Model\StoreSwitcher::switch()` dirigerar nu om kunderna till hemsidan endast när `$urlPath` inte hittas för den andra butiksvyn.

<!-- ENGCOM-7527 -->

* Programmet genererar nu ett undantag när en kund som inte finns begär en lösenordsåterställning. [GitHub-26288](https://github.com/magento/magento2/issues/26288)

<!-- MC-33687 ENGCOM-8497-->

* Programmet visar nu ett informativt felmeddelande när en administratör försöker spara ett kundkonto som innehåller ett ogiltigt värde för ett kundattribut när en fil som det här attributvärdet överförs. Tidigare uppstod ett allvarligt fel i programmet. [GitHub-30295](https://github.com/magento/magento2/issues/30295)

<!-- ENGCOM-8400 -->

* Programmet använder nu konfigurationsinställningen **Logotyp för HTML utskriftsvy** för att lagra PDF-dokument med fakturainformation som förväntat. [GitHub-24730](https://github.com/magento/magento2/issues/24730)

<!-- ENGCOM-8425 -->

* `static::` har ersatts med `self::` i hela kodbasen för att komma åt privata konstanter. [GitHub-30781](https://github.com/magento/magento2/issues/30781)

<!-- ENGCOM-8395 -->

* Programmet öppnar nu sidan Nytt attribut som förväntat när en handlare klickar på knappen **Skapa nytt attribut** två gånger när produkten skapas. Tidigare visade programmet en tom sida och ett fel uppstod. [GitHub-30361](https://github.com/magento/magento2/issues/30361)

<!-- ENGCOM-8426 -->

* Programmet visar inte längre meddelandet `The coupon code has been accepted` efter att en kupong har tagits bort. [GitHub-30255](https://github.com/magento/magento2/issues/30255)

<!-- ENGCOM-8396 -->

* Administratörer kan nu tilldela widgetar till specifika kategorier. [GitHub-30009](https://github.com/magento/magento2/issues/30009)

<!-- ENGCOM-8216 -->

* Attributväljaren `input[type=datetime]` har ersatts med en mindre specifik indatatypsväljare. [GitHub-30064](https://github.com/magento/magento2/issues/30064)

<!-- ENGCOM-8282 -->

* Programmet visar nu butiksspecifika värden som är associerade med anpassade kategoriattribut som förväntat. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-8287 -->

* Programmet visar nu en fråga om huruvida kundgruppen ska ändras när du klickar på knappen **Validera momsregistreringsnummer** på sidan för att skapa order när butiksadressen och leveransmålet tillhör olika EU-länder. [GitHub-29652](https://github.com/magento/magento2/issues/29652)

<!-- ENGCOM-8031 -->

* Klassen `\Magento\Catalog\Model\ImageUploader` har omarbetats för att använda den nya metoden `moveFileFromTmp`. [GitHub-29598](https://github.com/magento/magento2/issues/29598)

<!-- ENGCOM-8178 -->

* Programmet visar nu ett mer informativt felmeddelande när en handlare försöker skapa ett produktattribut med `product_type`- och `type_id`-koder som är mer beskrivande. [GitHub-28479](https://github.com/magento/magento2/issues/28479)

<!-- ENGCOM-8135 -->

* Verifieringslogiken för **Livstid för kundtoken (timmar)** och **Livstid för administratörstoken (timmar)** har korrigerats i fälten Admin **Store** > **Konfigurationer** > **Tjänster** > **OAuth**. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-8132 -->

* Programmet tolkar nu text som innehåller `}}` i widgetens innehållsfält korrekt. [GitHub-12087](https://github.com/magento/magento2/issues/12087)

<!-- ENGCOM-8098 -->

* Du kan nu ta bort ett filter från sidan Produktkategorier. När du tidigare försökte ta bort filtret kunde du inte ta bort filtret och följande fel visades: `Something went wrong`. [GitHub-8538](https://github.com/magento/magento2/issues/8538)

<!-- ENGCOM-8050 -->

* `Magento\Framework\MessageQueue\ConfigInterface` kan nu instansieras när den valfria modulen `Magento_MessageQueue` är inaktiverad. Tidigare uppstod följande fel i programmet: `PHP Fatal error:  Uncaught Error: Cannot instantiate interface Magento\Framework\MessageQueue\ConfigInterface in /var/www/magento2/magento2/lib/internal/Magento/Framework/ObjectManager/Factory/AbstractFactory.php:121`. [GitHub-26080](https://github.com/magento/magento2/issues/26080)

<!-- ENGCOM-7312 -->

* Logiken som avgör när programmet kan hämta e-postvärde från beständig lagring har förbättrats. Tidigare visades ifyllda lösenordsfält på utcheckningssidan när en oregistrerad användare återvände till utcheckningssidan efter att först ha fyllt i e-postfältet. [GitHub-26903](https://github.com/magento/magento2/issues/26903)

<!-- ENGCOM-7777 -->

* Ett saknat `aclResource`-attribut har lagts till i verktygsfältsblocket för administratörshuvudet `AdminNotification`. Tidigare var posten i verktygsfältet för administratörsmeddelanden synlig även när administratörsanvändaren inte har behörighet att visa rollresurser. [GitHub-29067](https://github.com/magento/magento2/issues/29067)

<!-- ENGCOM-8022 -->

* Funktionerna `framework/database/select` `where` hanterar nu `type` korrekt. [GitHub-29590](https://github.com/magento/magento2/issues/29590)

<!-- ENGCOM-8260 -->

* Ineffektiv användning av `array_merge` i slingor har förbättrats genom hela kodbasen, vilket har förbättrat prestandan på flera ställen, bland annat i den statiska innehållsdistributionsprocessen. [GitHub-30183](https://github.com/magento/magento2/issues/30183)

<!-- ENGCOM-8445 -->

* Administratörssessionens standardlivstid har flyttats från krypteringsmodulen till säkerhetsmodulen. [GitHub-30859](https://github.com/magento/magento2/issues/30859)

<!-- ENGCOM-8425 -->

* Programmet söker nu efter privata konstanter i en klass och visar en varning om det finns några `static::` anrop till dem. Tidigare uppstod följande fel i programmet: `Undefined class constant`.

<!-- ENGCOM-8219 -->

* Regler har lagts till i `editorconfig` som stöder indrag av JSON- och YAML-filer på två blanksteg. [GitHub-30066](https://github.com/magento/magento2/issues/30066), [GitHub-30063](https://github.com/magento/magento2/issues/30063)

<!-- ENGCOM-8079 -->

* Klassen `FlushCacheByTags` har uppdaterats så att den använder plugin-program i stället för plugin-program. [GitHub-29558](https://github.com/magento/magento2/issues/29558)

<!-- ENGCOM-8358 -->

* `MessageValidator` misslyckas inte längre för hash-matriser som inte innehåller något `0`-element. [GitHub-30563](https://github.com/magento/magento2/issues/30563)

<!-- ENGCOM-8370 -->

* Koden i filen `checkout_index_index.xml` har förbättrats genom att komponenterna `sortOrder` har tagits bort från `messages`, `authentication`, `progressBar`, `estimation` och `sidebar checkout`. [GitHub-30550](https://github.com/magento/magento2/issues/30550)

<!-- ENGCOM-8379 -->

* Innehåll i `calc` har nu escape-konverterats, vilket ger korrekta `calc`-värden i CSS-utdatafilen. Tidigare returnerade programmet ett felaktigt `calc`-värde. [GitHub-30542](https://github.com/magento/magento2/issues/30542)

<!-- ENGCOM-8030 -->

* Generatorn för omskrivning av URL ställer nu in kategoriobjektet `url_key`, `url_path` och `store_id` till standardvärden för lagring när kategori-URL sparas för det globala omfånget. Tidigare sparades `url_key`, `url_path` och `store_id` med värdena för det senast bearbetade lagrings-ID:t. [GitHub-29585](https://github.com/magento/magento2/issues/29585)

<!-- ENGCOM-8250 -->

* `\Magento\Widget\Controller\Adminhtml\Widget\Instance\Validate` känner nu igen ett frasresultatvärde som ett felmeddelande och skickar det till användaren under widgetvalideringen. [GitHub-27397](https://github.com/magento/magento2/issues/27397)

<!-- ENGCOM-8311 -->

* Den hårdkodade listan med kategoriattribut i `Magento\Catalog\Model\Category\DataProvider::getFieldsMap()` har ersatts med en lista med attribut som genereras från cache. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-7759 -->

* Överflödig hash av `req.http.host/client.ip` har tagits bort och hash hanteras av den inbyggda VCL:en för lack. [GitHub-29988](https://github.com/magento/magento2/issues/29988)

<!-- ENGCOM-8302 -->

* Ett återanrop till filen `Magento_Ui` har lagts till. [GitHub-29557](https://github.com/magento/magento2/issues/29557)

<!-- ENGCOM-8405 -->

* En `acl.xml`-inkonsekvens som inträffade när `Magento_LoginAsCustomerAssistance` aktiverades men `Magento_LoginAsCustomerAdminUi` eller `Magento_LoginAsCustomerLog` inaktiverades har korrigerats. Tidigare, när en administratör med dessa autentiseringsuppgifter försökte logga in på Admin, visade programmet en tom sida och det här felet visades när: `Exception #0 (LogicException): Could not create an acl object: Invalid Document Element 'resource': The attribute 'title' is required but missing. Line: 13`. [GitHub-30680](https://github.com/magento/magento2/issues/30680)

<!-- ENGCOM-8157 -->

* Programmet genererar inte längre ett `Undefined class constant`-fel när en `Interceptor` genereras när ett plugin-program skapas. [GitHub-28981](https://github.com/magento/magento2/issues/28981), [GitHub-29879](https://github.com/magento/magento2/issues/29879)

<!-- ENGCOM-8108 -->

* Programmet hanterar nu meddelanden och loggning korrekt för asynkrona gruppåtgärder. Tidigare uppdaterades produkterna, men tabellerna `magento_operation` och `queue_message_status` uppdaterades inte korrekt och systemmeddelandena var felaktiga. [GitHub-29718](https://github.com/magento/magento2/issues/29718)

<!-- ENGCOM-8388 -->

* En kund omdirigeras nu till sidan Ange ett nytt lösenord som förväntat när de klickar på **Ange ett nytt lösenord** i e-postmeddelandet Återställ lösenord när **E-postbekräftelse krävs** är aktiverat för butiken. Tidigare omdirigerades kunden tillbaka till knappen **Har du glömt lösenordet** på inloggningssidan. [GitHub-27954](https://github.com/magento/magento2/issues/27954)

<!-- ENGCOM-8337 -->

* Matrisen har korrigerats till strängkonverteringsfel när radsystemskonfigurationen sparades med standardvärden. [GitHub-30314](https://github.com/magento/magento2/issues/30314)

<!-- ENGCOM-8440 -->

* Du kan nu ange argument för meddelandeköer. [GitHub-30216](https://github.com/magento/magento2/issues/30216)

<!-- ENGCOM-8384 -->

* Basfilsinsamlaren respekterar nu `AppState->emulateAreaCode()`. [GitHub-39656](https://github.com/magento/magento2/issues/29656)

<!-- ENGCOM-8441 -->

* Den nya klassen `BlockByIdentifier` stöder hämtning av ett layoutblock baserat på CMS blockidentifierare. När ett CMS-block tas bort från cachen rensas därför även layoutblockcachen. [GitHub-28309](https://github.com/magento/magento2/issues/28309)

<!-- ENGCOM-8385 -->

* Korrigerade problem med konvertering av numeriska argument i köer. När du tidigare deklarerade en kö med numeriska `type` argument i `queue_topology.xml` konverterades argumentvärdet till en sträng. [GitHub-29615](https://github.com/magento/magento2/issues/29615)

## Presentkort

<!-- MC-38989-->

* E-postmeddelanden som innehåller en presentkortskod skickas nu endast efter att ordern har sparats korrekt när konfigurationsinställningen **Skapa ett presentkortskonto när en orderartikel beställs** är aktiverad. Tidigare återanvändes en presentkortskod och skickades till olika kunder om ett presentkortskonto genererades när artiklarna beställdes, men ett undantag inträffade efter att det virtuella presentkortet skickades.

<!-- MC-36496-->

* Programmet duplicerar inte längre presentkortsbeställningar. Tidigare levererades två presentkoder när en köpare beställde ett presentkort. Detta inträffade eftersom `cron` jobb anropade `\Magento\GiftCard\Observer\GenerateGiftCardAccountsInvoice::execute()` och den här metoden inte kontrollerar om presentkortskoder redan har genererats när fakturan skapades.

<!-- MC-35058-->

* Merchants kan nu ta bort produkttilldelningar från kategorier som förväntat. Tidigare uppstod ett fel som liknar det här felet: `Could not save product "4" with position 0 to category 3`.

<!-- ENGCOM-8326 -->

* Stöd har lagts till för `root` som är länkade till symtomen på felsidor och i underhållsläge. Om `root` eller `magento/pub` tidigare var länkade till en annan katalog genererade inte felprocessorn (`Magento\Framework\Error\Processor`) en korrekt URL för visningsfilen. [GitHub-30296](https://github.com/magento/magento2/issues/30296)

<!-- ENGCOM-8087 -->

* `order_data`-matris som saknas har lagts till i `EmailSender`-klasser. Detta gör att dessa klasser anpassas till Magento rekommendation att använda skalära variabler i stället för objekt i e-postmallarna. [GitHub-29604](https://github.com/magento/magento2/issues/29604)

### Google Tag Manager

<!-- MC-34818-->

* Google Tag Manager `productClick` fungerar nu som förväntat. Tidigare utlöstes inte `productClick` för produkter på listsidor och Google Tag Manager kunde inte fånga den händelsen.

<!-- MC-38781-->

* De konfigurerbara produktalternativen för Google Tag Manager uppdateras nu som väntat i datalagret när du har redigerat en konfigurerbar produkt i kundvagnen. Tidigare skrevs data för händelsen `removeFromCart` felaktigt om när produktalternativet ändrades och kvantiteten förblev densamma.

### GraphQL

<!-- MC-37615-->

* Frågan `urlResolver` hanterar nu frågeparametrar korrekt.

<!-- ENGCOM-8422 -->

* Frågan `urlResolver` returnerar inte längre NULL när en anpassad CMS-nod och -sida anges som indata. [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209 ENGCOM-8386-->

* Frågan `category` returnerar inte längre underordnade kategorier för en överordnad kategori som har inaktiverats. [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* Frågan `category` returnerar nu rätt sökväg för en kategoribild när URL-omskrivningar är inaktiverade.

<!-- MC-36648 8321-->

* mutationen `resetPassword` returnerar nu ett mer informativt meddelande när ett fel inträffar. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078 ENGCOM-8504-->

* Cachelagrade resultat för `products`-frågan ogiltigförklaras som förväntat när produktpositionerna ändras. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- MC-35355 ENGCOM-8404-->

* Frågan `products` returnerar nu det förväntade resultatet när filtret `category_id` anges med nyckelordet `in`. [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8373 -->

* `categories`- och `categoryList`-frågorna tar nu hänsyn till kategoritillgänglighet baserat på kategoribehörighetskonfiguration och överordnat kategori-ID. [GitHub-29880](https://github.com/magento/magento2/issues/29880), [GitHub-30624](https://github.com/magento/magento2/issues/30624)

<!-- MC-37603-->

* `updateProductsInWishList`-mutationen validerar nu önskelisteobjekt korrekt. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- ENGCOM-8430 PWA-1107-->

* Flera attribut i `ProductInterface` och `CategoryInterface` har tagits bort för att förhindra att de används i butiken. [GitHub-30625](https://github.com/magento/magento2/issues/30625)

* Priserna är nu dolda för produktfrågeresultat när kategoribehörigheterna är inställda på att dölja dem. [GitHub-29926](https://github.com/magento/magento2/issues/29926)

<!-- MC-36898 PWA-1299-->

* Du kan nu använda mutationen `addProductsToWishList` för att lägga till en paketprodukt med en användardefinierad kvantitet i en önskelista.

<!-- MC-36648 -->

* De mutationer som lägger till produkter i en kundvagn följer nu katalogbehörigheterna. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-36946 -->

* GraphQL svarstid för kundvagnstillägg har förbättrats.

<!-- ENGCOM-8099 -->

* Frågan `products` returnerar nu nivåprisvärden som förväntat. [GitHub-29168](https://github.com/magento/magento2/issues/29168)

<!-- ENGCOM-7528 -->

* En överflödig `getMappedNums` togs bort från en slinga i `lib/internal/Magento/Framework/GraphQl/Query/EnumLookup.php`. [GitHub-30031](https://github.com/magento/magento2/issues/30031)

<!-- ENGCOM-8172 -->

* `products`-frågan returnerar inte längre ett fel när den frågade produkten har en inaktiverad relaterad produkt. [GitHub-28892](https://github.com/magento/magento2/issues/28892)

<!-- MC-37395 -->

* Frågan `cart` returnerar nu priser som har konverterats till rätt valuta (standardvisningsvalutan). Tidigare returnerade frågan artikelprisvärdet i basvalutan och valutakoden returnerades som standardvisningsvaluta.

<!-- MC-37388-->

* GraphQL respekterar nu katalogbehörigheter. Programmet begränsar vilka objekt som returneras för en `products`-fråga baserat på kundgruppen.

<!-- MC-39690-->

* Attributet `customizable_option` har lagts till i flera datatyper som implementerar `CartItemInterface`.

<!-- MC-39744-->

* Attribut har lagts till för frågan `storeConfig` för att returnera information om butik, butiksgrupp och webbplats.

<!-- MC-37414-->

* Attributet `SelectedCustomizableOption.type` har återställts. Dessutom är attributet `customizable_options` i olika implementeringar av `CartItemInterface` nu inte null.

<!-- MC-23860-->

* Sökfunktionen för `products`-frågan returnerar inte längre objekt där kategoribehörigheter har aktiverats.

<!-- MC-37726-->

* Frågan `products` returnerar rätt valuta för butiksvyer som har flera valutor.

<!-- MC-37727-->

* Etiketter för `products`-frågefilter returnerar nu översatta värden, om sådana används för icke-standardbutiksvyer.

<!-- MC-37728-->

* Valutabelopp för fast butik på presentkort i kundvagnen.

<!-- MC-38443-->

* Lagt till datatypen `ConfigurableProductOptionsSelection`, som innehåller metadata som motsvarar de konfigureringsbara alternativen som kan väljas för en produkt. Använd det här objektet i en `products`-fråga för att minimera antalet mediegalleriobjekt som visas när kunden väljer konfigurerbara produktalternativ.

### Grupperade produkter

<!-- MC-35361-->

* Produktfrågan returnerar nu alla förväntade data för grupperade produkter. Tidigare var `product_links` en tom array.

<!-- MC-37718-->

* En grupperad produkt visas nu som ej lagrad på produktredigeringssidan när alla underordnade enkla produkter inte är lagrade.

<!-- MC-37249-->

* Statusen för en grupperad produkt uppdateras nu korrekt på produktredigeringssidan när statusen för dess underordnade enkla produkter ändras till Ej lagrade. Tidigare uppdaterades inte lagerlagerartikeln för den överordnade produkten för den grupperade produkten efter att dess underordnade lagerstatus ändrades.

### Bilder

<!-- MC-36942-->

* Bilder på en butiks hemsida återges nu korrekt. Tidigare var sidkällan HTML skadad eftersom de tre efterföljande snedstrecken i bildens base64-kod feltolkades som en kommentar.

<!-- ENGCOM-8116 -->

* Beroendet av tillägget `fileinfo` har tagits bort från CMS-modulen. Tidigare uppstod ett fel i programmet när du försökte överföra en bild med hjälp av bildöverföringen, som startas när du klickar på knappen **Infoga bild** när du lägger till innehåll. [GitHub-24332](https://github.com/magento/magento2/issues/24332), [GitHub-16531](https://github.com/magento/magento2/issues/16531), [GitHub-29852](https://github.com/magento/magento2/issues/29852)

<!-- ENGCOM-8020 -->

* Stöd för läsning av `exif_image.png`- eller `exif-image.jpeg`-metadata har lagts till. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- MC-37042-->

* Bilder visas nu av Catalog Events Carousel-widgeten efter överföring som förväntat. Tidigare togs överförda bilder bort av cron-jobbet `catalog_event_status_checker`.

<!-- ENGCOM-8296 -->

* Färgerna i CMYK-bilder återges nu korrekt. När bildskärmskortet nu upptäcker att en öppnad bild har en CMYK-färgrymd, konverteras färgrymden till SRGB. Tidigare återgavs bilderna med inverterade färger. [GitHub-22375](https://github.com/magento/magento2/issues/22375)

<!-- ENGCOM-8251 -->

* Booleska värden har inte längre angetts för `image_with_border.phtml`. De överflödiga inställningarna `max-width` och `height` har tagits bort från `.product-image-photo`. (Dessa värden är redan globalt inställda på bilden via de återställda stilarna.) [GitHub-30186](https://github.com/magento/magento2/issues/30186)

### Importera/exportera

<!-- MC-35081-->

* Kundadressen `region_id` tilldelas inte längre något `NULL`-värde när du importerar kundadresser med hjälp av en CSV-fil (`entity type = "customer address"` och `import behavior = "add/update"`) från vilken vissa fältvärden har tagits bort.

<!-- MC-35295-->

* Du kan nu dölja produktbilder i butiken under importen.

<!-- MC-35395-->

* En schemalagd produktimportprocess uppdaterar nu produkter med korrekta datafält när CSV-filen även innehåller felaktiga poster. Tidigare uppdaterades inga poster om CSV-filen innehöll felaktiga poster när **Vid fel: Fortsätt bearbetning** aktiverades.

<!-- MC-35836-->

* När en importerad produkt har `qty` inställt på 0 men `is_in_stock set` till 1 i CSV-filen visas inte produkten på kategorisidan och produktinformationssidan identifierar den som ej lagrad. Tidigare var produkter med dessa värden synliga på butiken efter importen.

<!-- MC-38433-->

* CSV-import ignorerar inte längre värdena `dropdown` och `textarea` för ytterligare attribut. Tidigare uppdaterades inte dessa attributvärden under importen.

<!-- MC-37933-->

* Produktexportens CSV-fil visas nu i administratörslistan för att exportera CSV-filer som förväntat. Tidigare uppstod ett fel i programmet när det här kommandot kördes: `bin/magento queue:consumers:start exportProcessor --single-thread --max-messages=10000`.

<!-- MC-37672-->

* Programmet genererar inte längre något fel vid import av CSV-data som innehåller bengaliska (bangla) alfabet.

<!-- MC-36410-->

* Programmet visar nu ett informativt felmeddelande när en administratör klickar på **Kontrollera data** vid import av en fil som har ändrats sedan exporten när han/hon arbetar i Chrome. Tidigare visade programmet ett konsolfel men berättade inte för användaren hur man skulle gå vidare.

<!-- ENGCOM-8252 -->

* Programmet duplicerar inte längre produktbilder när du importerar samma produkt-CSV-data mer än en gång. [GitHub-21885](https://github.com/magento/magento2/issues/21885)

<!-- ENGCOM-8262 -->

* Gränsen på 90 tecken för bildfilnamn i `vendor/magento/framework/File/Uploader.php` har tagits bort.  Tidigare kunde inte katalog- och filnamnslängden överstiga 255 tecken. Programmet importerade produkter med bilder vars filnamn överskred den här gränsen, men inte bildfilen. [GitHub-29377](https://github.com/magento/magento2/issues/29377)

<!-- ENGCOM-8153 -->

* Kupongkoder kan nu exporteras till CSV eller XML. Tidigare visades ett 404-fel i programmet när du klickade på **Exportera CSV** eller **Exportera XML** när du försökte exportera kuponger. [GitHub-29277](https://github.com/magento/magento2/issues/29277)

<!-- ENGCOM-8252 -->

* Duplicerade produktbilder tas nu bort efter import av en CSV-fil som innehåller bilder. [GitHub-14398](https://github.com/magento/magento2/issues/14398), [GitHub-21885](https://github.com/magento/magento2/issues/21885)

## Index

<!-- MC-38003-->

* Vi har förbättrat prestandan för partiell indexerare. Programmet rensar nu cache-ID:n som ändrats för varje batchiteration på 1000 ID. Cachekontext ackumulerar inte längre ID:n. Tidigare samlade cachekontext in-ID:n för varje batchiteration på 1 000 ID och rensade samma uppsättning ID:n för varje iteration.

<!-- ENGCOM-7929 -->

* Inkonsekvenser mellan det partiella omindexeringssystemet och det fullständiga omindexeringssystemet har korrigerats. Båda indexeringssystemen använder nu samma kod, vilket fungerar korrekt. Tidigare använde båda indexeringssystemen olika logik för de delade indexerarna, vilket eventuellt gjorde att indexerare ogiltigförklarades efter varje körning av det partiella indexeringssystemet. [GitHub-29478](https://github.com/magento/magento2/issues/29478), [GitHub-29297](https://github.com/magento/magento2/issues/29297)

<!-- MC-38168-->

* Vi har löst problem med den manuella indexeraren som antingen resulterat i tomma kategorisidor eller minskat produktantal på kategorisidor. Problem med ofullständiga kategorisidor eller produktantal uppstod när:

   * `catalogsearch_fulltext` och `catalog_product_price` partiella indexerare kördes på en stor katalog tills dessa indexerare slutförde körningen.

   * den partiella indexeraren kördes på antingen `catalog_category_product` eller `catalog_product_category` index, och samtidigt utfördes ett fullständigt omindex på ett av dessa index. Dessa två indexeringsprocesser kan skapa konflikter, vilket kan leda till att produkter saknas på kategorisidor.

   * `bin/magento indexer:reindex inventory` kördes på en stor katalog. Produkter saknades från kategorisidor tills den partiella indexeraren `catalogsearch_fulltext` slutförde körningen.

<!-- MC-39700-->

* En indexerare har lagts till i MySQL-tabellen `Magento_Bulk`, som har förbättrat prestanda för gruppåtgärder.

<!-- MC-38806-->

* Kommentarer i databastabeller återspeglar nu korrekt tabellstatus efter omindexering (`bin/magento indexer:reindex`). Tidigare innehöll tabellkommentarer efter omindexering samma värden som kommentarerna efter en ny installation.

<!-- ENGCOM-7542 -->

* Programsatsen `SELECT entity_id IN` har förbättrats i distributioner som implementerar MariaDB v.10.3.18, vilket har förbättrat prestanda för katalogkategoriindexering. [GitHub-25199](https://github.com/magento/magento2/issues/25199)

<!-- ENGCOM-8237 -->

* Adobe Commerce har förbättrat cacheprestanda genom att eliminera tömning av taggar flera gånger per indexerarinstans. [GitHub-29890](https://github.com/magento/magento2/issues/29890)

### Infrastruktur

<!-- MC-34353-->

* Du kan nu använda `app/etc/env.php` för att ändra meddelandehanteraren från MYSQL till AMQP.

<!-- MC-38242-->

* Problem med beräkningen av resterande decimalvärden för produktkvantiteter har korrigerats i det relevanta JavaScript-biblioteket. Programmet har tidigare beräknat decimalbråktal med fler än två siffror felaktigt och visade därefter ett felaktigt meddelande.

<!-- MC-38993 ENGCOM-8473-->

* Metoden `\Magento\Authorization\Model\Rules::update` har tagits bort. [GitHub-29128](https://github.com/magento/magento2/issues/29128)

<!-- ENGCOM-8000 -->

* Programmet genererar inte längre ett allvarligt fel när ett datumobjekt konverteras från UTC. Tidigare, under vissa villkor, utlöste metoden `convertConfigTimeToUtc` ett undantag. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7987 -->

* `DataObject` har ersatts med produktmodellen i `\Magento\MediaGalleryCatalogUi\Ui\Component\Listing\Columns\Thumbnail::prepareDataSource`.[GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- ENGCOM-7914 -->

* `RequireJS`-lösaren kan inte längre identifiera blockerade resurser. Tidigare kunde matcharen inte identifiera om alla resurser på en sida lästes in eller hanterades korrekt och sidan fortsatte att läsas in. [GitHub-28116](https://github.com/magento/magento2/issues/28116)

<!-- ENGCOM-8229 -->

* Validering av attributdatabaskod respekterar nu `Magento\Eav\Model\Entity\Attribute::ATTRIBUTE_CODE_MAX_LENGTH` i stället för ett hårdkodat värde. [GitHub-29017](https://github.com/magento/magento2/issues/29017)

<!-- MC-35699-->

* HTML minification tar inte längre bort trippelsnedstreck (//) från HTML-strängar i PHTML-filer. Tidigare tolkades trippelsnedstreck som kommentarer under miniatyrbildningen och resten av raden togs bort helt i den genererade PHTML-filen vid distributionen.

<!-- MC-38201-->

* Merchants kan nu konfigurera indexerarprenumerationer på tabellkolumnnivå i stället för på tabellnivå. Ett nytt argument har lagts till i `\Magento\Framework\Mview\View\Subscription` för att tillåta att kolumner ignoreras för en viss vy eller tabellkombination. [GitHub-30243](https://github.com/magento/magento2/issues/30243)

<!-- MC-30171-->

* Om du klickar på knappen **Lägg till i kundvagnen** innan produktsidan som JavaScript har initierat fullständigt, skapas inte längre dubblettvärden för `form_key`. Tidigare kunde en produkt läggas till i vagnen med ett cachelagrat `form_key`-värde som utlöste ett undantag. När användaren klickade på **Lägg till i kundvagnen** innan JavaScript hade initierats fullständigt, matchade inte det `form_key`-värde som skickades i formulärdata användarsessionen och produkten lades inte till i kundvagnen. [GitHub-13746](https://github.com/magento/magento2/issues/13746)

<!-- ENGCOM-8107 -->

* Den aktuella cURL-klienten respekterar nu skiftlägesokänsliga rubriknamn. Tidigare var jämförelsen `Set-Cookie` skiftlägeskänslig, vilket kan orsaka problem med vissa HTTP-servrar. [GitHub-29524](https://github.com/magento/magento2/issues/29524)

<!-- ENGCOM-8360 -->

* Uppdaterat XSD URN-format i `api-functional` och testade case-XML-filer. [GitHub-30552](https://github.com/magento/magento2/issues/30552)

<!-- ENGCOM-8295 -->

* Ett händelseprefix och händelseobjekt har lagts till i värdesmängden för katalogproduktsalternativ för att förbättra anpassningen av inläsningen av samlingen av `\Magento\Catalog\Model\ResourceModel\Product\Option\Value\Collection`. [GitHub-29621](https://github.com/magento/magento2/issues/29621)

<!-- ENGCOM-8261 -->

* Alla förekomster av `array_merge` har omarbetats för att använda det format som rekommenderas i kodningsstandarden. [GitHub-30005](https://github.com/magento/magento2/issues/30005)

<!-- ENGCOM-7718 -->

* Ett `head.additional`-block av typen `\Magento\Framework\View\Element\Text\ListText` har lagts till i layouten `adminhtml` `default` (av `magento2/module-base`). [GitHub-29165](https://github.com/magento/magento2/issues/29165)

<!-- ENGCOM-8312 -->

* En URL-metod som saknas har lagts till i layoutmallens widget. [GitHub-30036](https://github.com/magento/magento2/issues/30036)

<!-- ENGCOM-8127 -->

* Metoden `\Magento\Framework\Filesystem\Io\File::read()` är nu kompatibel med `\Magento\Framework\Filesystem\Io\IoInterface::read()`. [GitHub-27866](https://github.com/magento/magento2/issues/27866)

### Klarna

* Tog bort beroendet av PayPal-modulen. [GitHub-29421](https://github.com/magento/magento2/issues/29421)

### Loggning

<!-- ENGCOM-8443 -->

* Modulen `Magento_Logging` registrerade nu nya värden korrekt, liksom tidigare värden. Tidigare visade värdena i kolumnen Värde före ändring värden för Ej tillämpligt oavsett om det var den första ändringen eller nästa, eller när standardvärdet returnerades. [GitHub-26943](https://github.com/magento/magento2/issues/26943)

### Mediegalleri

<!-- ENGCOM-8014 -->

* Sidan Admin **Lagrar** > **Konfiguration** > **Avancerat** > **System** har uppdaterats för att visa rätt produktnamn (Media Gallery). Mindre omformningar av användargränssnittet har inkluderats. [GitHub-1738](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-8019 -->

* Länkarna i avsnittet Används i bildbeskrivningarna i Mediegalleriet visar nu ett rutnät som har filtrerats efter den valda bilden som förväntat. Tidigare hade det visade rutnätet inte rätt namn och listposterna var inte korrekta. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019 -->

* Nu kan du redigera flera bilder i Mediegalleriet. Tidigare kunde du inte lägga till taggar i en andra bild efter att du lagt till taggar i en bild. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015 -->

* Listrutan Taggar är nu tom som väntat när du har tagit bort taggar från en bild i Mediegalleriet. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

<!-- ENGCOM-8146 -->

* Batchbearbetning för kömeddelanden i synkroniseringskön för mediegalleriet stöds nu. [GitHub-1724](https://github.com/magento/adobe-stock-integration/issues/1724)

<!-- ENGCOM-8064 -->

* Programmet visar nu en 404-sida som förväntat när du försöker öppna mediegalleriet när **det förbättrade mediegalleriet** är inaktiverat.  [GitHub-1760](https://github.com/magento/adobe-stock-integration/issues/1760)

<!-- ENGCOM-8072 -->

* `MediaGalleryMetadata` hoppar nu över segmentläsaren om ett undantag inträffar och tolkar istället bildens metadata som förväntat. Tidigare var bildens metadata tomma på grund av ett undantag från segmentläsaren `exif_read_data`. [GitHub-1782](https://github.com/magento/adobe-stock-integration/issues/1782)

<!-- ENGCOM-8069 -->

* Längden på mappnamnet förhindrar inte längre att en bild överförs till mediegalleriet. Sökvägskolumnen anges nu som typen `text`. [GitHub-1778](https://github.com/magento/adobe-stock-integration/issues/1778)

<!-- ENGCOM-8217 -->

* Bilduppladdaren visar nu rätt bildstorlek när en återgivning infogas från Mediegalleriet. [GitHub-1806](https://github.com/magento/adobe-stock-integration/issues/1806)

<!-- ENGCOM-8467 -->

* Verifiering av sökväg har lagts till i plugin-programmet för överföring av `Mediagallery`. Tidigare misslyckades valideringen och programmet importerade inte produkter när **Aktivera gammalt mediegalleri** inaktiverades. [GitHub-30649](https://github.com/magento/magento2/issues/30649)

<!-- ENGCOM-8057 -->

* `Magento_Cms::media_gallery` ACL-underresurser har lagts till och verkställts för det nya mediegalleriet för att stödja konfigurerade behörigheter för följande diskreta åtgärder:

   * Överför resurser
   * Infoga resurser i innehåll
   * Ta bort resurser
   * Skapa mappar
   * Ta bort mappar. [GitHub-1487](https://github.com/magento/adobe-stock-integration/issues/1487)

<!-- ENGCOM-8047 -->

* Textsträngar och mappnamn för långa mediegallerier beskärs inte längre. Tidigare visade programmet beskuren text och bilder och det här meddelandet visades: `We couldn't find any records`. [GitHub-1763](https://github.com/magento/adobe-stock-integration/issues/1763), [GitHub-1758](https://github.com/magento/adobe-stock-integration/issues/1758)

<!-- ENGCOM-8042 -->

* Programmet visar inte längre knappen **Lägg till markerade** när inga bilder är markerade när du redigerar innehåll för en ny sida. [GitHub-1769](https://github.com/magento/adobe-stock-integration/issues/1769)

<!-- ENGCOM-8047 -->

* Filter används nu som förväntat på kategoristödrastret **Innehåll** > **Mediegalleri**. [GitHub-1763](https://github.com/magento/adobe-stock-integration/issues/1763)

<!-- ENGCOM-8183 -->

* Konfigurationen av alternativ för gallerimultipliceringsbrytpunkter fungerar nu som förväntat. Tidigare fungerade inte konfigurationen av brytpunktsalternativ korrekt eftersom `mediaCheck` utlöste funktionen för att avsluta mediefråga vid sidinläsning. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### MFTF

<!-- ENGCOM-8359 -->

* Upprepade åtgärder har ersatts med åtgärdsgrupper i `CheckStaticBlocksTest`. [GitHub-30561](https://github.com/magento/magento2/issues/30561)

<!-- ENGCOM-8267 -->

* `AdminUpdateCategoryAndMakeInactiveTest` och `VerifyChildCategoriesShouldNotIncludeInMenuTest` har omarbetats för att följa bästa praxis för MFTF. [GitHub-30058](https://github.com/magento/magento2/issues/30058)

<!-- ENGCOM-8458 -->

* Borttagen dubblett av `AdminOpenCMSBlocksGridActionGroup`. [GitHub-30896](https://github.com/magento/magento2/issues/30896)

<!-- ENGCOM-8156 -->

* Ersatte `AdminOpentCmsBlockActionGroup` med AdminOpenCmsBlockActionGroup. [GitHub-29839](https://github.com/magento/magento2/issues/29839)

<!-- ENGCOM-8226 -->

* `GoToAttributeGridPageActionGroup` har tagits bort. [GitHub-30103](https://github.com/magento/magento2/issues/30103)

<!-- ENGCOM-8061 -->

* Åtgärdsgrupper har lagts till i modulen `Analytics`. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-7334 -->

* `CheckCheckoutSuccessPageAsRegisterCustomerTest` och `CheckCheckoutSuccessPageAsGuestTest` har uppdaterats för att avbryta skapade order efter testkörning. [GitHub-28324](https://github.com/magento/magento2/issues/28324)

<!-- ENGCOM-8214 -->

* `AdminNavigateToPageGridActionGroup` togs bort på grund av redundans. [GitHub-29838](https://github.com/magento/magento2/issues/29838)

<!-- ENGCOM-8280 -->

* Ett problem med `StorefrontProductListWidgetWithSharedCatalogTest` som orsakade att testet hoppades över har lösts. [GitHub-322](https://github.com/magento/partners-magento2b2b/issues/322)

<!-- ENGCOM-8122 -->

* `ActionGroup` har implementerats för att navigera till utcheckningssidan. [GitHub-29843](https://github.com/magento/magento2/issues/29843)

<!-- ENGCOM-8124 -->

* `AdminOpenCreateNewCMSPageActionGroup` har implementerats för att navigera till den nya CMS-sidan. [GitHub-29824](https://github.com/magento/magento2/issues/29824)

<!-- ENGCOM-8268 -->

* Korrigerade problem med hoppet i MFTF-tester för CMS-sidan för Media Gallery. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

<!-- B2B-831 -->

* Betydande titlar och beskrivningar har lagts till i MFTF-tester för modulerna `Company`, `CompanyCredit`, `CompanyPayment`, `CompanyShipping` och `ConfigurableSharedCatalog`. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

#### Nya tester

<!-- ENGCOM-7804 -->

* Ett test för att aktivera e-post för en vän i administratören har lagts till. [GitHub-29145](https://github.com/magento/magento2/issues/29145)

<!-- ENGCOM-8316 -->

* Ett test för att ta bort ett CMS-block från ett rutnät har lagts till av en administratör. [GitHub-30372](https://github.com/magento/magento2/issues/30372)

<!-- ENGCOM-7933 -->

* Ett test för att tillämpa en kundvagnsregel på en enskild paketartikel har lagts till. [GitHub-28921](https://github.com/magento/magento2/issues/28921)

<!-- ENGCOM-8075 -->

* Tester har lagts till för att kontrollera om **Använd i**-information för en mediegalleribild visas när entiteten har tagits bort. [GitHub-1774](https://github.com/magento/adobe-stock-integration/issues/1774)

#### Nya åtgärdsgrupper

* `AssertStorefrontCustomerLogoutSuccessPageActionGroup`. [GitHub-29841](https://github.com/magento/magento2/issues/29841) <!-- ENGCOM-8121 -->

* `AdminOpenConfigurationStoresPageActionGroup`. [GitHub-29848](https://github.com/magento/magento2/issues/29848) <!-- ENGCOM-8259 -->

* `ReloadPageActionGroup`. [GitHub-30683](https://github.com/magento/magento2/issues/30683) <!-- ENGCOM-8394 -->

* `StorefrontClickRefundTabCustomerOrderViewActionGroup`. [GitHub-30032](https://github.com/magento/magento2/issues/30032) <!-- ENGCOM-8203 -->

* `AdminOpenAdminThreeDSecurePageActionGroup`. [GitHub-29845](https://github.com/magento/magento2/issues/29845) <!-- ENGCOM-8115 -->

* `AdminCustomerClickFirstRowEditLinkActionGroup`.  [GitHub-29501](https://github.com/magento/magento2/issues/29501) <!-- ENGCOM-8043 -->

* `StorefrontClickAddToCartButtonActionGroup`. [GitHub-29823](https://github.com/magento/magento2/issues/29823) <!-- ENGCOM-8113 -->

* `AdminDeleteTaxRateActionGroup`. [GitHub-29940](https://github.com/magento/magento2/issues/29940) <!-- ENGCOM-8192 -->

* `AdminOpenWebConfigurationPageActionGroup`. [GitHub-29846](https://github.com/magento/magento2/issues/29846) <!-- ENGCOM-8126 -->

* `AdminOpenGeneralConfigurationPageActionGroup`. [GitHub-29847](https://github.com/magento/magento2/issues/29847) <!-- ENGCOM-8114 -->

* `AdminOrderClickSubmitOrderActionGroup`. [GitHub-29649](https://github.com/magento/magento2/issues/29649) <!-- ENGCOM-8023 -->

* `AdminOpenCatalogProductPageActionGroup`. [GitHub-29941](https://github.com/magento/magento2/issues/29941) <!-- ENGCOM-8209 -->

* `AdminClickInvoiceButtonIntoOrderActionGroup`. [GitHub-25399](https://github.com/magento/magento2/issues/25399) <!-- ENGCOM-8210 -->

* `AdminGridBulkActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminGridColumnShowActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminOpenIndexManagementPageActionGroup`. [GitHub-29825](https://github.com/magento/magento2/issues/29825) <!-- ENGCOM-8123 -->

* `AdminOpenCatalogSearchTermIndexPageActionGroup`. [GitHub-29844](https://github.com/magento/magento2/issues/29844) <!-- ENGCOM-8128 -->

* `AdminClickAddProductToggleAndSelectProductTypeActionGroup`. [GitHub-30917](https://github.com/magento/magento2/issues/30917) <!-- ENGCOM-8439 -->

* `StorefrontCheckoutClickSaveAddressButtonActionGroup`. [GitHub-30916](https://github.com/magento/magento2/issues/30916) <!-- ENGCOM-8454 -->

* `AdminOpenCurrencyRatesPageActionGroup`. [GitHub-30783](https://github.com/magento/magento2/issues/30783) <!-- ENGCOM-8432 -->

* `AdminClickGetShippingMethodsAndRatesActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `AdminSelectFixedShippingMethodActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `StorefrontClickProceedToCheckoutActionGroup`. [GitHub-30926](https://github.com/magento/magento2/issues/30926) <!-- ENGCOM-8438 -->

* `StorefrontOpenMyAccountPageActionGroup`. [GitHub-29842](https://github.com/magento/magento2/issues/29842) <!-- ENGCOM-8143 -->

### Nyhetsbrev

<!-- MC-38789-->

* Administratörsanvändare kan nu redigera ett kundkonto som förväntat när kunden prenumererar på ett nyhetsbrev i kö. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8034 -->

* Programmet skickar nu en ny bekräftelse på prenumerationen på nyhetsbrevet om kunden inte bekräftar sin prenumeration på nyhetsbrevet. [GitHub-28422](https://github.com/magento/magento2/issues/28422)

<!-- ENGCOM-8429 -->

* Du kan nu redigera ett kundkonto som förväntat när kunden prenumererar på ett nyhetsbrev som är placerat i kö. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

### Betalningsmetoder

<!-- MC-35161-->

* Betalningsmetoder läses nu in i Admin för alla webbplatser som förväntat i en distribution av flera butiker.

<!-- MC-36954-->

* Programmet visar inte längre meddelandet `Purchase Order number is a required field` ovanför kupongkodsfältet innan kunden anger någon information i distributioner där Inköpsorder har konfigurerats som det enda tillgängliga betalningsalternativet.

<!-- MC-35152-->

* Programmet slutför nu Payflow Pro-betalningar när kundens namn innehåller bokstäver med accenttecken. Tidigare slutfördes inte betalningen och programmet loggade följande fel: `report.CRITICAL: String to be escaped was not valid UTF-8 or could not be converted`.

<!-- ENGCOM-8173 -->

* Gästkunder kan nu göra PayPal-beställningar när **Automatisk tilldelning till kundgrupp** är aktiverat. Betalningen behandlas på PayPal-gatewayen, ordern skapas i Magento och kunden ser din tacksida. Tidigare bearbetades ordern på PayPal-gatewayen, men ordern skapades inte i Adobe Commerce. Köparen omdirigerades istället till sidan för ordergranskning, där följande fel visades i programmet: `Failed address validation: %1" error`. [GitHub-25399](https://github.com/magento/magento2/issues/25399)

#### PayPal

<!-- MC-35692-->

* Handlare kan nu göra en beställning från administratören efter att ha bytt från en betalningsmetod som använder ett kreditkort till en betalningsmetod som inte är kreditkortsbetalning. När en handlare tidigare klickade på knappen **Skicka beställning** startades inläsningsprocessen men slutfördes inte, och beställningen placerades inte.

<!-- MC-37649-->

* Programmet skapar inte längre dubblettorder när en beställning placeras med PayPal Express. Tidigare när en kund försökte betala för en beställning med PayPal Express men PayPal returnerade ett fel, skapades beställningen ändå. Detta resulterade i dubblettorder på handlarens webbplats. [GitHub-13952](https://github.com/magento/magento2/issues/13952)

<!-- MC-38829-->

* Rapporter om PayPal-kvittning finns nu tillgängliga på **Reports** > **Sales** > **PayPal-kvittning** som förväntat. Tidigare listade inte programmet de här rapporterna i rutnätet för PayPal-kvittningsrapport och visade följande meddelande: `We couldn't find any records`.

<!-- MC-39442-->

* Om du klickar på knappen **PayPal** under utcheckningen utlöses inte längre ett överflödigt `web-api` -anrop. Tidigare utlöstes två förfrågningar, vilket fördubblade kostnaden för produkten.

### Prestanda

<!-- MC-37705-->

* Prestandaproblem i `module-catalog-import-export/Model/Import/Product/Option.php` har åtgärdats. Den tid som krävs för att exportera eller importera mer än 100 000 poster har minskats. Se artikeln [Import/export tar längre tid än förväntat med ett stort antal produktalternativ.](https://support.magento.com/hc/en-us/articles/360050695772)

<!-- MC-37799-->

* `Magento_Csp/Model/BlockCache` har omarbetats för att minska både minnesanvändningen och genereringen av onödigt stora cachelagrade strängar. Tidigare har sidor som innehöll dynamiskt vitlistade skript och format ofta upplevts av prestandaproblem. [GitHub-29964](https://github.com/magento/magento2/issues/29964)

<!-- MC-37816 -->

* Vi har förbättrat arbetet med schemalagd export av kataloger som innehåller över 100 000 produkter som använder konsumenterna.

<!-- MC-38306 -->

* Programmet tömmer inte längre kategoricachen när du lägger till eller sparar en inaktiverad produkt i en kategori. Tidigare tömde programmet cacheminnet för relaterade kategorier trots produktstatus, vilket påverkade serverprestanda.

<!-- MC-38518 -->

* Sidinläsningstiden för uppdatering av produktkvantiteten i kundvagnen har förbättrats. Tidigare körde programmet flera separata frågor för varje produkt i kundvagnen, vilket ökade sidans laddningstid.

<!-- MC-39700 -->

* En indexerare har lagts till i MySQL-tabellen `Magento_Bulk`, som har förbättrat prestanda för gruppåtgärder.

<!-- MC-38593 -->

* Programmet cachelagrar nu underordnade ID:n för konfigurerbara produkter. Detta har förbättrat sidinläsningsprestanda genom att minska antalet databasförfrågningar. [GitHub-30585](https://github.com/magento/magento2/issues/30585)

<!-- MC-37594 -->

* Inläsningen av Admin Dashboard har förbättrats. Tidigare visades tabbnamnen som en lista innan sidan lästes in.

<!-- MC-37417 -->

* Hanteringen av Redis-cachen har förbättrats genom tillägg av utgångsgränser för layoutcacher. Tidigare uppnådde Redis caches allokerat maximalt minne snabbt i stora distributioner och programmet utlöste fel vid skrivåtgärder.

<!-- ENGCOM-8016 -->

* Utcheckningsprestanda har förbättrats genom borttagning av en redundant databasfråga i `app/code/Magento/Catalog/Model/CategoryLink.php`. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- ENGCOM-8290 -->

* `Magento\Framework\DB\Adapter\Pdo\Mysql->isTableExists` har omarbetats för att förbättra prestanda. Redundanta anrop till `SHOW TABLE STATUS` för att kontrollera om det finns en tabell har reducerats. [GitHub-29662](https://github.com/magento/magento2/issues/29662)

<!-- ENGCOM-8258 -->

* `getPageLayoutsConfig` har nu sparats i cache, vilket har förbättrat prestanda för konfigurationsbyggaren. [GitHub-29546](https://github.com/magento/magento2/issues/29546)

<!-- MC-35614-->

* Adobe Commerce prestanda under redigerings- och sparåtgärder för kundsegment som innehåller fler än 3 000 000 kunder har förbättrats.

### Beständig

<!-- MC-36647 -->

* Köpare kan inte längre göra en beställning efter att sessionscookien har upphört att gälla när beständig kundvagn är aktiverad. I stället visas inloggningssidan så att användaren kan logga in. Tidigare gjordes beställningen. Programmet validerade inte den beständiga kunden korrekt när `PHPSESSID` hade gått ut och `customerSession` återskapades från den beständiga informationen.

<!-- MC-39127-->

* Programmet visar nu välkomstmeddelandet som väntat efter att en kund har loggat in i en butik där en beständig kundvagn är aktiverad. Tidigare visade programmet **Inte du?** meddelande efter inloggning.

<!-- MC-38269-->

* Programmet visar inte längre **Är det inte du?**-text när en kund väljer alternativet **Kom ihåg mig** när han eller hon loggar in på en distribution där en beständig kundvagn är aktiverad.

<!-- MC-37109-->

* Programmet visar inte längre innehållet i kundvagnen när kundsessionen har upphört. Tidigare visade programmet det här felet när en gästkund försökte checka ut när en beständig kundvagn var aktiverad: `No such entity with cartid = 0`.

### Priser

<!-- MC-34394-->

* Efterföljande asynkrona prisuppdateringar påverkar inte längre varandra, och rätt status tilldelas varje åtgärd. Tidigare, om en asynkron prisuppdatering misslyckades, skulle alla följande asynkrona prisuppdateringar misslyckas tills motsvarande kökonsument startades om. [GitHub-27865](https://github.com/magento/magento2/issues/27865)

### Rapporter

<!-- MC-36652 38925-->

* **Rapporter** > **Marknadsföring** > **Produkter i kundvagnar** visar nu endast posten i det tillåtna omfånget för användaren som genererar rapporten. Tidigare fanns alla data tillgängliga för alla omfattningar.

<!-- MC-38074-->

* Programmet använder nu valutan som anges i rollomfånget för säljaren som genererar rapporten när produktvalutan visas i rapporten Produkter i kundvagn.

<!-- MC-37934-->

* Produktfunktionerna Senast visade och Senast jämförda visar nu statistik för olika butiker och webbplatser i Admin som förväntat i en distribution i flera butiker. Tidigare har dessa funktioner inte tagit hänsyn till alla butiker eller webbplatser.

<!-- MC-37217-->

* Priserna i orderrapporter använder nu rätt valutasymbol.

<!-- ENGCOM-8314 -->

* Programmet verifierar nu om det finns en token när en användare klickar på Admin Dashboard **Gå till avancerad rapport**.  Om variabeln finns visas sidan Avancerad rapportering. Om variabeln inte är konfigurerad visas en informativ sida i användarhandboken. [GitHub-25411](https://github.com/magento/magento2/issues/25411)

### Return Merchandise Authorizations (RMA)

<!-- MC-36057-->

* De valda alternativen gäller nu för objekt som delas upp när du delar en RMA. Tidigare sparades inte värden för Returorsak, Objektvillkor och Upplösning.

<!-- MC-35360-->

* Nu kan du ta bort spårnings- och leveransinformation för en RMA-fil när JavaScript-paketering är aktiverat.

<!-- MC-36757-->

* Administratörer med begränsad åtkomst till endast produkter i en viss webbplatsomfattning kan nu lägga till ett objekt i en retur även när det objektet inte längre finns i webbplatsens omfång.

### Recensioner

<!-- MC-37145-->

* Antalet klassificeringar som visas på **Lagrar** > **Attribut** > **Klassificering** matchar nu antalet klassificeringar i en distribuering med flera platser. [GitHub-30258](https://github.com/magento/magento2/issues/30258)

<!-- MC-37117-->

* Sidan Ny granskning läses nu in som förväntat när du klickar på knappen **Ny granskning** i Admin **Markering** > **Alla granskningar**. Om du klickar på en produkt på den här sidan öppnas det förväntade nya granskningsformuläret för den produkten.

<!-- ENGCOM-8383 -->

* Programmet genererar inte längre det här felet när du försöker redigera en order från administratören **Marknadsföring** > **Alla granskningar**: `Uncaught TypeError: Event.observe is not a function`. [GitHub-30388](https://github.com/magento/magento2/issues/30388)

### Belöningar

<!-- MC-38257-->

* Belöningspoäng beräknas nu som förväntat för skattepliktiga order när en partiell order har slutförts.

<!-- MC-37244-->

* Handlarna kan nu återbetala en del av en order som köpts med belöningspoäng och därefter återbetala resten av ordern. Tidigare kunde handlarna inte återbetala belöningspoängen för orderresten.

<!-- MC-37113-->

* Det här felet visas inte längre i programmet när en kund återanvänder belöningspunkter efter att ha tagit bort dem: `You removed the reward points from this order`.

<!-- MC-37032-->

* Belöningspoäng beräknas nu korrekt när en kund lägger en order med en annan valuta än basvalutan i en butik som stöder flera valutor.

### Försäljning

<!-- MC-36219-->

* Kolumnen `order_created_at` i `sales_shipment_grid` uppdateras nu som förväntat efter varje uppdatering.

<!-- MC-36405-->

* Du kan nu beställa om en produkt med ett datum för anpassade alternativ från en butik där **Använd JavaScript-kalender** är aktiverat. Tidigare, när du försökte beställa om, lade programmet inte till objektet i vagnen och visade följande fel: `Could not add the product with SKU "simp1" to the shopping cart: Please specify date required option(s).`

<!-- MC-36533-->

* Programmet stänger inte längre omedelbart en order när en kund checkar ut en order som består av en virtuell produkt med en total kostnad på $0 i distributioner där utcheckningsmetoden noll som delsumma är aktiverad.

<!-- MC-36755-->

* Programmet arkiverar inte längre en order innan det bearbetas. Tidigare påverkades omarkerade order av flervalsåtgärder i orderrutnätet i Admin.

<!-- MC-37371-->

* Rutnätet för kreditnotor visar nu rätt valutasymbol när Saudiarabien (SAR) har angetts som basvaluta.

<!-- MC-37880-->

* Programmet visar nu konsekvent leveransadressuppgifter som förväntat på ordersidan vid utcheckningen.

<!-- MC-38666-->

* Värdet för `total_qty` matchar nu värdet för `total_qty_ordered` i försäljningsfakturor.

<!-- MC-38717-->

* Asynkron sändning av e-postmeddelanden skickar nu e-post för endast de order som skapades efter datumet för den senaste uppdateringen. Tidigare filtrerade inte programmet e-post efter datum när asynkron sändning aktiverades.

<!-- MC-39135-->

* Programmet skickar nu fakturameddelanden som förväntat när en order läggs från administratören.

<!-- MC-38917-->

* Programmet rensar nu befintliga orderdata under en session när en handlare skapar en ny order för en kund från administratören.

<!-- MC-38915-->

* Du kan nu ändra kundgruppen för nya kunder som skapas via en administratörsorder när **Aktivera automatisk tilldelning till kundgrupp** är aktiverat. Du kan också tilldela kundgrupp baserat på momsvalidering. Tidigare kontrollerades inte den tilldelade begäran `group_id` när momsregistreringsnumret validerades. Som standard användes `group_id` som standard.

<!-- MC-37539-->

* Programmet ändrar inte längre status för en anpassad order med statusen `Suspected Fraud` till `Processing` efter att en handlare har skapat en delleverans med REST API.

### Försäljningsregel

<!-- MC-34793-->

* Kupongkoder som har tillämpats baserat på leveransmetoden tillämpas inte längre när en kund byter leveransmetod. Tidigare rensades inte kupongkoderna när kunderna bytte leveranssätt.

<!-- MC-34649-->

* Köpare kan inte tillämpa en kupongkod oftare än inställningen **Används per kund** tillåter. Tidigare, om en kund hade flera webbläsarfönster öppna och gjorde flera beställningar samtidigt, fick varje beställning rabatten, trots att inställningen **Används per kund** hade värdet **1**.

### Sök {#search-heading}

<!-- MC-35095-->

* Elasticsearch genererar inte längre något okänt modifieringsfel när en kund söker på en söksynonym. Tidigare saknade escape-symboler i reguljära uttryck, vilket resulterade i ett allvarligt fel.

<!-- MC-37577-->

* Avancerad sökning returnerar inte längre underordnade produkter som enskilda sökresultat när de underordnade produkterna konfigurerades med synlighet inställd på **Inte synlig enskilt**.

<!-- MC-37954-->

* Elasticsearch produktnamn i sökresultat är inte längre skiftlägeskänsliga.

<!-- ENGCOM-8329 -->

* Sökresultatsidan cachelagras nu som förväntat när inställningen **Ange antal översta sökresultat som ska cachelagras till 0** har aktiverats i Administratör **Lagrar** > **Konfiguration** > **Katalog** > **Katalog** > **Katalogsökning**.

<!-- MC-36807-->

* Katalogsökindexeraren körs nu utan att något fel genereras på grund av Elasticsearch fältgräns. Tidigare uppstod följande fel i programmet: `Limit of total fields [xxx] in index [m24dev_product_1_v10] has been exceeded`.

<!-- MC-35491-->

* Prestandan för katalogsökning har förbättrats. Inaktivera **Aktivera sökförslag** (**Lagrar** > **Konfiguration** > **Katalog** > **Katalogsökning** ) fungerar som förväntat. Tidigare sökte programmet i tabellen MySQL `search_query` i stället för Elasticsearch efter sökförslag som fylldes i automatiskt. [GitHub-25534](https://github.com/magento/magento2/issues/25534)

<!-- MC-35256-->

* Elasticsearch filtrerar nu produktpriserna på samma sätt som MySQL. Fälttypen `price_*` ändrades från `float` till `double` i Elasticsearch-indexet för att förbättra precisionen och korrigera ett flyttalsfel.

<!-- ENGCOM-8393 -->

* En händelseavlyssnare för tangentnedtryckning har lagts till i administratören för att aktivera det globala sökformuläret när ett snedstreck anges. [GitHub-29551](https://github.com/magento/magento2/issues/29551)

<!-- MC-24217-->

* Elasticsearch genererar inte längre något fel utan visar i stället inga produkter som förväntat när ett `string`-värde används för att filtrera produkter efter attribut med en `integer`- eller `decimal`-serverdelstyp. Tidigare visades det här felet i `exception.log`: `number format exception`.

<!-- ENGCOM-8303 -->

* Elasticsearch genererar inte längre ett undantag när en sökterm innehåller en `/`.  [GitHub-25886](https://github.com/magento/magento2/issues/25886), [GitHub-25110](https://github.com/magento/magento2/issues/25110)

* Sökningen är nu inaktiverad som förväntat för en vald kundgrupp från produktfrågan när konfigurationsinställningen **Tillåt inte katalogsökning efter** i allmänna kategoribehörigheter är aktiverad. [GitHub-29927](https://github.com/magento/magento2/issues/29927)

<!-- ENGCOM-8466 -->

* Sökresultaten innehåller inte längre flera citattecken av samma ord. [GitHub-30104](https://github.com/magento/magento2/issues/30104)

### Leverans

<!-- MC-38247 -->

* Utcheckningsprocessen misslyckas inte längre när ett nätverksavbrott avbryter anslutningen till leveransmetoden för DHL. I stället visas andra tillgängliga leveransmetoder. Tidigare avbröts utcheckningsprocessen när anslutningen till DHL-leveransen avbröts och följande fel visades i programmet: `Sorry, no quotes are available for this order at this time`. [GitHub-29902](https://github.com/magento/magento2/issues/29902)

<!-- MC-35194-->

* Fälten som beskriver UPS-leveransmetoden på Admin **Stores** > **Configuration** > **Sales** > **Delivery Methods** är nu aktiverade som förväntat.

<!-- MC-35633-->

* Leveranser som skapats via POST `/rest/V1/shipment`-slutpunkten uppdaterar nu order korrekt. Tidigare skapade programmet en leverans, men leveransstatusen var fortfarande i bearbetningstillståndet.

<!-- MC-37120-->

* Programmet tar inte längre bort enkla produkter från varukorgen när en annan produkt tas bort från varukorgen före utcheckning med Leverans till flera adresser. [GitHub-30259](https://github.com/magento/magento2/issues/30259)

<!-- MC-38031-->

* På sidan Ordergranskning visas nu momsbeloppet före leveransbeloppet som förväntat för order som skickas till flera adresser.

<!-- ENGCOM-8257 -->

* UPS-leveransspårning visar nu statusen `Delivered On` endast när ett paket har levererats. [GitHub-30032](https://github.com/magento/magento2/issues/30032)

<!-- MC-38825-->

* Nu visas rätt vagnsdelsumma för order som innehåller en virtuell produkt när kunden går tillbaka till kundvagnen från utcheckning med flera adresser.

<!-- MC-38682-->

* Nu kan man skapa en fraktsetikett från fraktsidan för en befintlig order som använder FedEx-leverans när JavaScript-paketering är aktiverat. Tidigare uppstod ett fel när handlaren klickade på knappen **Skapa leveransetikett**.

<!-- MC-36953-->

* Leveransspårningslänken i e-postmeddelandet med leveransbekräftelsen som skickas till kunder fungerar nu som förväntat. Tidigare returnerade länken ett 404-fel.

<!-- ENGCOM-8025 -->

* Programmet visar nu ett informativt felmeddelande när en kund checkar ut med hjälp av flera adresser och sedan tar bort alla produkter utom en virtuell produkt. [GitHub-25595](https://github.com/magento/magento2/issues/25595)

<!-- ENGCOM-8253 -->

* Nu kan du skapa en leveransetikett som förväntat för en delorder. Tidigare, när du försökte skapa en leveransetikett för endast en artikel från en beställning, lade programmet till alla produkter i paketet och valideringen misslyckades. [GitHub-29552](https://github.com/magento/magento2/issues/29552)

<!-- ENGCOM-8154 -->

* Verifiering för leveransmetoden ignoreras inte längre vid anrop av `/V1/guest-carts/:cartId/totals-information`. [GitHub-25147](https://github.com/magento/magento2/issues/25147)

### Webbplatskarta

<!-- MC-37306-->

* Webbplatskartor som genereras av `cron` innehåller nu korrekta bild-URL:er. Tidigare var den genererade cachelagrade bildsökvägen felaktig i distributioner av flera lager.

### Mellanlagring

<!-- MC-39046 -->

* På sidan Redigera hemsida visas nu alla schemalagda uppdateringar som förväntat när du söker efter schemalagda uppdateringar för hemsidan. Tidigare visades bara en av flera schemalagda uppdateringar i programmet.

<!-- MC-34988 -->

* Om du skickar 0 med slutpunkten för specialpriset `/rest/V1/products/special-price-information` sparas nu priset och schemat returneras som förväntat.

<!-- MC-35362 -->

* Schemalagda importer körs nu som väntat när CSV-importfilen innehåller ett byteordningsmärke (BOM).

<!-- MC-38026 -->

* Programmet tar inte längre bort layoutbrödklassen när en handlare schemalägger en kategoriuppdatering.

<!-- MC-38234 -->

* Omschemalagda produktändringar tas inte längre bort efter en `cron`-körning.

<!-- MC-38759-->

* Programmet genererar inte längre något fel när du försöker schemalägga en uppdatering för en kategori. Tidigare inträffade det här felet i programmet när du klickade på **Spara** på sidan Schemalägg ny uppdatering: `Something went wrong while saving the Magento\Catalog\Api\Data\CategoryInterface`.

<!-- MC-38455-->

* API:t `rest/V1/products/special-price` kan nu användas för att schemalägga produktspecialpriser för flera butiker. Tidigare uppstod ett fel när en handlare schemalade en prisuppdatering för flera butiker för samma `from`- och `to`-tid när en återgång är tillgänglig vid det nya schemats starttid.

### Butik

<!-- ENGCOM-7543 -->

* Admin- och huvudbutiksväljaren återspeglar nu ändringar som gjorts i butikssorteringsordningen i Admin. [GitHub-13401](https://github.com/magento/magento2/issues/13401)

<!-- ENGCOM-8274 -->

* Programmet skapar nu korrekta URL:er för kategorier och produkter efter att en butiksvys URL-nyckel på den översta nivån har ändrats. Tidigare, när en butiksvyes kategoriträd innehöll ändringen av `url_keys`, användes kategorins standardbutiksvy när URL:er skapades om en kategorinyckel inte ändrades men det var den överordnade kategorinyckeln som gjorde det. [GitHub-28633](https://github.com/magento/magento2/issues/28633)

### Målregler

<!-- MC-34998-->

* Inläsningen av produktinformationssidor har optimerats. Vi har lagt till index för databastabeller som optimerar villkorsfrågor för målregel i många fall.

<!-- MC-36288-->

* Målregler för relaterade produkter fungerar nu när villkoret `is one of` som används för funktionen Produkter att visa innehåller flera villkor. Tidigare parsades det inte om villkoret innehöll flera värden.

### Moms

<!-- MC-37666-->

* Momsvalidering på en gästorder resulterar inte längre i att programmet sparar offerten med en felaktig kundmomsklass. [GitHub-30018](https://github.com/magento/magento2/issues/30018)

<!-- MC-37761-->

* Beställningar som skickas till flera adresser kan nu sparas vid utcheckning när FPT har konfigurerats. Tidigare visade programmet en tom sida i stället för orderframgångssida efter att ha slutfört en beställning för flera adresser.

<!-- ENGCOM-8158 -->

* Detaljsidor för butiksprodukter visar nu gamla och nya priser med och utan moms som förväntat. [GitHub-27500](https://github.com/magento/magento2/issues/27500), [GitHub-11998](https://github.com/magento/magento2/issues/11998)

### Testa

<!-- MC-37364-->

* `bin/magento dev:tests:run` startar nu följande test som förväntat: all, unit, integration, integration-all, static-all, integrity, legacy och default.

<!-- MC-38488-->

* `AdminMediaGalleryInsertLargeImageFileSizeTest` har omarbetats.

<!-- ENGCOM-8158 -->

* Enhetstester är nu kompatibla med PHPUnit 8. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-8009 -->

* `\Magento\TestFramework\TestCase\WebapiAbstract` innehåller nu en funktion som stöder jämförelse av stora kapslade arrayer med förväntade och faktiska resultat i tester. Irrelevanta nycklar i resultatet kan nu ignoreras. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-8024 -->

* `AdminMediaGalleryCatalogUiEditCategoryGridPageTest` misslyckas inte längre slumpmässigt. [GitHub-1764](https://github.com/magento/adobe-stock-integration/issues/1764)

<!-- ENGCOM-8041 -->

* `dev/tests/integration/testsuite/Magento/Customer/Controller/AccountTest` har förbättrats. (`assert` baseras nu på `XPath` selector i stället för `assertStringContainsString`.) [GitHub-29700](https://github.com/magento/magento2/issues/29700)

<!-- ENGCOM-8017 -->

* Täckningen för modulen `AdminAnalytics` har lagts till. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-8266 -->

* Integrations- och API-funktionstester är nu kompatibla med PHPUnit 9.3. [GitHub-30146](https://github.com/magento/magento2/issues/30146)

<!-- MC-35798 8109-->

* Problem med GraphQL `testRequestCacheTagsForCategoryListOnMultipleIds`-testet har korrigerats. [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-8327 -->

* Valutatillgänglighetstestet för företagskrediter har automatiserats.

<!-- ENGCOM-7762 -->

* Huvudvärden som innehåller URL:er tolkas nu korrekt i `ApiFunctional TestFramewor`k. [ GitHub-26425 ](https://github.com/magento/magento2/issues/26425)

<!-- ENGCOM-8382 -->

* `—no-tablespaces` har lagts till i alla förekomster av `mysqldump`, vilket gör att integrationstester kan köras utan privilegiet `PROCESS` (krävs sedan MySQL 5.7.31 / 8.0.21 körs `mysqldump` som standard). [GitHub-30566](https://github.com/magento/magento2/issues/30566)

### Tema

<!-- ENGCOM-8419 -->

* En ny `--no-parent`-flagga har lagts till i kommandot `bin/magento setup:static-content:deploy` som förhindrar att det överordnade temat kompileras. Den här nya flaggan kan avsevärt förbättra prestandan för den statiska innehållsdistributionen genom att undvika onödig kompilering. Observera att den här nya flaggan inte fungerar när du använder strategin `compact`. [GitHub-30184](https://github.com/magento/magento2/issues/30184)

<!-- MC-37630 -->

* Designkonfigurationen genererar inte längre DDL-åtgärder. Tidigare genererades DDL-satser som kunde utlösa MySQL-fel när designkonfigurationen uppdaterades.

<!-- ENGCOM-8112 -->

* Överflödig kod i modulen `Magento_ConfigurableProduct` i administratörstemat har tagits bort.  [GitHub-29857](https://github.com/magento/magento2/issues/29857)

<!-- ENGCOM-8144 -->

* Navigering för överflödiga mindre format och oanvända egenskaper i det tomma temat har tagits bort. [GitHub-29914](https://github.com/magento/magento2/issues/29914)

<!-- ENGCOM-8285 -->

* Lagt till komprimerbara navigeringsfunktioner i det tomma temat i mobilvyn. [GitHub-30237](https://github.com/magento/magento2/issues/30237)

<!-- ENGCOM-7803 -->

* Inläsning av webbteckensnitt för teman har optimerats.  [GitHub-29526](https://github.com/magento/magento2/issues/29526)

<!-- ENGCOM-8068 -->

* Utvecklare kan nu ange teckensnittstyp när de deklarerar ett anpassat teckensnitt i ett tema. [GitHub-29719](https://github.com/magento/magento2/issues/29719)

### Översättning och nationella inställningar

<!-- MC-36836 -->

* Datumväljaren i rutnätet för administrationsbeställningar fungerar nu som väntat när adminspråket är arabiska (`ar_SA - Saudi Arabia`).

<!-- MC-38476 -->

* Programmet visar inte längre ett felmeddelande när en kund anger en argentinsk adress med en giltig postkod när han eller hon registrerar eller lägger till en ny adress. Tidigare visade programmet följande fel: `Provided Zip/Postal Code seems to be invalid. Example: 1234. If you believe it is the right one you can ignore this notice.`

<!-- MC-38663-->

* Programmet genererar inte längre något fel när en kund anger ett femsiffrigt postnummer för en koreansk adress.

<!-- ENGCOM-8244 -->

* Stöd har lagts till för Uruguay-regioner som definieras i [ISO 3166-2:UY](https://en.wikipedia.org/wiki/ISO_3166-2:UY). [GitHub-29729](https://github.com/magento/magento2/issues/29729)

<!-- ENGCOM-8220 -->

* `zip_codes.xml` har uppdaterats för att framtvinga åtta siffror för brasilianska postnummer. [GitHub-29984](https://github.com/magento/magento2/issues/29984)

<!-- ENGCOM-8304 -->

* Förbättrad lokalisering av återstående olokaliserade fraser. [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8380 -->

* Platshållaren för indata för stödrastersökning kan nu översättas. [GitHub-30510](https://github.com/magento/magento2/issues/30510)

<!-- ENGCOM-8018 -->

* Programmet hämtar nu JavaScript-moduler för textbundna översättningar endast när de är aktiverade.  [GitHub-29553](https://github.com/magento/magento2/issues/29553)

### UI

<!-- MC-38509-->

* Knappen **Skapa ett konto** på sidan Skapa nytt konto förblir aktiv när en kund anger ogiltiga data. Tidigare var knappen inaktiverad, vilket hindrade kunderna från att försöka skapa ett konto igen efter att ha gjort ett fel. Det här var ett känt fel i 2.4.1. [GitHub-30513](https://github.com/magento/magento2/issues/30513)

<!-- MC-38698-->

* Inläsningen av rutnätet på sidan Redigera administratörsorder har förbättrats.

<!-- MC-37870-->

* Nu visas kryssrutan **Samma som faktureringsadress** som förväntat på ordersidan när produkter har lagts till i kundvagnen.

<!-- ENGCOM-8007 -->

* CSS-klassen som har definierat begränsad bredd används nu som förväntat för fälten **Starttid** i Admin **Store** > **Konfiguration** > **Katalog** > **XML-platskarta** > **Genereringsinställningar**.  [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992 -->

* Visningsproblem med kryssruteetiketten Villkor har korrigerats.  [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7948 -->

* Programmet visar inte längre CSS-koden för ett skiktprisblock på produktsidan när skiktpriserna inte är tillgängliga. [GitHub-29194](https://github.com/magento/magento2/issues/29194)

<!-- ENGCOM-8084 -->

* Placeringen av knapparna på informationssidan i bildvyn har ändrats så att de överensstämmer med riktlinjerna för användargränssnittet.  [GitHub-1783](https://github.com/magento/adobe-stock-integration/issues/1783)

<!-- ENGCOM-8342 -->

* Kupongkodens textfält visas nu i rätt bredd i webbläsare i Internet Explorer/EDGE.

<!-- ENGCOM-7630 -->

* Variabeln `@button__border-radius` har nu definierats i biblioteket `lib/web/css/source/lib/variables/_buttons.less`.  `border-radius` har standardvärdet `3px`. Tidigare var `border-radius` hårdkodad.  [GitHub-28674](https://github.com/magento/magento2/issues/28674)

<!-- ENGCOM-8067 -->

* Sändningsknappen (förstoringsglas) i det lilla sökfältet är nu inaktiverad tills den minsta sökstränglängden har nåtts. [GitHub-29704](https://github.com/magento/magento2/issues/29704)

<!-- MC-38807-->

* Knappen **Förhandsgranska mall** fungerar nu som förväntat på sidan Redigera kö.

<!-- MC-35624-->

* Markörens position har justerats från mitten till början av fältet **Meddelande** på **Mitt konto** > **Presentregister** > **Dela presentregister**.

<!-- MC-33497-->

* Visningsproblem med kolumnlayouten på sidan Lägg till schemalagd export har lösts.

<!-- MC-31892-->

* Programmet behåller nu attributets värde när du flyttar attributet från en grupp till en annan.

<!-- MC-37635-->

* Programmet visar nu en kalenderikon bredvid inmatningsfältet **Datum** som förväntat på butiken Skapa ett konto.

<!-- ENGCOM-8085 -->

* En stor variabel för teckenbredd har lagts till i `lib/web/css/source/lib/variables/_typography.less`. [GitHub-29778](https://github.com/magento/magento2/issues/29778)

<!-- ENGCOM-8211 -->

* Filtersynlighet fungerar nu med kolumnsynlighet på det sätt som förväntades i administratörsstödraster.  [GitHub-30345](https://github.com/magento/magento2/issues/30345)

<!-- ENGCOM-7977 -->

* Den banderoll som programmet visas på sidan Administratörsinloggning som kund finns nu högst upp på sidan när användaren rullar. [GitHub-29354](https://github.com/magento/magento2/issues/29354)

<!-- ENGCOM-8152 -->

* Komponentalternativ för val av gränssnitt visas inte längre när `this.disabled(true)` har angetts. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7901 -->

* Variabeln `@font-family-name__base` används inte längre när Open Sans-teckensnittet läses in. [GitHub-29515](https://github.com/magento/magento2/issues/29515)

<!-- ENGCOM-8120 -->

* WAI-ARIA-attributet `aria-atomic="true"` har lagts till i felbehållartaggen. [GitHub-29560](https://github.com/magento/magento2/issues/29560)

<!-- ENGCOM-8175 -->

* UI-komponentstödraster visar nu korrekt antal valda objekt. Tidigare visade stödraster fel antal markeringar när en sökning med nyckelord markerade alla stödrasterobjekt och användaren avmarkerade vissa objekt innan han/hon markerade rubrikraden. [GitHub-29968](https://github.com/magento/magento2/issues/29968)

<!-- ENGCOM-8118 -->

* Programmet visar inte längre orenderad HTML på översiktssidorna för fakturor och leveranser. [GitHub-29958](https://github.com/magento/magento2/issues/29958)

<!-- ENGCOM-8066 -->

* Om du klickar på **Alternativ** på Admin **Lagrar** > **Valutakurser** dirigeras användarna nu till avsnittet med alternativ för utökad valuta på sidan Systemkonfiguration. [GitHub-29336](https://github.com/magento/magento2/issues/29336)

<!-- ENGCOM-8361 -->

* Förbättrat stöd för att visa en widget beroende på ett annat villkor för `adminhtml` widgetar när du använder en typ av widget för väljare. [GitHub-13316](https://github.com/magento/magento2/issues/13316), [GitHub-7252](https://github.com/magento/magento2/issues/7252), [GitHub-6868](https://github.com/magento/magento2/issues/6868)

<!-- ENGCOM-8336 -->

* Förbättrad utfyllnad av text i bekräftelsedialogrutor i Luma-temat. [GitHub-30452](https://github.com/magento/magento2/issues/30452)

### Valv

<!-- MC-39109-->

* Modulen `Vault` känner nu igen betalningsmetodkoder från begäran för tjänsten för hantering av betalningsinformation. Tidigare inträffade det här felet när en kund gjorde en beställning med ett sparat Braintree-kreditkort, även när en giltig betalningsmetod användes: `The requested Payment Method is not available`.

### Hörn

* Adressförslag tas nu bort som förväntat när en adress ändras.

* Ett konkurrensvillkor som innebar att vissa kunder inte kunde spara sin adress på sin kontopanel har lösts.

* Verifiering av vertex-adresser lägger inte längre till sidan Adressredigering i helsidescachen under vissa förhållanden.

* Vertex-beräknad moms beaktas nu när fri frakt har konfigurerats för ett belopp inklusive moms.

### Webb-API-ramverk

<!-- MC-23904 ENGCOM-8421-->

* Du kan nu använda POST `V1/invoice/:invoiceId/refund` för att återbetala en faktura som har noll produktkvantitet och noll fraktkostnader (till exempel `{"items": [{"qty": 0, "orderItemId": 6, "extensionAttributes": {}}], "appendComment": false, "notify": true, "isOnline": true, "arguments": {"adjustment_negative": 0.0, "adjustment_positive": 0.99, "shipping_amount": 0}}.` ) Tidigare orsakade programmet följande fel: `You can't create a creditmemo without products`. [GitHub-23069](https://github.com/magento/magento2/issues/23069)

<!-- MC-33732 -->

* Du kan nu använda POST `V1/categories` för att skapa eller uppdatera en kategori. Tidigare sparade programmet inte värdet om värdet `default_sort_by` angavs som en matris. När värdet `default_sort_by` angavs som en sträng utlöste programmet följande fel: `Error occurred during \"custom_attributes\" processing. Attribute \"default_sort_by\" has invalid value. The \"string\" value's type is invalid. The \"string[]\" type was expected. Verify and try again.`

<!-- MC-35740 -->

* Användning av POST `V1/invoices/:id/capture` för att hämta betalningsinformation fungerar nu som förväntat. Tidigare godkände programmet ordern men tog bara emot den på betalningsgatewayens plats.

<!-- MC-37794 -->

* När du använder POST `V1/order/:orderId/ship` för att skapa en partiell leverans returnerar slutpunkten korrekt antal levererade produkter.

<!-- MC-38425-->

* Fakturor som skapats med POST `V1/order/:orderID/invoice` återspeglar nu korrekt delbetalning per butikskrediter. Tidigare, när en order delvis betalades med butikskrediter, skapades fakturan utan att butikskrediten togs med i beräkningen.

<!-- MC-36830-->

* GET `rest/all/V1/categories`- och GET `rest/all/V1/categories?rootCategoryId=2`-anropen returnerar nu ifyllda `name`- och `product_count`-fält som förväntat för alla kategorier i trädet. Tidigare var kategorifältets värden tomma. Insticksprogrammet för tabellnamnsmatchning returnerade ett felaktigt tabellnamn för hämtning av antalet produkter per kategori.

<!-- ENGCOM-8286 -->

* PUT `V1/categories/:id`-slutpunkten lagrar nu de data som behövs för att skapa 301 omdirigeringar för kategorins URL-nycklar när det anpassade attributet `save_rewrites_history` anges. [GitHub-29174](https://github.com/magento/magento2/issues/29174), [GitHub-30240](https://github.com/magento/magento2/issues/30240)

### Önsklista

<!-- MC-33626-->

* Köpare kan nu lägga till en produkt i en önskelista när produkten tilldelas en anpassad lagerkälla. [GitHub-3018](https://github.com/magento/inventory/issues/3018)

<!-- MC-35416-->

* Administratörer kan nu komma åt sidan Hantera kundvagn från kundsidan Admin när en kund har lagt till en produkt i sin önskelista från butiken. Tidigare visade programmet följande fel när administratören klickade på knappen **Hantera kundvagn**: `An error has occurred. See error log for details`.

<!-- MC-35573-->

* Knappen **Lägg till i kundvagnen** på sidan med delade önskelistor fungerar nu som väntat för anonyma användare, gäster och användare som inte är inloggade.

<!-- MC-34411-->

* Köpare kan nu flytta en produkt från en önskelista till en annan.

<!-- ENGCOM-8062 -->

* Programmet visar nu de valda alternativen för konfigurerbara produktattribut på önskelistesidan som förväntat. [GitHub-24091](https://github.com/magento/magento2/issues/24091), [GitHub-22503](https://github.com/magento/magento2/issues/22503)

<!-- ENGCOM-7779 -->

* `ActionInterface` har implementerats för `\Magento\Wishlist\Controller\Shared\Allcart`. [GitHub-29537](https://github.com/magento/magento2/issues/29537)

## Kända fel

**Problem**: Filen `[magento_root]/index.php` har tagits bort och programmet körs nu från `/pub` som standard för Apache-konfigurationer. Lager som hanteras från undermappar fungerar inte som förväntat och kan visa 404 fel. **Tillfällig lösning**: Använd symboler för att emulera installationen i undermappar. I följande exempel används två butiker (`https://shop01.com/shop/` och `https://shop02.com/shop/`) för att illustrera hur du använder en länk för att emulera en installation i undermappar.

1. Skapa en underkatalog för `https://shop01.com/shop/`:

   ```bash
   mkdir magento_root/pub/shop01
   ```

   ```bash
   cd magento_root/pub/shop01
   ```

1. Skapa symboler för butikens överordnade kataloger i den nyligen skapade katalogen:

   ```bash
   ln -s ../media media
   ```

   ```bash
   ln -s ../static static
   ```

   ```bash
   ln -s ../../../pub pub
   ```

   ```bash
   ln -s ../.htaccess .htaccess
   ```

   ```bash
   ln -s ../health_check.php health_check.php
   ```

1. Skapa en `index.php`-fil i den nya katalogen (`magento_root/pub/shop01/index.php`) och lägg till det här innehållet:

```php
   <?php
   require realpath(__DIR__) . '/../../../app/bootstrap.php';

   switch ($_SERVER['HTTP_HOST']) {
       case 'shop01.com':
       case 'www.shop01.com':
           $params = $_SERVER;
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = 'shop01';
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = 'website';
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
           break;

       default:
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $_SERVER);
           /** @var \Magento\Framework\App\Http $app */
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
       break;
   }
```

1. Konfigurera Apache-servern så att den pekar på den nya underkatalogen. Distributionskonfigurationerna kan variera mycket. Här är ett exempel på serverkonfiguration:

```xml
   <VirtualHost *:80>
       DocumentRoot "magento_root/pub/shop1"
       ServerName shop01.com
   </VirtualHost>
```

**Utgåva**: Handlare måste aktivera snabbstyrd TLS-funktionalitet från administratören för att aktivera den globala omdirigeringen HTTP till HTTPS för alla butikssidor. Se artikeln [Omdirigera HTTP till HTTPS för alla sidor i molnet (Tvinga TLS)](https://support.magento.com/hc/en-us/articles/360006296953) i kunskapsbasen. <!-- MC-39988-->

**Utgåva**: Du kan inte använda GraphQL-mutationen `addConfigurableProductToCart` för att lägga till en konfigurerbar produkt i en varukorg i en icke-standardbutiksvy i en multibutiksdistribution som kör Inventory. (Luma storefront påverkas inte.) Följande fel visas i programmet: `Could not add item to cart. Please check required options and try again`. **Tillfällig lösning**: Använd mutationen `addProductsToCart` i stället. [GitHub-31660](https://github.com/magento/magento2/issues/31660)<!-- PWA-1298-->

**Utgåva**: Programmet skickar inte betalningsinformation som förväntat när en kund först anger rätt kod i CAPTCHA-fältet på betalningssidan, men följande fel visas: `There has been an error processing your request`. Detta inträffar endast när kunden försöker att lägga ordern antingen utan att ange CAPTCHA-koden eller genom att ange den felaktigt.  **Tillfällig lösning**: Uppdatera sidan. <!-- MC-40506-->

**Utgåva**: Programmet skapar en beställning i Braintree som förväntat när en kund klickar på **Betala med Venmo**, men skapar inte beställningen i Admin. **Tillfällig lösning**: Ingen. Se det [2.4.2 kända problemet: Braintree Venmo-betalningen fungerar inte i ](https://support.magento.com/hc/en-us/articles/360054662652/) kunskapsbasartikeln.  <!-- BUNDLE-2894-->

### Kända fel - B2B

**Utgåva**: B2B-köpare kan använda onlinebetalningsmetoder för att kringgå det vanliga inköpsorderflödet. Detta scenario kan inträffa om köparen kan minska den totala utcheckningen till 0 (t.ex. med en kampanjkod eller presentkort) och därefter ta bort koden eller presentkortet. Även under dessa förhållanden beställer programmet fortfarande rätt belopp baserat på priserna för artiklarna i deras tilldelade katalog. **Tillfällig lösning**: Inaktivera presentkort och kupongkoder när onlinebetalningsmetoder har aktiverats för godkännande av inköpsorder. <!-- B2B-1603-->

**Utgåva**: Köpare dirigeras om till kundvagnen när de försöker göra en beställning från en inköpsorder med hjälp av PayPal Express Checkout när **In-Context Mode** är inaktiverat. <!-- B2B-1604-->

**Utgåva**: Programmet visar ibland ett 404-fel när en köpare skapar en inköpsorder och sedan navigerar till utcheckningssidan. Det här felet inträffar när en köpare tidigare har skapat en annan inköpsorder med en onlinebetalningsmetod innan han/hon går till utcheckningssidan utan att slutföra det föregående köpet. Köparen kan fortfarande göra inköpsordern. **Tillfällig lösning**: Ingen. <!-- B2B-1605-->

**Utgåva**: Rabatter för en viss betalningsmetod kvarstår vid utcheckning av en inköpsorder även om köparen ändrar sin betalningsmetod under den slutliga utcheckningen. Det innebär att kunderna kan få en rabatt som de inte har rätt till. Detta beror på att en kundvagnsregel för den ursprungliga betalningsmetoden fortfarande används trots att betalningsmetoden har ändrats. **Tillfällig lösning**: Ingen. Se [2.4.2 B2B-problemet: Rabatten gäller fortfarande för onlineinköpsorder efter att betalningsmetoden har ändrats](https://support.magento.com/hc/en-us/articles/360054667312) i kunskapsbasartikeln. <!-- B2B-1012 -->

**Utgåva**: `deleteRequisitionListOutput`-frågan returnerar information om den borttagna rekvisitionslistan i stället för de återstående rekvisitionslistorna. <!-- MC-39894-->

## Bidrag från gemenskapen

Vi är tacksamma mot den bredare Magento Open Source-communityn och vill tacka för deras bidrag till denna release.

Community Engineering-teamet [Magento Contributors](https://magento.biterg.io/app/kibana) har en lista över de mest bidragsgivande personerna och partnerna per månad, kvartal och år. På den Contributors-sidan kan du följa länkar till deras sammanslagna PR på GitHub.

### Partnerbidrag

I följande tabell visas partnerernas bidrag. I den här tabellen visas den partner som har bidragit med pull-begäran, den externa pull-begäran och det GitHub-nummer som är kopplat till den (om tillgängligt).

{{$include /help/_includes/release-notes/engcomm-2-4-2-partner.md}}

### Individuella bidrag

Följande tabell visar bidragen från våra communitymedlemmar. I den här tabellen visas externa pull-begäranden, GitHub-utgåvans nummer som är kopplat till den (om tillgängligt) och den community-medlem som bidrog med pull-begäran.

{{$include /help/_includes/release-notes/engcomm-2-4-2-issues.md}}

### Systemkrav

Vår teknikstack bygger på PHP och MySQL. Mer information finns i [Systemkrav](../../../installation/system-requirements.md).

### Installations- och uppgraderingsanvisningar

Du kan installera Adobe Commerce 2.4.2 med [Composer](../../../installation/composer.md).

## Migreringsverktygspaket

Med datamigreringsverktyget kan du överföra befintliga data från Magento 1.x-arkivet till Magento 2.x. Det här kommandoradsgränssnittet innehåller funktioner för verifiering, spårning av förlopp, loggning och testning. Installationsanvisningar finns i [Installera datamigreringsverktyget](../../../tools/data-migration-tool/install.md). Utforska eller bidra till databasen [Datamigrering](https://github.com/magento/data-migration-tool).

Med [Code Migration Toolkit](https://github.com/magento-commerce/code-migration) kan du överföra befintliga Magento 1.x-butikstillägg och anpassningar till Magento 2.x. Kommandoradsgränssnittet innehåller skript för konvertering av Magento 1.x-moduler och -layouter.
