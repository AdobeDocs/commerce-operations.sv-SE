---
title: 'ACSD-68040: Sidan för frontend-sökning går långsammare på  [!DNL MariaDB] 10.6 med stor sökhistorik'
description: Använd korrigeringsfilen ACSD-68040 för att åtgärda Adobe Commerce-problemet där söksidan i klientprogrammet uppvisar betydande prestandaförsämringar när den körs på  [!DNL MariaDB] 10.6 med en stor mängd tidigare sökbegäranden.
feature: Search
role: Admin, Developer
type: Troubleshooting
source-git-commit: 8ac6be3c5308fe004dd4754e4565dbac70d59f20
workflow-type: tm+mt
source-wordcount: '378'
ht-degree: 0%

---


# ACSD-68040: Sidan för frontend-sökning tar längre tid på [!DNL MariaDB] 10.6 med stor historik

Korrigeringen ACSD-68040 åtgärdar ett problem där klientsöksidan upplever en betydande prestandaförsämring när den körs på [!DNL MariaDB] 10.6 med en stor mängd historik över sökbegäranden. Den här korrigeringen är tillgänglig när [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.72 har installerats. Korrigerings-ID är ACSD-68040.

## Berörda produkter och versioner

**Korrigeringen har skapats för Adobe Commerce-version:**

* Adobe Commerce (alla distributionsmetoder) 2.4.6-p12

**Kompatibel med Adobe Commerce-versioner:**

* Adobe Commerce (alla distributionsmetoder) 2.4.4 - 2.4.6-p12

>[!NOTE]
>
>Korrigeringen kan bli tillämplig för andra versioner med nya [!DNL Quality Patches Tool]-versioner. Om du vill kontrollera om korrigeringen är kompatibel med din Adobe Commerce-version uppdaterar du `magento/quality-patches`-paketet till den senaste versionen och kontrollerar kompatibiliteten på [[!DNL Quality Patches Tool]: Sök efter korrigeringsfiler &#x200B;](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html?lang=sv-SE). Använd patch-ID:t som söknyckelord för att hitta patchen.

## Problem

Söksidan för frontend blir betydligt långsammare på [!DNL MariaDB] 10.6 när en stor mängd historiska sökbegäranden bearbetas. En fråga i tabellen `search_query` tar upp till 13 sekunder på [!DNL MariaDB] 10.6, jämfört med under 0,5 sekunder på [!DNL MariaDB] 11.4.

<u>Steg som ska återskapas</u>:

1. Installera en ren instans med [!DNL MariaDB] 10.6 i testsyfte.
1. Fyll i tabellen `search_query` med 2 miljoner poster.
1. Kör följande SQL-fråga:

   ```
   SELECT COUNT(*) FROM (
       SELECT `main_table`.`query_text`
       FROM `search_query` AS `main_table`
       WHERE (main_table.store_id IN (1))
         AND (main_table.num_results > 0)
       ORDER BY `main_table`.`popularity` DESC
       LIMIT 100
   ) AS `result`
   WHERE (result.query_text = 'seed_q_0000009');
   ```

1. Observera att frågan tar ca 13 sekunder att slutföra.
1. Uppgradera databasen till [!DNL MariaDB] 11.4.
1. Kör samma SQL-fråga igen:

   ```
   SELECT COUNT(*) FROM (
       SELECT `main_table`.`query_text`
       FROM `search_query` AS `main_table`
       WHERE (main_table.store_id IN (1))
         AND (main_table.num_results > 0)
       ORDER BY `main_table`.`popularity` DESC
       LIMIT 100
   ) AS `result`
   WHERE (result.query_text = 'seed_q_0000009');
   ```

1. Observera att frågan nu slutförs på ungefär 0,4-0,5 sekunder.

<u>Förväntade resultat</u>:

Fråge- eller tabellstrukturen bör optimeras för att säkerställa minimal körningstid, oavsett MariaDB-versionen.

<u>Faktiska resultat</u>:

Frågan tar ca 13-15 sekunder på MariaDB 10.6 och 0.4-0.5 sekunder på MariaDB 11.4.

## Tillämpa korrigeringen

Använd följande länkar beroende på distributionsmetod för att tillämpa enskilda korrigeringsfiler:

* Lokal användning för Adobe Commerce eller Magento Open Source: [[!DNL Quality Patches Tool] > Användning &#x200B;](/help/tools/quality-patches-tool/usage.md) i guiden [!DNL Quality Patches Tool].
* Adobe Commerce om molninfrastruktur: [Uppgraderingar och korrigeringar > Tillämpa korrigeringar](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html?lang=sv-SE) i Commerce om molninfrastruktur.

## Relaterad läsning

Mer information om [!DNL Quality Patches Tool] finns i:

* [[!DNL Quality Patches Tool]: Ett självbetjäningsverktyg för kvalitetspatchar](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) i verktygshandboken.
